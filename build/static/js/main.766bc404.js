/*! For license information please see main.766bc404.js.LICENSE.txt */
(()=>{var e={2357:(e,t,n)=>{"use strict";const r=n(9823);e.exports=r},9823:(e,t,n)=>{"use strict";var r=n(1759),i=n(6868),s=n(9689),o=n(4140),a=n(5523);function l(e){throw Error("Minified Lexical error #".concat(e,"; visit https://lexical.dev/docs/error?code=").concat(e," for the full message or ")+"use the non-minified dev environment for full errors and additional helpful warnings.")}function c(e,t,n){(a.$isGridSelection(n)||null!==o.$findMatchingParent(n.anchor.getNode(),(e=>a.$isGridCellNode(e)))&&null!==o.$findMatchingParent(n.focus.getNode(),(e=>a.$isGridCellNode(e))))&&1===t.length&&a.$isGridNode(t[0])?function(e,t,n,r){1===e.length&&a.$isGridNode(e[0])||l(42);var i=e[0];e=i.getChildren(),n=i.getFirstChildOrThrow().getChildrenSize();var s=i.getChildrenSize(),c=o.$findMatchingParent(t.anchor.getNode(),(e=>a.$isGridCellNode(e)));t=(i=c&&o.$findMatchingParent(c,(e=>a.$isGridRowNode(e))))&&o.$findMatchingParent(i,(e=>a.$isGridNode(e))),a.$isGridCellNode(c)&&a.$isGridRowNode(i)&&a.$isGridNode(t)||l(43);var u=i.getIndexWithinParent(),d=Math.min(t.getChildrenSize()-1,u+s-1);let h,f;s=c.getIndexWithinParent(),c=Math.min(i.getChildrenSize()-1,s+n-1),n=Math.min(s,c),i=Math.min(u,d),s=Math.max(s,c),u=Math.max(u,d),d=t.getChildren(),c=0;for(let o=i;o<=u;o++){var p=d[o];a.$isGridRowNode(p)||l(24);var g=e[c];a.$isGridRowNode(g)||l(24),p=p.getChildren(),g=g.getChildren();let t=0;for(let e=n;e<=s;e++){let r=p[e];a.$isGridCellNode(r)||l(25);let c=g[t];a.$isGridCellNode(c)||l(25),o===i&&e===n?h=r.getKey():o===u&&e===s&&(f=r.getKey());let d=r.getChildren();c.getChildren().forEach((e=>{a.$isTextNode(e)&&a.$createParagraphNode().append(e),r.append(e)})),d.forEach((e=>e.remove())),t++}c++}h&&f&&(e=a.$createGridSelection(),e.set(t.getKey(),h,f),a.$setSelection(e),r.dispatchCommand(a.SELECTION_CHANGE_COMMAND,void 0))}(t,n,!1,e):function(e,t){let n=[],r=null,s=null;for(let o=0;o<e.length;o++){let t=e[o];i.$isListItemNode(t)?(null==s&&(s=i.$createListNode("bullet"),n.push(s)),s.append(t)):(null!=s&&(s=null),a.$isDecoratorNode(t)&&!t.isTopLevel()||a.$isElementNode(t)&&t.isInline()||a.$isTextNode(t)||a.$isLineBreakNode(t)?(null===r&&(r=a.$createParagraphNode(),n.push(r)),null!==r&&r.append(t)):(n.push(t),r=null))}a.$isRangeSelection(t)?t.insertNodes(n):a.$isGridSelection(t)&&(e=t.anchor.getNode(),a.$isGridCellNode(e)||l(41),e.append(...n))}(t,n)}function u(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=null==t||n.isSelected(),o=a.$isElementNode(n)&&n.excludeFromCopy("html");var c=s.$cloneWithProperties(n);c=a.$isTextNode(c)&&null!=t?s.$sliceSelectedTextNodeContent(t,c):c;let d=a.$isElementNode(c)?c.getChildren():[];var h=c;let f=h.exportJSON();f.type!==h.constructor.getType()&&l(58);var p=f.children;for(a.$isElementNode(h)&&(Array.isArray(p)||l(59)),a.$isTextNode(c)&&(f.text=c.__text),c=0;c<d.length;c++)p=u(e,t,h=d[c],f.children),!i&&a.$isElementNode(n)&&p&&n.extractWithChild(h,t,"clone")&&(i=!0);if(i&&!o)r.push(f);else if(Array.isArray(f.children))for(e=0;e<f.children.length;e++)r.push(f.children[e]);return i}t.$getHtmlContent=function(e){let t=a.$getSelection();if(null==t)throw Error("Expected valid LexicalSelection");return a.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?null:r.$generateHtmlFromNodes(e,t)},t.$getLexicalContent=function(e){let t=a.$getSelection();if(null==t)throw Error("Expected valid LexicalSelection");if(a.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length)return null;var n=JSON,r=n.stringify;let i=[],s=a.$getRoot().getChildren();for(let o=0;o<s.length;o++)u(e,t,s[o],i);return r.call(n,{namespace:e._config.namespace,nodes:i})},t.$insertDataTransferForPlainText=function(e,t){null!=(e=e.getData("text/plain"))&&t.insertRawText(e)},t.$insertDataTransferForRichText=function(e,t,n){var i=e.getData("application/x-lexical-editor");if(i)try{var o=JSON.parse(i);if(o.namespace===n._config.namespace&&Array.isArray(o.nodes)){var l=o.nodes;for(i=[],o=0;o<l.length;o++){let e=a.$parseSerializedNode(l[o]);a.$isTextNode(e)&&s.$addNodeStyle(e),i.push(e)}return c(n,i,t)}}catch{}if(l=e.getData("text/html"))try{var u=(new DOMParser).parseFromString(l,"text/html");return c(n,r.$generateNodesFromDOM(n,u),t)}catch{}if(null!=(e=e.getData("text/plain")))if(a.$isRangeSelection(t))for(n=(e=e.split(/\r?\n/)).length,u=0;u<n;u++)t.insertText(e[u]),u<n-1&&t.insertParagraph();else t.insertRawText(e)}},9070:(e,t,n)=>{"use strict";const r=n(4216);e.exports=r},4216:(e,t,n)=>{"use strict";var r=n(1293);n(4350),n(9465),n(6639),n(7537),n(9402),n(9110),n(8153),n(3471),n(5156),n(7275),n(5464);var i=n(4140),s=n(5523);let o={c:"C",clike:"C-like",css:"CSS",html:"HTML",js:"JavaScript",markdown:"Markdown",objc:"Objective-C",plain:"Plain Text",py:"Python",rust:"Rust",sql:"SQL",swift:"Swift",xml:"XML"},a={javascript:"js",md:"markdown",plaintext:"plain",python:"py",text:"plain"};function l(e){return a[e]||e}class c extends s.TextNode{constructor(e,t,n){super(e,n),this.__highlightType=t}static getType(){return"code-highlight"}static clone(e){return new c(e.__text,e.__highlightType||void 0,e.__key)}getHighlightType(){return this.getLatest().__highlightType}createDOM(e){let t=super.createDOM(e);return e=u(e.theme,this.__highlightType),i.addClassNamesToElement(t,e),t}updateDOM(e,t,n){let r=super.updateDOM(e,t,n);return(e=u(n.theme,e.__highlightType))!==(n=u(n.theme,this.__highlightType))&&(e&&i.removeClassNamesFromElement(t,e),n&&i.addClassNamesToElement(t,n)),r}static importJSON(e){let t=d(e.text,e.highlightType);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType(),type:"code-highlight",version:1}}setFormat(){return this}}function u(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function d(e,t){return new c(e,t)}function h(e){return e instanceof c}function f(e){let t=null,n=e.getPreviousSiblings();for(n.push(e);0<n.length&&(h(e=n.pop())&&(t=e),!s.$isLineBreakNode(e)););return t}function p(e){let t=null,n=e.getNextSiblings();for(n.unshift(e);0<n.length&&(h(e=n.shift())&&(t=e),!s.$isLineBreakNode(e)););return t}let g=e=>null!=e&&r.languages.hasOwnProperty(e)?e:void 0;class m extends s.ElementNode{static getType(){return"code"}static clone(e){return new m(e.__language,e.__key)}constructor(e,t){super(t),this.__language=g(e)}createDOM(e){let t=document.createElement("code");return i.addClassNamesToElement(t,e.theme.code),t.setAttribute("spellcheck","false"),(e=this.getLanguage())&&t.setAttribute("data-highlight-language",e),t}updateDOM(e,t){let n=this.__language;return e=e.__language,n?n!==e&&t.setAttribute("data-highlight-language",n):e&&t.removeAttribute("data-highlight-language"),!1}static importDOM(){return{code:e=>null!=e.textContent&&/\r?\n/.test(e.textContent)?{conversion:_,priority:1}:null,div:()=>({conversion:w,priority:1}),pre:()=>({conversion:_,priority:0}),table:e=>S(e)?{conversion:b,priority:4}:null,td:e=>{let t=e.closest("table");return e.classList.contains("js-file-line")?{conversion:E,priority:4}:t&&S(t)?{conversion:T,priority:4}:null},tr:e=>(e=e.closest("table"))&&S(e)?{conversion:T,priority:4}:null}}static importJSON(e){let t=y(e.language);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),type:"code",version:1}}insertNewAfter(e){var t=this.getChildren(),n=t.length;if(2<=n&&"\n"===t[n-1].getTextContent()&&"\n"===t[n-2].getTextContent()&&e.isCollapsed()&&e.anchor.key===this.__key&&e.anchor.offset===n)return t[n-1].remove(),t[n-2].remove(),e=s.$createParagraphNode(),this.insertAfter(e),e;var r=f(t=e.anchor.getNode());if(null!=r){for(n=0,r=r.getTextContent();n<r.length&&/[\t ]/.test(r[n]);)n+=1;if(0<n)return n=d(n=r.substring(0,n)),t.insertAfter(n),e.insertNodes([s.$createLineBreakNode()]),n.select(),n}return null}canInsertTab(){let e=s.$getSelection();return!(!s.$isRangeSelection(e)||!e.isCollapsed())}canIndent(){return!1}collapseAtStart(){let e=s.$createParagraphNode();return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}setLanguage(e){this.getWritable().__language=g(e)}getLanguage(){return this.getLatest().__language}}function y(e){return new m(e)}function v(e){return e instanceof m}function _(){return{node:y()}}function w(e){return{after:t=>{let n=e.parentNode;return null!=n&&e!==n.lastChild&&t.push(s.$createLineBreakNode()),t},node:null!==e.style.fontFamily.match("monospace")?y():null}}function b(){return{node:y()}}function T(){return{node:null}}function E(e){return{after:t=>(e.parentNode&&e.parentNode.nextSibling&&t.push(s.$createLineBreakNode()),t),node:null}}function S(e){return e.classList.contains("js-file-line-container")}function I(e,t){var n=e.length;let r=-1;if(t)for(t=0;t<n;t++){let n=e[t];if(" "!==n&&"\t"!==n){r=t;break}}else for(--n;-1<n;n--)if(" "!==(t=e[n])&&"\t"!==t){r=n;break}return r}function N(e){let t=null,n=-1;var r=e.getPreviousSiblings();for(r.push(e);0<r.length;){var i=r.pop();if(h(i)){var o=i.getTextContent();-1!==(o=I(o,!0))&&(t=i,n=o)}if(s.$isLineBreakNode(i))break}if(null===t)for(e=e.getNextSiblings();0<e.length;){if(h(r=e.shift())&&-1!==(i=I(i=r.getTextContent(),!0))){t=r,n=i;break}if(s.$isLineBreakNode(r))break}return{node:t,offset:n}}function C(e){let t=null,n=-1;var r=e.getNextSiblings();for(r.unshift(e);0<r.length;){var i=r.shift();if(h(i)){var o=i.getTextContent();-1!==(o=I(o,!1))&&(t=i,n=o+1)}if(s.$isLineBreakNode(i))break}if(null===t)for(e=e.getPreviousSiblings();0<e.length;){if(h(r=e.pop())&&-1!==(i=I(i=r.getTextContent(),!1))){t=r,n=i+1;break}if(s.$isLineBreakNode(r))break}return{node:t,offset:n}}function k(e,t){let n=e.getParent();v(n)?A(n,t):h(e)&&e.replace(s.$createTextNode(e.__text))}let x=!1;function A(e,t){x||(x=!0,void 0===e.getLanguage()&&e.setLanguage("javascript"),t.update((()=>{!function(e,t){var n=s.$getSelection();if(s.$isRangeSelection(n)){var r=(n=n.anchor).offset,i="element"===n.type&&s.$isLineBreakNode(e.getChildAtIndex(n.offset-1)),o=0;if(!i){let e=n.getNode();o=r+e.getPreviousSiblings().reduce(((e,t)=>e+(s.$isLineBreakNode(t)?0:t.getTextContentSize())),0)}t()&&(i?n.getNode().select(r,r):e.getChildren().some((e=>{if(s.$isTextNode(e)){let t=e.getTextContentSize();if(t>=o)return e.select(o,o),!0;o-=t}return!1})))}else t()}(e,(()=>{var t=e.getTextContent();t=O(t=r.tokenize(t,r.languages[e.getLanguage()||""]||r.languages.javascript));var n=e.getChildren();let i=0;for(;i<n.length&&R(n[i],t[i]);)i++;var s=n.length;let o=t.length,a=Math.min(s,o)-i,l=0;for(;l<a;)if(l++,!R(n[s-l],t[o-l])){l--;break}n=i,s-=l,t=t.slice(i,o-l);let{from:c,to:u,nodesForReplacement:d}={from:n,nodesForReplacement:t,to:s};return!(c===u&&!d.length)&&(e.splice(c,u-c,d),!0)}))}),{onUpdate:()=>{x=!1},skipTransforms:!0}))}function O(e){let t=[];return e.forEach((e=>{if("string"===typeof e){e=e.split("\n");for(var n=0;n<e.length;n++){let r=e[n];r.length&&t.push(d(r)),n<e.length-1&&t.push(s.$createLineBreakNode())}}else({content:n}=e),"string"===typeof n?t.push(d(n,e.type)):Array.isArray(n)&&1===n.length&&"string"===typeof n[0]?t.push(d(n[0],e.type)):Array.isArray(n)&&t.push(...O(n))})),t}function R(e,t){return h(e)&&h(t)?e.__text===t.__text&&e.__highlightType===t.__highlightType:!(!s.$isLineBreakNode(e)||!s.$isLineBreakNode(t))}function D(e){var t=s.$getSelection();if(!s.$isRangeSelection(t)||t.isCollapsed())return!1;t=t.getNodes();for(var n=0;n<t.length;n++){var r=t[n];if(!h(r)&&!s.$isLineBreakNode(r))return!1}for(null!=(n=f(t[0]))&&P(n,e),n=1;n<t.length;n++)r=t[n],s.$isLineBreakNode(t[n-1])&&h(r)&&P(r,e);return!0}function P(e,t){let n=e.getTextContent();t===s.INDENT_CONTENT_COMMAND?0<n.length&&/\s/.test(n[0])?e.setTextContent("\t"+n):(t=d("\t"),e.insertBefore(t)):0===n.indexOf("\t")&&(1===n.length?e.remove():e.setTextContent(n.substring(1)))}function L(e,t){let n=s.$getSelection();if(!s.$isRangeSelection(n))return!1;let{anchor:r,focus:i}=n,o=r.offset,a=i.offset,l=r.getNode(),c=i.getNode();var u=e===s.KEY_ARROW_UP_COMMAND;if(!h(l)||!h(c))return!1;if(!t.altKey){if(n.isCollapsed())if(e=l.getParentOrThrow(),u&&0===o&&null===l.getPreviousSibling()){if(null===e.getPreviousSibling())return e.selectPrevious(),t.preventDefault(),!0}else if(!u&&o===l.getTextContentSize()&&null===l.getNextSibling()&&null===e.getNextSibling())return e.selectNext(),t.preventDefault(),!0;return!1}var d=f(l);let g=p(c);if(null==d||null==g)return!1;let m=d.getNodesBetween(g);for(let f=0;f<m.length;f++){let e=m[f];if(!h(e)&&!s.$isLineBreakNode(e))return!1}if(t.preventDefault(),t.stopPropagation(),t=u?d.getPreviousSibling():g.getNextSibling(),!s.$isLineBreakNode(t))return!0;if(null==(d=u?t.getPreviousSibling():t.getNextSibling()))return!0;let y=null!=(u=u?f(d):p(d))?u:d;return t.remove(),m.forEach((e=>e.remove())),e===s.KEY_ARROW_UP_COMMAND?(m.forEach((e=>y.insertBefore(e))),y.insertBefore(t)):(y.insertAfter(t),y=t,m.forEach((e=>{y.insertAfter(e),y=e}))),n.setTextNodeRange(l,o,c,a),!0}function M(e,t){let n=s.$getSelection();if(!s.$isRangeSelection(n))return!1;let r,i,{anchor:o,focus:a}=n,l=o.getNode(),c=a.getNode();return e=e===s.MOVE_TO_START,!(!h(l)||!h(c))&&(({node:r,offset:i}=e?N(c):C(c)),null!==r&&-1!==i&&n.setTextNodeRange(r,i,r,i),t.preventDefault(),t.stopPropagation(),!0)}t.$createCodeHighlightNode=d,t.$createCodeNode=y,t.$isCodeHighlightNode=h,t.$isCodeNode=v,t.CODE_LANGUAGE_FRIENDLY_NAME_MAP=o,t.CODE_LANGUAGE_MAP=a,t.CodeHighlightNode=c,t.CodeNode=m,t.DEFAULT_CODE_LANGUAGE="javascript",t.getCodeLanguages=()=>Object.keys(r.languages).filter((e=>"function"!==typeof r.languages[e])).sort(),t.getDefaultCodeLanguage=()=>"javascript",t.getEndOfCodeInLine=C,t.getFirstCodeHighlightNodeOfLine=f,t.getLanguageFriendlyName=function(e){return e=l(e),o[e]||e},t.getLastCodeHighlightNodeOfLine=p,t.getStartOfCodeInLine=N,t.normalizeCodeLang=l,t.registerCodeHighlighting=function(e){if(!e.hasNodes([m,c]))throw Error("CodeHighlightPlugin: CodeNode or CodeHighlightNode not registered on editor");return i.mergeRegister(e.registerMutationListener(m,(t=>{e.update((()=>{for(let[i,o]of t)if("destroyed"!==o){var n=s.$getNodeByKey(i);if(null!==n)e:{var r=n;if(null===(n=e.getElementByKey(r.getKey())))break e;let t=(r=r.getChildren()).length;if(t===n.__cachedChildrenLength)break e;n.__cachedChildrenLength=t;let i="1",o=1;for(let e=0;e<t;e++)s.$isLineBreakNode(r[e])&&(i+="\n"+ ++o);n.setAttribute("data-gutter",i)}}}))})),e.registerNodeTransform(m,(t=>A(t,e))),e.registerNodeTransform(s.TextNode,(t=>k(t,e))),e.registerNodeTransform(c,(t=>k(t,e))),e.registerCommand(s.INDENT_CONTENT_COMMAND,(()=>D(s.INDENT_CONTENT_COMMAND)),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.OUTDENT_CONTENT_COMMAND,(()=>D(s.OUTDENT_CONTENT_COMMAND)),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.KEY_ARROW_UP_COMMAND,(e=>L(s.KEY_ARROW_UP_COMMAND,e)),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.KEY_ARROW_DOWN_COMMAND,(e=>L(s.KEY_ARROW_DOWN_COMMAND,e)),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.MOVE_TO_END,(e=>M(s.MOVE_TO_END,e)),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.MOVE_TO_START,(e=>M(s.MOVE_TO_START,e)),s.COMMAND_PRIORITY_LOW))}},6700:(e,t,n)=>{"use strict";const r=n(6734);e.exports=r},6734:(e,t,n)=>{"use strict";var r=n(5523);t.registerDragonSupport=function(e){let t=t=>{var n=e.getRootElement();if(document.activeElement===n&&"string"===typeof(n=t.data)){try{var i=JSON.parse(n)}catch(s){return}if(i&&"nuanria_messaging"===i.protocol&&"request"===i.type&&(i=i.payload)&&"makeChanges"===i.functionId&&(i=i.args)){const[n,s,o,a,l]=i;e.update((()=>{const e=r.$getSelection();if(r.$isRangeSelection(e)){var i=e.anchor;let c=i.getNode(),u=0,d=0;r.$isTextNode(c)&&0<=n&&0<=s&&(u=n,d=n+s,e.setTextNodeRange(c,u,c,d)),u===d&&""===o||(e.insertRawText(o),c=i.getNode()),r.$isTextNode(c)&&(u=a,d=a+l,u=u>(i=c.getTextContentSize())?i:u,d=d>i?i:d,e.setTextNodeRange(c,u,c,d)),t.stopImmediatePropagation()}}))}}};return window.addEventListener("message",t,!0),()=>{window.removeEventListener("message",t,!0)}}},7711:(e,t,n)=>{"use strict";const r=n(1621);e.exports=r},1621:(e,t,n)=>{"use strict";var r=n(4140),i=n(5523);function s(e,t){let n=Date.now(),r=0;return(s,o,a,l,c,u)=>{let d=Date.now();if(u.has("historic"))return r=0,n=d,2;let h=function(e,t,n,r,s){if(null===e||0===n.size&&0===r.size&&!s)return 0;var o=t._selection,a=e._selection;if(s)return 1;if(!(i.$isRangeSelection(o)&&i.$isRangeSelection(a)&&a.isCollapsed()&&o.isCollapsed()))return 0;s=t._nodeMap;let l=[];for(let i of n)void 0!==(n=s.get(i))&&l.push(n);for(let[c,u]of r)u&&(void 0===(r=s.get(c))||i.$isRootNode(r)||l.push(r));return 0===l.length?0:1<l.length?(t=(r=t._nodeMap).get(o.anchor.key),a=r.get(a.anchor.key),t&&a&&!e._nodeMap.has(t.__key)&&i.$isTextNode(t)&&1===t.__text.length&&1===o.anchor.offset?2:0):(t=l[0],e=e._nodeMap.get(t.__key),i.$isTextNode(e)&&i.$isTextNode(t)&&e.__mode===t.__mode?(e=e.__text)===(t=t.__text)?0:(o=o.anchor,a=a.anchor,o.key!==a.key||"text"!==o.type?0:(o=o.offset,a=a.offset,1===(e=t.length-e.length)&&a===o-1?2:-1===e&&a===o+1?3:-1===e&&a===o?4:0)):0)}(s,o,l,c,e.isComposing()),f=(()=>{var f=null===a||a.editor===e,p=u.has("history-push");if(!p&&f&&u.has("history-merge"))return 0;if(null===s)return 1;const g=o._selection,m=s._selection;return 0<l.size||0<c.size?!1===p&&0!==h&&h===r&&d<n+t&&f||1===l.size&&(p=Array.from(l)[0],f=s._nodeMap.get(p),p=o._nodeMap.get(p),f=!(!i.$isTextNode(f)||!i.$isTextNode(p))&&(f.__type===p.__type&&f.__text===p.__text&&f.__mode===p.__mode&&f.__detail===p.__detail&&f.__style===p.__style&&f.__format===p.__format&&f.__parent===p.__parent))?0:1:null===m&&null!==g?0:2})();return n=d,r=h,f}}t.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}},t.registerHistory=function(e,t,n){let o=s(e,n);n=n=>{let{editorState:r,prevEditorState:s,dirtyLeaves:a,dirtyElements:l,tags:c}=n;const u=t.current,d=t.redoStack,h=t.undoStack,f=null===u?null:u.editorState;if(null===u||r!==f){if(a=o(s,r,u,a,l,c),1===a)0!==d.length&&(t.redoStack=[]),null!==u&&(h.push({...u,undoSelection:s.read(i.$getSelection)}),e.dispatchCommand(i.CAN_UNDO_COMMAND,!0));else if(2===a)return;t.current={editor:e,editorState:r}}};let a=r.mergeRegister(e.registerCommand(i.UNDO_COMMAND,(()=>{let n=t.redoStack,r=t.undoStack;if(0!==r.length){let s=t.current,o=r.pop();null!==s&&(n.push(s),e.dispatchCommand(i.CAN_REDO_COMMAND,!0)),0===r.length&&e.dispatchCommand(i.CAN_UNDO_COMMAND,!1),t.current=o||null,o&&o.editor.setEditorState(o.editorState.clone(o.undoSelection),{tag:"historic"})}return!0}),i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.REDO_COMMAND,(()=>{let n=t.redoStack;var r=t.undoStack;if(0!==n.length){let s=t.current;null!==s&&(r.push(s),e.dispatchCommand(i.CAN_UNDO_COMMAND,!0)),r=n.pop(),0===n.length&&e.dispatchCommand(i.CAN_REDO_COMMAND,!1),t.current=r||null,r&&r.editor.setEditorState(r.editorState,{tag:"historic"})}return!0}),i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.CLEAR_EDITOR_COMMAND,(()=>(t.undoStack=[],t.redoStack=[],t.current=null,!1)),i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.CLEAR_HISTORY_COMMAND,(()=>(t.undoStack=[],t.redoStack=[],t.current=null,!0)),i.COMMAND_PRIORITY_EDITOR),e.registerUpdateListener(n)),l=e.registerUpdateListener(n);return()=>{a(),l()}}},1759:(e,t,n)=>{"use strict";const r=n(5313);e.exports=r},5313:(e,t,n)=>{"use strict";var r=n(9689),i=n(5523);function s(e,t,n,o){let a=null==t||n.isSelected(),l=i.$isElementNode(n)&&n.excludeFromCopy("html"),c=r.$cloneWithProperties(n);c=i.$isTextNode(c)&&null!=t?r.$sliceSelectedTextNodeContent(t,c):c;let u=i.$isElementNode(c)?c.getChildren():[],{element:d,after:h}=c.exportDOM(e);if(!d)return!1;let f=new DocumentFragment;for(let r=0;r<u.length;r++){let o=u[r],l=s(e,t,o,f);!a&&i.$isElementNode(n)&&l&&n.extractWithChild(o,t,"html")&&(a=!0)}return a&&!l?(d.append(f),o.append(d),h&&(e=h.call(c,d))&&d.replaceWith(e)):o.append(f),a}let o=new Set(["STYLE"]);function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3?arguments[3]:void 0,s=[];if(o.has(e.nodeName))return s;let l=null;var c,{nodeName:u}=e,d=t._htmlConversions.get(u.toLowerCase());if(u=null,void 0!==d)for(c of d)null!==(d=c(e))&&(null===u||u.priority<d.priority)&&(u=d);if(u=(c=null!==u?u.conversion:null)?c(e):null,c=null,null!==u){if(c=u.after,l=u.node,null!==l){for(var[,h]of n)if(l=h(l,r),!l)break;l&&s.push(l)}null!=u.forChild&&n.set(e.nodeName,u.forChild)}for(e=e.childNodes,r=[],h=0;h<e.length;h++)r.push(...a(e[h],t,new Map(n),l));return null!=c&&(r=c(r)),null==l?s=s.concat(r):i.$isElementNode(l)&&l.append(...r),s}t.$generateHtmlFromNodes=function(e,t){if(null==document||null==window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let n=document.createElement("div"),r=i.$getRoot().getChildren();for(let i=0;i<r.length;i++){let o=r[i];void 0!==t&&s(e,t,o,n)}return n.innerHTML},t.$generateNodesFromDOM=function(e,t){let n=[],r=(t=t.body?Array.from(t.body.childNodes):[]).length;for(let s=0;s<r;s++){var i=t[s];o.has(i.nodeName)||null!==(i=a(i,e))&&(n=n.concat(i))}return n}},1577:(e,t,n)=>{"use strict";const r=n(3905);e.exports=r},3905:(e,t,n)=>{"use strict";var r=n(4140),i=n(5523);class s extends i.ElementNode{static getType(){return"link"}static clone(e){return new s(e.__url,{rel:e.__rel,target:e.__target},e.__key)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(arguments.length>2?arguments[2]:void 0);let{target:n=null,rel:r=null}=t;this.__url=e,this.__target=n,this.__rel=r}createDOM(e){let t=document.createElement("a");return t.href=this.__url,null!==this.__target&&(t.target=this.__target),null!==this.__rel&&(t.rel=this.__rel),r.addClassNamesToElement(t,e.theme.link),t}updateDOM(e,t){let n=this.__url,r=this.__target,i=this.__rel;return n!==e.__url&&(t.href=n),r!==e.__target&&(r?t.target=r:t.removeAttribute("target")),i!==e.__rel&&(i?t.rel=i:t.removeAttribute("rel")),!1}static importDOM(){return{a:()=>({conversion:o,priority:1})}}static importJSON(e){let t=a(e.url,{rel:e.rel,target:e.target});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),type:"link",url:this.getURL(),version:1}}getURL(){return this.getLatest().__url}setURL(e){this.getWritable().__url=e}getTarget(){return this.getLatest().__target}setTarget(e){this.getWritable().__target=e}getRel(){return this.getLatest().__rel}setRel(e){this.getWritable().__rel=e}insertNewAfter(e){if(e=this.getParentOrThrow().insertNewAfter(e),i.$isElementNode(e)){let t=a(this.__url,{rel:this.__rel,target:this.__target});return e.append(t),t}return null}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t){if(!i.$isRangeSelection(t))return!1;e=t.anchor.getNode();let n=t.focus.getNode();return this.isParentOf(e)&&this.isParentOf(n)&&0<t.getTextContent().length}}function o(e){let t=null;return e instanceof HTMLAnchorElement&&(t=a(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target")})),{node:t}}function a(e,t){return new s(e,t)}function l(e){return e instanceof s}class c extends s{static getType(){return"autolink"}static clone(e){return new c(e.__url,{rel:e.__rel,target:e.__target},e.__key)}static importJSON(e){let t=u(e.url,{rel:e.rel,target:e.target});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),type:"autolink",version:1}}insertNewAfter(e){if(e=this.getParentOrThrow().insertNewAfter(e),i.$isElementNode(e)){let t=u(this.__url,{rel:this._rel,target:this.__target});return e.append(t),t}return null}}function u(e,t){return new c(e,t)}let d=i.createCommand();t.$createAutoLinkNode=u,t.$createLinkNode=a,t.$isAutoLinkNode=function(e){return e instanceof c},t.$isLinkNode=l,t.AutoLinkNode=c,t.LinkNode=s,t.TOGGLE_LINK_COMMAND=d,t.toggleLink=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{target:n,rel:r}=t;if(t=i.$getSelection(),i.$isRangeSelection(t))if(t=t.extract(),null===e)t.forEach((e=>{if(l(e=e.getParent())){let t=e.getChildren();for(let n=0;n<t.length;n++)e.insertBefore(t[n]);e.remove()}}));else{if(1===t.length){var s=t[0];if(s=l(s)?s:function(e){return function(e,t){for(;null!==e&&null!==(e=e.getParent())&&!t(e););return e}(e,(e=>l(e)))}(s),null!==s)return s.setURL(e),void 0!==n&&s.setTarget(n),void(void 0!==r&&s.setRel(r))}let o=null,c=null;t.forEach((t=>{var s=t.getParent();if(s!==c&&null!==s&&(!i.$isElementNode(t)||t.isInline()))if(l(s))c=s,s.setURL(e),void 0!==n&&s.setTarget(n),void 0!==r&&s.setRel(r);else if(s.is(o)||(o=s,c=a(e,{rel:r,target:n}),l(s)?null===t.getPreviousSibling()?s.insertBefore(c):s.insertAfter(c):t.insertBefore(c)),l(t)){if(!t.is(c)){if(null!==c){s=t.getChildren();for(let e=0;e<s.length;e++)c.append(s[e])}t.remove()}}else null!==c&&c.append(t)}))}}},6868:(e,t,n)=>{"use strict";const r=n(8154);e.exports=r},8154:(e,t,n)=>{"use strict";var r=n(5523),i=n(4140);function s(e){throw Error("Minified Lexical error #".concat(e,"; visit https://lexical.dev/docs/error?code=").concat(e," for the full message or ")+"use the non-minified dev environment for full errors and additional helpful warnings.")}function o(e){let t=1;for(e=e.getParent();null!=e;){if(E(e)){if(A(e=e.getParent())){t++,e=e.getParent();continue}s(40)}break}return t}function a(e){A(e=e.getParent())||s(40);let t=e;for(;null!==t;)t=t.getParent(),A(t)&&(e=t);return e}function l(e){let t=[];e=e.getChildren().filter(E);for(let n=0;n<e.length;n++){let r=e[n],i=r.getFirstChild();A(i)?t=t.concat(l(i)):t.push(r)}return t}function c(e){return E(e)&&A(e.getFirstChild())}function u(e){return T().append(e)}function d(e,t){return E(e)&&(0===t.length||1===t.length&&e.is(t[0])&&0===e.getChildrenSize())}function h(e,t){e.splice(e.getChildrenSize(),0,t)}function f(e,t){if(A(e))return e;let n=e.getPreviousSibling(),r=e.getNextSibling(),i=T();return i.setFormat(e.getFormatType()),i.setIndent(e.getIndent()),h(i,e.getChildren()),A(n)&&t===n.getListType()?(n.append(i),e.remove(),A(r)&&t===r.getListType()&&(h(n,r.getChildren()),r.remove()),n):A(r)&&t===r.getListType()?(r.getFirstChildOrThrow().insertBefore(i),e.remove(),r):((t=x(t)).append(i),e.replace(t),p(t),t)}function p(e,t){(t||e.getChildren()).forEach((e=>{let t=e.getValue();var n=e.getParent(),r=1;null!=n&&(A(n)?r=n.getStart():s(44)),n=e.getPreviousSiblings();for(let i=0;i<n.length;i++){let e=n[i];E(e)&&!A(e.getFirstChild())&&r++}t!==r&&e.setValue(r)}))}function g(e){let t=new Set;e.forEach((e=>{if(!c(e)&&!t.has(e.getKey())){var n=e.getParent(),r=e.getNextSibling(),i=e.getPreviousSibling();if(c(r)&&c(i))A(i=i.getFirstChild())&&(i.append(e),A(e=r.getFirstChild())&&(h(i,e=e.getChildren()),r.remove(),t.add(r.getKey())),p(i));else if(c(r))A(r=r.getFirstChild())&&(null!==(i=r.getFirstChild())&&i.insertBefore(e),p(r));else if(c(i))A(r=i.getFirstChild())&&(r.append(e),p(r));else if(A(n)){let t=T(),s=x(n.getListType());t.append(s),s.append(e),i?i.insertAfter(t):r?r.insertBefore(t):n.append(t)}A(n)&&p(n)}}))}function m(e){e.forEach((e=>{if(!c(e)){var t=e.getParent(),n=t?t.getParent():void 0,r=n?n.getParent():void 0;if(A(r)&&E(n)&&A(t)){var i=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(i))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(s))n.insertAfter(e),t.isEmpty()&&n.remove();else{var o=t.getListType();i=T();let r=x(o);i.append(r),e.getPreviousSiblings().forEach((e=>r.append(e))),s=T(),o=x(o),s.append(o),h(o,e.getNextSiblings()),n.insertBefore(i),n.insertAfter(s),n.replace(e)}p(t),p(r)}}}))}function y(e){var t=r.$getSelection();if(r.$isRangeSelection(t)){var n=t.getNodes(),i=[];if(0===n.length&&n.push(t.anchor.getNode()),1===n.length){e:{for(n=n[0];null!==n;){if(E(n))break e;n=n.getParent()}n=null}null!==n&&(i=[n])}else{for(i=new Set,t=0;t<n.length;t++){let e=n[t];E(e)&&i.add(e)}i=Array.from(i)}0<i.length&&("indent"===e?g(i):m(i))}}class v extends r.ElementNode{static getType(){return"listitem"}static clone(e){return new v(e.__value,e.__checked,e.__key)}constructor(e,t,n){super(n),this.__value=void 0===e?1:e,this.__checked=t}createDOM(e){let t=document.createElement("li"),n=this.getParent();return A(n)&&(p(n),w(t,this,null,n)),t.value=this.__value,_(t,e.theme,this),t}updateDOM(e,t,n){let r=this.getParent();return A(r)&&(p(r),w(t,this,e,r)),t.value=this.__value,_(t,n.theme,this),!1}static importDOM(){return{li:()=>({conversion:b,priority:0})}}static importJSON(e){let t=new v(e.value,e.checked);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(){for(let e=0;e<arguments.length;e++){let t=e<0||arguments.length<=e?void 0:arguments[e];if(r.$isElementNode(t)&&this.canMergeWith(t)){let e=t.getChildren();this.append(...e),t.remove()}else super.append(t)}return this}replace(e){if(E(e))return super.replace(e);let t=this.getParentOrThrow();if(A(t)){var n=t.__children;let i=n.length;var r=n.indexOf(this.__key);if(0===r)t.insertBefore(e);else if(r===i-1)t.insertAfter(e);else{n=x(t.getListType());let s=t.getChildren();for(r+=1;r<i;r++)n.append(s[r]);t.insertAfter(e),e.insertAfter(n)}this.remove(),1===i&&t.remove()}return e}insertAfter(e){var t=this.getParentOrThrow();A(t)||s(39);var n=this.getNextSiblings();if(E(e))return t=super.insertAfter(e),A(e=e.getParentOrThrow())&&p(e),t;if(A(e)&&e.getListType()===t.getListType()){for(t=e,n=(e=e.getChildren()).length-1;0<=n;n--)t=e[n],this.insertAfter(t);return t}if(t.insertAfter(e),0!==n.length){let r=x(t.getListType());n.forEach((e=>r.append(e))),e.insertAfter(r)}return e}remove(e){let t=this.getNextSibling();super.remove(e),null!==t&&(A(e=t.getParent())&&p(e))}insertNewAfter(){let e=T(null==this.__checked&&void 0);return this.insertAfter(e),e}collapseAtStart(e){let t=r.$createParagraphNode();this.getChildren().forEach((e=>t.append(e)));var n=this.getParentOrThrow(),i=n.getParentOrThrow();let s=E(i);return 1===n.getChildrenSize()?s?(n.remove(),i.select()):(n.replace(t),n=e.anchor,e=e.focus,i=t.getKey(),"element"===n.type&&n.getNode().is(this)&&n.set(i,n.offset,"element"),"element"===e.type&&e.getNode().is(this)&&e.set(i,e.offset,"element")):(n.insertBefore(t),this.remove()),!0}getValue(){return this.getLatest().__value}setValue(e){this.getWritable().__value=e}getChecked(){return this.getLatest().__checked}setChecked(e){this.getWritable().__checked=e}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){var e=this.getParent();if(null===e)return this.getLatest().__indent;e=e.getParentOrThrow();let t=0;for(;E(e);)e=e.getParentOrThrow().getParentOrThrow(),t++;return t}setIndent(e){let t=this.getIndent();for(;t!==e;)t<e?(g([this]),t++):(m([this]),t--);return this}canIndent(){return!1}insertBefore(e){if(E(e)){let e=this.getParentOrThrow();if(A(e)){p(e,this.getNextSiblings())}}return super.insertBefore(e)}canInsertAfter(e){return E(e)}canReplaceWith(e){return E(e)}canMergeWith(e){return r.$isParagraphNode(e)||E(e)}extractWithChild(e,t){if(!r.$isRangeSelection(t))return!1;e=t.anchor.getNode();let n=t.focus.getNode();return this.isParentOf(e)&&this.isParentOf(n)&&this.getTextContent().length===t.getTextContent().length}}function _(e,t,n){let r=[],s=[];var o=(t=t.list)?t.listitem:void 0;if(t&&t.nested)var a=t.nested.listitem;if(void 0!==o&&(o=o.split(" "),r.push(...o)),t){o=A(o=n.getParent())&&"check"===o.getListType();let e=n.getChecked();o&&!e||s.push(t.listitemUnchecked),o&&e||s.push(t.listitemChecked),o&&r.push(e?t.listitemChecked:t.listitemUnchecked)}void 0!==a&&(a=a.split(" "),n.getChildren().some((e=>A(e)))?r.push(...a):s.push(...a)),0<s.length&&i.removeClassNamesFromElement(e,...s),0<r.length&&i.addClassNamesToElement(e,...r)}function w(e,t,n,r){"check"===r.getListType()?A(t.getFirstChild())?(e.removeAttribute("role"),e.removeAttribute("tabIndex"),e.removeAttribute("aria-checked")):(e.setAttribute("role","checkbox"),e.setAttribute("tabIndex","-1"),n&&t.__checked===n.__checked||e.setAttribute("aria-checked",t.getChecked()?"true":"false")):null!=t.getChecked()&&t.setChecked(void 0)}function b(){return{node:T()}}function T(e){return new v(void 0,e)}function E(e){return e instanceof v}class S extends r.ElementNode{static getType(){return"list"}static clone(e){return new S(e.__listType||k[e.__tag],e.__start,e.__key)}constructor(e,t,n){super(n),this.__listType=e=k[e]||e,this.__tag="number"===e?"ol":"ul",this.__start=t}getTag(){return this.__tag}getListType(){return this.__listType}getStart(){return this.__start}createDOM(e){let t=document.createElement(this.__tag);return 1!==this.__start&&t.setAttribute("start",String(this.__start)),t.__lexicalListType=this.__listType,I(t,e.theme,this),t}updateDOM(e,t,n){return e.__tag!==this.__tag||(I(t,n.theme,this),!1)}static importDOM(){return{ol:()=>({conversion:C,priority:0}),ul:()=>({conversion:C,priority:0})}}static importJSON(e){let t=x(e.listType,e.start);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(){for(let t=0;t<arguments.length;t++){var e=t<0||arguments.length<=t?void 0:arguments[t];if(E(e))super.append(e);else{let t=T();A(e)||(e=r.$createTextNode(e.getTextContent())),t.append(e),super.append(t)}}return this}extractWithChild(e){return E(e)}}function I(e,t,n){let r=[],s=[];var a=t.list;if(void 0!==a){let e=a["".concat(n.__tag,"Depth")]||[],i=(t=o(n)-1)%e.length;var l=e[i];let c,u=a[n.__tag];if(void 0!==(a=a.nested)&&a.list&&(c=a.list),void 0!==u&&r.push(u),void 0!==l)for(l=l.split(" "),r.push(...l),l=0;l<e.length;l++)l!==i&&s.push(n.__tag+l);void 0!==c&&(n=c.split(" "),1<t?r.push(...n):s.push(...n))}0<s.length&&i.removeClassNamesFromElement(e,...s),0<r.length&&i.addClassNamesToElement(e,...r)}function N(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];E(r)?(t.push(r),r.getChildren().forEach((e=>{A(e)&&t.push(u(e))}))):t.push(u(r))}return t}function C(e){let t=null;return"ol"===(e=e.nodeName.toLowerCase())?t=x("number"):"ul"===e&&(t=x("bullet")),{after:N,node:t}}let k={ol:"number",ul:"bullet"};function x(e){return new S(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}function A(e){return e instanceof S}let O=r.createCommand(),R=r.createCommand(),D=r.createCommand(),P=r.createCommand();t.$createListItemNode=T,t.$createListNode=x,t.$getListDepth=o,t.$handleListInsertParagraph=function(){var e=r.$getSelection();if(!r.$isRangeSelection(e)||!e.isCollapsed())return!1;if(!E(e=e.anchor.getNode())||""!==e.getTextContent())return!1;var t=a(e),n=e.getParent();A(n)||s(40);let i,o=n.getParent();if(r.$isRootNode(o))i=r.$createParagraphNode(),t.insertAfter(i);else{if(!E(o))return!1;i=T(),o.insertAfter(i)}if(i.select(),0<(t=e.getNextSiblings()).length){let e=x(n.getListType());r.$isParagraphNode(i)?i.insertAfter(e):((n=T()).append(e),i.insertAfter(n)),t.forEach((t=>{t.remove(),e.append(t)}))}return function(e){for(;null==e.getNextSibling()&&null==e.getPreviousSibling();){let t=e.getParent();if(null==t||!E(e)&&!A(e))break;e=t}e.remove()}(e),!0},t.$isListItemNode=E,t.$isListNode=A,t.INSERT_CHECK_LIST_COMMAND=D,t.INSERT_ORDERED_LIST_COMMAND=R,t.INSERT_UNORDERED_LIST_COMMAND=O,t.ListItemNode=v,t.ListNode=S,t.REMOVE_LIST_COMMAND=P,t.indentList=function(){y("indent")},t.insertList=function(e,t){e.update((()=>{var e=r.$getSelection();if(r.$isRangeSelection(e)){var n=e.getNodes(),i=(e=e.anchor.getNode()).getParent();if(d(e,n))n=x(t),r.$isRootNode(i)?(e.replace(n),i=T(),r.$isElementNode(e)&&(i.setFormat(e.getFormatType()),i.setIndent(e.getIndent())),n.append(i)):E(e)&&(h(n,(e=e.getParentOrThrow()).getChildren()),e.replace(n));else for(e=new Set,i=0;i<n.length;i++){var s=n[i];if(r.$isElementNode(s)&&s.isEmpty()&&!e.has(s.getKey()))f(s,t);else if(r.$isLeafNode(s))for(s=s.getParent();null!=s;){let n=s.getKey();if(A(s)){if(!e.has(n)){var o=x(t);h(o,s.getChildren()),s.replace(o),p(o),e.add(n)}break}if(o=s.getParent(),r.$isRootNode(o)&&!e.has(n)){e.add(n),f(s,t);break}s=o}}}}))},t.outdentList=function(){y("outdent")},t.removeList=function(e){e.update((()=>{let e=r.$getSelection();if(r.$isRangeSelection(e)){var t=new Set,n=e.getNodes(),s=e.anchor.getNode();if(d(s,n))t.add(a(s));else for(s=0;s<n.length;s++){var o=n[s];r.$isLeafNode(o)&&(null!=(o=i.$getNearestNodeOfType(o,v))&&t.add(a(o)))}for(let i of t){t=i,n=l(i);for(let i of n)h(n=r.$createParagraphNode(),i.getChildren()),t.insertAfter(n),t=n,i.__key===e.anchor.key&&e.anchor.set(n.getKey(),0,"element"),i.__key===e.focus.key&&e.focus.set(n.getKey(),0,"element"),i.remove();i.remove()}}}))}},3441:(e,t,n)=>{"use strict";const r=n(6362);e.exports=r},6362:(e,t,n)=>{"use strict";var r=n(5523),i=n(4140);class s extends r.ElementNode{static getType(){return"mark"}static clone(e){return new s(Array.from(e.__ids),e.__key)}static importDOM(){return null}static importJSON(e){let t=o(e.ids);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),ids:this.getIDs(),type:"mark",version:1}}constructor(e,t){super(t),this.__ids=e||[]}createDOM(e){let t=document.createElement("mark");return i.addClassNamesToElement(t,e.theme.mark),1<this.__ids.length&&i.addClassNamesToElement(t,e.theme.markOverlap),t}updateDOM(e,t,n){e=e.__ids.length;let r=this.__ids.length;return n=n.theme.markOverlap,e!==r&&(1===e?2===r&&i.addClassNamesToElement(t,n):1===r&&i.removeClassNamesFromElement(t,n)),!1}hasID(e){let t=this.getIDs();for(let n=0;n<t.length;n++)if(e===t[n])return!0;return!1}getIDs(){let e=this.getLatest();return a(e)?e.__ids:[]}addID(e){var t=this.getWritable();if(a(t)){let n=t.__ids;for(t.__ids=n,t=0;t<n.length;t++)if(e===n[t])return;n.push(e)}}deleteID(e){var t=this.getWritable();if(a(t)){let n=t.__ids;for(t.__ids=n,t=0;t<n.length;t++)if(e===n[t]){n.splice(t,1);break}}}insertNewAfter(e){if(e=this.getParentOrThrow().insertNewAfter(e),r.$isElementNode(e)){let t=o(this.__ids);return e.append(t),t}return null}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!r.$isRangeSelection(t)||"html"===n)return!1;let i=t.anchor,s=t.focus;return e=i.getNode(),n=s.getNode(),t=t.isBackward()?i.offset-s.offset:s.offset-i.offset,this.isParentOf(e)&&this.isParentOf(n)&&this.getTextContent().length===t}excludeFromCopy(e){return"clone"!==e}}function o(e){return new s(e)}function a(e){return e instanceof s}t.$createMarkNode=o,t.$getMarkIDs=function(e,t){for(;null!==e;){if(a(e))return e.getIDs();if(r.$isTextNode(e)&&t===e.getTextContentSize()){let t=e.getNextSibling();if(a(t))return t.getIDs()}e=e.getParent()}return null},t.$isMarkNode=a,t.$unwrapMarkNode=function(e){let t=e.getChildren(),n=null;for(let r=0;r<t.length;r++){let i=t[r];null===n?e.insertBefore(i):n.insertAfter(i),n=i}e.remove()},t.$wrapSelectionInMarkNode=function(e,t,n){let i=e.getNodes();var s=e.anchor.offset,a=e.focus.offset;e=i.length;let l,c,u=t?a:s;for(t=t?s:a,s=0;s<e;s++){var d=i[s];if(r.$isElementNode(c)&&c.isParentOf(d))continue;a=0===s;let f=s===e-1;var h=null;if(r.$isTextNode(d)){h=d.getTextContentSize();let e=a?u:0,n=f?t:h;if(0===e&&0===n)continue;h=1<(d=d.splitText(e,n)).length&&(3===d.length||a&&!f||n===h)?d[1]:d[0]}else r.$isElementNode(d)&&d.isInline()&&(h=d);null!==h?h&&h.is(l)||(null!=(a=h.getParent())&&a.is(l)||(c=void 0),l=a,void 0===c&&(c=o([n]),h.insertBefore(c)),c.append(h)):c=l=void 0}},t.MarkNode=s},5862:(e,t,n)=>{"use strict";const r=n(5310);e.exports=r},5310:(e,t,n)=>{"use strict";var r=n(5523),i=n(9070),s=n(6868),o=n(9473),a=n(4140),l=n(1577);function c(e,t){let n={};for(let r of e)n[e=t(r)]?n[e].push(r):n[e]=[r];return n}function u(e){return{element:(e=c(e,(e=>e.type))).element||[],textFormat:e["text-format"]||[],textMatch:e["text-match"]||[]}}let d=/[!-/:-@[-`{-~\s]/;function h(e,t,n,i){for(let r of t)if(null!=(t=r.export(e,(e=>f(e,n,i)))))return t;return r.$isElementNode(e)?f(e,n,i):null}function f(e,t,n){let i=[];e=e.getChildren();e:for(let s of e){for(let r of n)if(null!=(e=r.export(s,(e=>f(e,t,n)),((e,n)=>p(e,n,t))))){i.push(e);continue e}r.$isLineBreakNode(s)?i.push("\n"):r.$isTextNode(s)?i.push(p(s,s.getTextContent(),t)):r.$isElementNode(s)&&i.push(f(s,t,n))}return i.join("")}function p(e,t,n){let r=t.trim(),i=r,s=new Set;for(let a of n){n=a.format[0];let t=a.tag;if(m(e,n)&&!s.has(n)){s.add(n);var o=g(e,!0);m(o,n)||(i=t+i),m(o=g(e,!1),n)||(i+=t)}}return t.replace(r,i)}function g(e,t){let n=t?e.getPreviousSibling():e.getNextSibling();for(n||(e=e.getParentOrThrow()).isInline()&&(n=t?e.getPreviousSibling():e.getNextSibling());n;){if(r.$isElementNode(n)){if(!n.isInline())break;if(e=t?n.getLastDescendant():n.getFirstDescendant(),r.$isTextNode(e))return e;n=t?n.getPreviousSibling():n.getNextSibling()}if(r.$isTextNode(n))return n;if(!r.$isElementNode(n))break}return null}function m(e,t){return r.$isTextNode(e)&&e.hasFormat(t)}let y=/^\s{0,3}$/,v=/^```(\w{1,10})?\s?$/;function _(e){let t=u(e),n=function(e){let t={},n={},r=[];for(let i of e){({tag:e}=i),t[e]=i;let s=e.replace(/(\*|\^)/g,"\\$1");r.push(s),n[e]=new RegExp("(".concat(s,")(?![").concat(s,"\\s])(.*?[^").concat(s,"\\s])").concat(s,"(?!").concat(s,")"))}return{fullMatchRegExpByTag:n,openTagsRegExp:new RegExp("("+r.join("|")+")","g"),transformersByTag:t}}(t.textFormat);return e=>{var l=e.split("\n"),c=l.length;(e=r.$getRoot()).clear();for(let y=0;y<c;y++){var u=l[y];e:{var d=l,h=y,f=e,p=d[h].match(v);if(p)for(var g=h,m=d.length;++g<m;)if(d[g].match(v)){p=i.$createCodeNode(p[1]),d=r.$createTextNode(d.slice(h+1,g).join("\n")),p.append(d),f.append(p),f=[p,g];break e}f=[null,h]}let[c,b]=f;if(null!=c)y=b;else{f=u,m=e;var _=t.element;g=n,d=t.textMatch,h=f.trim(),p=r.$createTextNode(h),(u=r.$createParagraphNode()).append(p),m.append(u);for(let{regExp:e,replace:t}of _)if(m=f.match(e)){p.setTextContent(f.slice(m[0].length)),t(u,[p],m,!0);break}w(p,g,d),u.isAttached()&&0<h.length&&(f=u.getPreviousSibling(),r.$isParagraphNode(f)||o.$isQuoteNode(f)||s.$isListNode(f))&&(g=f,s.$isListNode(f)&&(g=null==(f=f.getLastDescendant())?null:a.$findMatchingParent(f,s.$isListItemNode)),null!=g&&0<g.getTextContentSize()&&(g.splice(g.getChildrenSize(),0,[r.$createLineBreakNode(),...u.getChildren()]),u.remove()))}}l=e.getChildren();for(let t of l)l=t,r.$isParagraphNode(l)?(c=l.getFirstChild(),l=null==c||1===l.getChildrenSize()&&r.$isTextNode(c)&&y.test(c.getTextContent())):l=!1,l&&t.remove();e.selectEnd()}}function w(e,t,n){let r=e.getTextContent(),i=function(e,t){var n=e.match(t.openTagsRegExp);if(null==n)return null;for(let s of n){var r=s.replace(/^\s/,"");if(null!=(n=t.fullMatchRegExpByTag[r])&&(n=e.match(n),r=t.transformersByTag[r],null!=n&&null!=r)){if(!1!==r.intraword)return n;var{index:i=0}=n;if(r=e[i-1],i=e[i+n[0].length],!(r&&!d.test(r)||i&&!d.test(i)))return n}}return null}(r,t);if(i){if(i[0]===r)var s=e;else{var o=i.index||0,a=o+i[0].length;0===o?[s,l]=e.splitText(a):[c,s,l]=e.splitText(o,a)}if(s.setTextContent(i[2]),o=t.transformersByTag[i[1]])for(let e of o.format)s.hasFormat(e)||s.toggleFormat(e);s.hasFormat("code")||w(s,t,n),c&&w(c,t,n),l&&w(l,t,n)}else e:for(t=e;t;){for(o of n)if(s=t.getTextContent().match(o.importRegExp)){var l=s.index||0,c=l+s[0].length;0===l?[a,t]=t.splitText(c):[,a,t]=t.splitText(l,c),o.replace(a,s);continue e}break}}function b(e,t,n){let r=n.length;for(;t>=r;t--){let i=t-r;if(T(e,i,n,0,r)&&" "!==e[i+r])return i}return-1}function T(e,t,n,r,i){for(let s=0;s<i;s++)if(e[t+s]!==n[r+s])return!1;return!0}let E=e=>(t,n,r)=>{(r=e(r)).append(...n),t.replace(r),r.select(0,0)},S=e=>(t,n,r)=>{var i=t.getPreviousSibling();const o=s.$createListItemNode("check"===e?"x"===r[3]:void 0);s.$isListNode(i)&&i.getListType()===e?(i.append(o),t.remove()):((i=s.$createListNode(e,"number"===e?Number(r[2]):void 0)).append(o),t.replace(i)),o.append(...n),o.select(0,0),(t=Math.floor(r[1].length/4))&&o.setIndent(t)},I=(e,t,n)=>{const r=[];var i=e.getChildren();let o=0;for(const l of i)if(s.$isListItemNode(l)){if(1===l.getChildrenSize()&&(i=l.getFirstChild(),s.$isListNode(i))){r.push(I(i,t,n+1));continue}i=" ".repeat(4*n);var a=e.getListType();a="number"===a?"".concat(e.getStart()+o,". "):"check"===a?"- [".concat(l.getChecked()?"x":" ","] "):"- ",r.push(i+a+t(l)),o++}return r.join("\n")},N={dependencies:[o.HeadingNode],export:(e,t)=>{if(!o.$isHeadingNode(e))return null;const n=Number(e.getTag().slice(1));return"#".repeat(n)+" "+t(e)},regExp:/^(#{1,6})\s/,replace:E((e=>o.$createHeadingNode("h"+e[1].length))),type:"element"},C={dependencies:[o.QuoteNode],export:(e,t)=>{if(!o.$isQuoteNode(e))return null;e=t(e).split("\n"),t=[];for(const n of e)t.push("> "+n);return t.join("\n")},regExp:/^>\s/,replace:(e,t,n,i)=>{if(i&&(n=e.getPreviousSibling(),o.$isQuoteNode(n)))return n.splice(n.getChildrenSize(),0,[r.$createLineBreakNode(),...t]),n.select(0,0),void e.remove();(n=o.$createQuoteNode()).append(...t),e.replace(n),n.select(0,0)},type:"element"},k={dependencies:[i.CodeNode],export:e=>{if(!i.$isCodeNode(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?"\n"+t:"")+"\n```"},regExp:/^```(\w{1,10})?\s/,replace:E((e=>i.$createCodeNode(e?e[1]:void 0))),type:"element"},x={dependencies:[s.ListNode,s.ListItemNode],export:(e,t)=>s.$isListNode(e)?I(e,t,0):null,regExp:/^(\s*)[-*+]\s/,replace:S("bullet"),type:"element"},A={dependencies:[s.ListNode,s.ListItemNode],export:(e,t)=>s.$isListNode(e)?I(e,t,0):null,regExp:/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,replace:S("check"),type:"element"},O={dependencies:[s.ListNode,s.ListItemNode],export:(e,t)=>s.$isListNode(e)?I(e,t,0):null,regExp:/^(\s*)(\d{1,})\.\s/,replace:S("number"),type:"element"},R={format:["code"],tag:"`",type:"text-format"},D={format:["bold","italic"],tag:"***",type:"text-format"},P={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},L={format:["bold"],tag:"**",type:"text-format"},M={format:["bold"],intraword:!1,tag:"__",type:"text-format"},F={format:["strikethrough"],tag:"~~",type:"text-format"},U={format:["italic"],tag:"*",type:"text-format"},B={format:["italic"],intraword:!1,tag:"_",type:"text-format"},V={dependencies:[l.LinkNode],export:(e,t,n)=>{if(!l.$isLinkNode(e))return null;t="[".concat(e.getTextContent(),"](").concat(e.getURL(),")");const i=e.getFirstChild();return 1===e.getChildrenSize()&&r.$isTextNode(i)?n(i,t):t},importRegExp:/(?:\[([^[]+)\])(?:\(([^(]+)\))/,regExp:/(?:\[([^[]+)\])(?:\(([^(]+)\))$/,replace:(e,t)=>{const[,n,i]=t;t=l.$createLinkNode(i);const s=r.$createTextNode(n);s.setFormat(e.getFormat()),t.append(s),e.replace(t)},trigger:")",type:"text-match"},j=[N,C,k,x,O],z=[R,D,P,L,M,U,B,F],$=[V],K=[...j,...z,...$];t.$convertFromMarkdownString=function(e){return _(arguments.length>1&&void 0!==arguments[1]?arguments[1]:K)(e)},t.$convertToMarkdownString=function(){return function(e){let t=u(e),n=t.textFormat.filter((e=>1===e.format.length));return()=>{let e=[];var i=r.$getRoot().getChildren();for(let r of i)null!=(i=h(r,t.element,n,t.textMatch))&&e.push(i);return e.join("\n\n")}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:K)()},t.BOLD_ITALIC_STAR=D,t.BOLD_ITALIC_UNDERSCORE=P,t.BOLD_STAR=L,t.BOLD_UNDERSCORE=M,t.CHECK_LIST=A,t.CODE=k,t.ELEMENT_TRANSFORMERS=j,t.HEADING=N,t.INLINE_CODE=R,t.ITALIC_STAR=U,t.ITALIC_UNDERSCORE=B,t.LINK=V,t.ORDERED_LIST=O,t.QUOTE=C,t.STRIKETHROUGH=F,t.TEXT_FORMAT_TRANSFORMERS=z,t.TEXT_MATCH_TRANSFORMERS=$,t.TRANSFORMERS=K,t.UNORDERED_LIST=x,t.registerMarkdownShortcuts=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K,n=u(t),s=c(n.textFormat,(e=>{let{tag:t}=e;return t[t.length-1]})),o=c(n.textMatch,(e=>{let{trigger:t}=e;return t}));for(let r of t)if(t=r.type,("element"===t||"text-match"===t)&&!e.hasNodes(r.dependencies))throw Error("Minified Lexical error #79; visit https://lexical.dev/docs/error?code=79 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");return e.registerUpdateListener((t=>{let{tags:a,dirtyLeaves:l,editorState:c,prevEditorState:u}=t;if(!a.has("historic")){var h=c.read(r.$getSelection);if(a=u.read(r.$getSelection),r.$isRangeSelection(a)&&r.$isRangeSelection(h)&&h.isCollapsed()){u=h.anchor.key;var f=h.anchor.offset,p=c._nodeMap.get(u);r.$isTextNode(p)&&l.has(u)&&(1===f||f===a.anchor.offset+1)&&e.update((()=>{if(!p.hasFormat("code")){var e=p.getParent();if(null!==e&&!i.$isCodeNode(e)){var t=h.anchor.offset;e:{var a=n.element,l=e.getParent();if(r.$isRootNode(l)&&e.getFirstChild()===p&&" "===(l=p.getTextContent())[t-1])for(let{regExp:n,replace:r}of a)if((a=l.match(n))&&a[0].length===t){l=p.getNextSiblings();let[n,i]=p.splitText(t);n.remove(),r(e,l=i?[i,...l]:l,a,!1),e=!0;break e}e=!1}if(!e){e:{if(a=p.getTextContent(),null!=(e=o[a[t-1]]))for(u of(t<a.length&&(a=a.slice(0,t)),e))if(null!==(e=a.match(u.regExp))){l=(a=e.index||0)+e[0].length;var c=void 0;0===a?[c]=p.splitText(l):[,c]=p.splitText(a,l),c.selectNext(0,0),u.replace(c,e);var u=!0;break e}u=!1}if(!u)e:{var f=(l=p.getTextContent())[--t];if(u=s[f])for(let n of u){var{tag:g}=n;let i=t-(u=g.length)+1;if(!(1<u&&!T(l,i,g,0,u)||" "===l[i-1])&&(c=l[t+1],!1!==n.intraword||!c||d.test(c))){e=c=p,a=b(l,i,g);for(var m=e;0>a&&(m=m.getPreviousSibling())&&!r.$isLineBreakNode(m);)r.$isTextNode(m)&&(a=m.getTextContent(),e=m,a=b(a,a.length,g));if(!(0>a||e===c&&a+u===i||(g=e.getTextContent(),0<a&&g[a-1]===f||(m=g[a-1],!1===n.intraword&&m&&!d.test(m))))){l=(l=c.getTextContent()).slice(0,i)+l.slice(t+1),c.setTextContent(l),l=e===c?l:g,e.setTextContent(l.slice(0,a)+l.slice(a+u)),l=r.$getSelection(),f=r.$createRangeSelection(),r.$setSelection(f),t=t-u*(e===c?2:1)+1,f.anchor.set(e.__key,a,"text"),f.focus.set(c.__key,t,"text");for(let e of n.format)f.hasFormat(e)||f.formatText(e);f.anchor.set(f.focus.key,f.focus.offset,f.focus.type);for(let e of n.format)f.hasFormat(e)&&f.toggleFormat(e);r.$isRangeSelection(l)&&(f.format=l.format);break e}}}}}}}}))}}}))}},7022:(e,t,n)=>{"use strict";const r=n(6164);e.exports=r},6164:(e,t,n)=>{"use strict";var r=n(1665),i=n(2791);t.AutoFocusPlugin=function(e){let{defaultSelection:t}=e,[n]=r.useLexicalComposerContext();return i.useEffect((()=>{n.focus((()=>{let e=document.activeElement,t=n.getRootElement();t.contains(e)&&null===t&&null!==e||t.focus({preventScroll:!0})}),{defaultSelection:t})}),[t,n]),null}},5544:(e,t,n)=>{"use strict";const r=n(5455);e.exports=r},5455:(e,t,n)=>{"use strict";var r=n(1577),i=n(1665),s=n(4140),o=n(5523),a=n(2791);function l(e,t){for(let n=0;n<t.length;n++){let r=t[n](e);if(r)return r}return null}function c(e){return e=e.getPreviousSibling(),o.$isElementNode(e)&&(e=e.getLastDescendant()),null===e||o.$isLineBreakNode(e)||o.$isTextNode(e)&&e.getTextContent().endsWith(" ")}function u(e){return e=e.getNextSibling(),o.$isElementNode(e)&&(e=e.getFirstDescendant()),null===e||o.$isLineBreakNode(e)||o.$isTextNode(e)&&e.getTextContent().startsWith(" ")}function d(e,t,n){var r=e.getChildren();let i=r.length;for(let s=0;s<i;s++){let t=r[s];if(!o.$isTextNode(t)||!t.isSimpleText())return h(e),void n(null,e.getURL())}null===(t=l(r=e.getTextContent(),t))||t.text!==r?(h(e),n(null,e.getURL())):c(e)&&u(e)?(r=e.getURL(),null!==t&&r!==t.url&&(e.setURL(t.url),n(t.url,r))):(h(e),n(null,e.getURL()))}function h(e){let t=e.getChildren();var n=t.length;for(--n;0<=n;n--)e.insertAfter(t[n]);return e.remove(),t.map((e=>e.getLatest()))}t.AutoLinkPlugin=function(e){let{matchers:t,onChange:n}=e,[f]=i.useLexicalComposerContext();return function(e,t,n){a.useEffect((()=>{if(!e.hasNodes([r.AutoLinkNode]))throw Error("Minified Lexical error #77; visit https://lexical.dev/docs/error?code=77 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");let i=(e,t)=>{n&&n(e,t)};return s.mergeRegister(e.registerNodeTransform(o.TextNode,(e=>{var s=e.getParentOrThrow();if(r.$isAutoLinkNode(s))d(s,t,i);else if(!r.$isLinkNode(s)){if(e.isSimpleText()){let i=(s=e.getTextContent()).length,d=s,h=0,y=e;for(var a;(a=l(d,t))&&null!==a;){var f=a.index,p=h+f;let t=a.length;var g=void 0;if(g=0<p?" "===s[p-1]:c(e),p=p+t<i?" "===s[p+t]:u(e),g&&p){var m=void 0;0===f?[m,y]=y.splitText(t):[,m,y]=y.splitText(f,f+t),(g=r.$createAutoLinkNode(a.url)).append(o.$createTextNode(a.text)),m.replace(g),n&&n(a.url,null)}f+=t,d=d.substring(f),h+=f}}m=e.getPreviousSibling(),a=e.getNextSibling(),e=e.getTextContent(),r.$isAutoLinkNode(m)&&!e.startsWith(" ")&&(h(m),m=m.getURL(),n&&n(null,m)),r.$isAutoLinkNode(a)&&!e.endsWith(" ")&&(h(a),e=a.getURL(),n&&n(null,e))}})),e.registerNodeTransform(r.AutoLinkNode,(e=>{d(e,t,i)})))}),[e,t,n])}(f,t,n),null}},5224:(e,t,n)=>{"use strict";const r=n(3653);e.exports=r},3653:(e,t,n)=>{"use strict";var r=n(1665),i=n(5523),s=n(2791),o="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?s.useLayoutEffect:s.useEffect;let a={tag:"history-merge"};t.LexicalComposer=function(e){let{initialConfig:t,children:n}=e,l=s.useMemo((()=>{const{theme:e,namespace:n,editor__DEPRECATED:s,nodes:o,onError:l,editorState:c}=t,u=r.createLexicalComposerContext(null,e);let d=s||null;if(null===d){const t=i.createEditor({editable:!1,namespace:n,nodes:o,onError:e=>l(e,t),theme:e});!function(e,t){if(null!==t&&void 0!==t&&null!==t)switch(typeof t){case"string":let n=e.parseEditorState(t);e.setEditorState(n,a);break;case"object":e.setEditorState(t,a);break;case"function":e.update((()=>{i.$getRoot().isEmpty()&&t(e)}),a)}}(t,c),d=t}return[d,u]}),[]);return o((()=>{let e=t.editable,[n]=l;n.setEditable(e||!0)}),[]),s.createElement(r.LexicalComposerContext.Provider,{value:l},n)}},1665:(e,t,n)=>{"use strict";const r=n(2916);e.exports=r},2916:(e,t,n)=>{"use strict";var r=n(2791);let i=r.createContext(null);t.LexicalComposerContext=i,t.createLexicalComposerContext=function(e,t){let n=null;return null!=e&&(n=e[1]),{getTheme:function(){return null!=t?t:null!=n?n.getTheme():null}}},t.useLexicalComposerContext=function(){let e=r.useContext(i);if(null==e)throw Error("Minified Lexical error #8; visit https://lexical.dev/docs/error?code=8 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");return e}},4588:(e,t,n)=>{"use strict";const r=n(7921);e.exports=r},7921:(e,t,n)=>{"use strict";var r=n(1665),i=n(2791),s="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?i.useLayoutEffect:i.useEffect;t.ContentEditable=function(e){let{ariaActiveDescendantID:t,ariaAutoComplete:n,ariaControls:o,ariaDescribedBy:a,ariaExpanded:l,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:d,ariaOwneeID:h,ariaRequired:f,autoCapitalize:p,autoComplete:g,autoCorrect:m,className:y,id:v,role:_="textbox",spellCheck:w=!0,style:b,tabIndex:T,testid:E}=e,[S]=r.useLexicalComposerContext(),[I,N]=i.useState(!0),C=i.useCallback((e=>{S.setRootElement(e)}),[S]);return s((()=>(N(S.isEditable()),S.registerEditableListener((e=>{N(e)})))),[S]),i.createElement("div",{"aria-activedescendant":I?t:null,"aria-autocomplete":I?n:null,"aria-controls":I?o:null,"aria-describedby":a,"aria-expanded":I&&"combobox"===_?!!l:null,"aria-label":c,"aria-labelledby":u,"aria-multiline":d,"aria-owns":I?h:null,"aria-required":f,autoCapitalize:void 0!==p?String(p):void 0,autoComplete:g,autoCorrect:void 0!==m?String(m):void 0,className:y,contentEditable:I,"data-testid":E,id:v,ref:C,role:I?_:void 0,spellCheck:w,style:b,tabIndex:T})}},3527:(e,t,n)=>{"use strict";const r=n(6400);e.exports=r},6400:(e,t,n)=>{"use strict";var r=n(1665),i=n(7711),s=n(2791);t.createEmptyHistoryState=i.createEmptyHistoryState,t.HistoryPlugin=function(e){let{externalHistoryState:t}=e,[n]=r.useLexicalComposerContext();return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=s.useMemo((()=>t||i.createEmptyHistoryState()),[t]);s.useEffect((()=>i.registerHistory(e,r,n)),[n,e,r])}(n,t),null}},3028:(e,t,n)=>{"use strict";const r=n(639);e.exports=r},639:(e,t,n)=>{"use strict";var r=n(1665),i=n(7827),s=n(4140),o=n(5523),a=n(2791);let l=o.createCommand();function c(e){let{nodeKey:t}=e,[n]=r.useLexicalComposerContext(),l=a.useRef(null),[c,u,d]=i.useLexicalNodeSelection(t),f=a.useCallback((e=>(c&&o.$isNodeSelection(o.$getSelection())&&(e.preventDefault(),h(e=o.$getNodeByKey(t))&&e.remove(),u(!1)),!1)),[c,t,u]);return a.useEffect((()=>s.mergeRegister(n.registerCommand(o.CLICK_COMMAND,(e=>e.target===l.current&&(e.shiftKey||d(),u(!c),!0)),o.COMMAND_PRIORITY_LOW),n.registerCommand(o.KEY_DELETE_COMMAND,f,o.COMMAND_PRIORITY_LOW),n.registerCommand(o.KEY_BACKSPACE_COMMAND,f,o.COMMAND_PRIORITY_LOW))),[d,n,c,f,u]),a.createElement("hr",{ref:l,className:c?"selected":void 0})}class u extends o.DecoratorNode{static getType(){return"horizontalrule"}static clone(e){return new u(e.__key)}static importJSON(){return d()}exportJSON(){return{type:"horizontalrule",version:1}}createDOM(){let e=document.createElement("div");return e.style.display="contents",e}getTextContent(){return"\n"}isTopLevel(){return!0}updateDOM(){return!1}decorate(){return a.createElement(c,{nodeKey:this.__key})}}function d(){return new u}function h(e){return e instanceof u}t.$createHorizontalRuleNode=d,t.$isHorizontalRuleNode=h,t.HorizontalRuleNode=u,t.INSERT_HORIZONTAL_RULE_COMMAND=l},3732:(e,t,n)=>{"use strict";const r=n(3241);e.exports=r},3241:(e,t,n)=>{"use strict";var r=n(1577),i=n(1665),s=n(5523),o=n(2791);t.LinkPlugin=function(){let[e]=i.useLexicalComposerContext();return o.useEffect((()=>{if(!e.hasNodes([r.LinkNode]))throw Error("LinkPlugin: LinkNode not registered on editor")}),[e]),o.useEffect((()=>e.registerCommand(r.TOGGLE_LINK_COMMAND,(e=>{if("string"===typeof e||null===e)r.toggleLink(e);else{let{url:t,target:n,rel:i}=e;r.toggleLink(t,{rel:i,target:n})}return!0}),s.COMMAND_PRIORITY_EDITOR)),[e]),null}},6010:(e,t,n)=>{"use strict";const r=n(1724);e.exports=r},1724:(e,t,n)=>{"use strict";var r=n(6868),i=n(1665),s=n(2791),o=n(4140),a=n(5523);t.ListPlugin=function(){let[e]=i.useLexicalComposerContext();return s.useEffect((()=>{if(!e.hasNodes([r.ListNode,r.ListItemNode]))throw Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[e]),function(e){s.useEffect((()=>o.mergeRegister(e.registerCommand(a.INDENT_CONTENT_COMMAND,(()=>(r.indentList(),!1)),a.COMMAND_PRIORITY_LOW),e.registerCommand(a.OUTDENT_CONTENT_COMMAND,(()=>(r.outdentList(),!1)),a.COMMAND_PRIORITY_LOW),e.registerCommand(r.INSERT_ORDERED_LIST_COMMAND,(()=>(r.insertList(e,"number"),!0)),a.COMMAND_PRIORITY_LOW),e.registerCommand(r.INSERT_UNORDERED_LIST_COMMAND,(()=>(r.insertList(e,"bullet"),!0)),a.COMMAND_PRIORITY_LOW),e.registerCommand(r.REMOVE_LIST_COMMAND,(()=>(r.removeList(e),!0)),a.COMMAND_PRIORITY_LOW),e.registerCommand(a.INSERT_PARAGRAPH_COMMAND,(()=>!!r.$handleListInsertParagraph()),a.COMMAND_PRIORITY_LOW))),[e])}(e),null}},8309:(e,t,n)=>{"use strict";const r=n(5330);e.exports=r},5330:(e,t,n)=>{"use strict";var r=n(5862),i=n(1665),s=n(3028),o=n(2791);let a=[{dependencies:[s.HorizontalRuleNode],export:e=>s.$isHorizontalRuleNode(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,n,r)=>{t=s.$createHorizontalRuleNode(),r||null!=e.getNextSibling()?e.replace(t):e.insertBefore(t),t.selectNext()},type:"element"},...r.TRANSFORMERS];t.DEFAULT_TRANSFORMERS=a,t.MarkdownShortcutPlugin=function(e){let{transformers:t=a}=e,[n]=i.useLexicalComposerContext();return o.useEffect((()=>r.registerMarkdownShortcuts(n,t)),[n,t]),null}},5528:(e,t,n)=>{"use strict";const r=n(6793);e.exports=r},6793:(e,t,n)=>{"use strict";var r=n(1665),i=n(2791),s=n(4249),o=n(4140),a=n(4164),l=n(6700),c=n(9473),u="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?i.useLayoutEffect:i.useEffect;function d(e){return e.getEditorState().read(s.$canShowPlaceholderCurry(e.isComposing(),e.isEditable()))}t.RichTextPlugin=function(e){let{contentEditable:t,placeholder:n,initialEditorState:s}=e,[h]=r.useLexicalComposerContext(),f=function(e){let[t,n]=i.useState((()=>d(e)));return u((()=>{function t(){let t=d(e);n(t)}return t(),o.mergeRegister(e.registerUpdateListener((()=>{t()})),e.registerEditableListener((()=>{t()})))}),[e]),t}(h),p=function(e){let[t,n]=i.useState((()=>e.getDecorators()));return u((()=>e.registerDecoratorListener((e=>{a.flushSync((()=>{n(e)}))}))),[e]),i.useEffect((()=>{n(e.getDecorators())}),[e]),i.useMemo((()=>{let n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){var i=r[s];let o=t[i];null!==(i=e.getElementByKey(i))&&n.push(a.createPortal(o,i))}return n}),[t,e])}(h);return function(e,t){u((()=>o.mergeRegister(c.registerRichText(e,t),l.registerDragonSupport(e))),[e])}(h,s),i.createElement(i.Fragment,null,t,f&&n,p)}},4195:(e,t,n)=>{"use strict";const r=n(7137);e.exports=r},7137:(e,t,n)=>{"use strict";var r=n(1577),i=n(3441),s=n(5523),o=n(2791);let a=Object.freeze({"\t":"\\t","\n":"\\n"}),l=new RegExp(Object.keys(a).join("|"),"g"),c=Object.freeze({ancestorHasNextSibling:"|",ancestorIsLastChild:" ",hasNextSibling:"\u251c",isLastChild:"\u2514",selectedChar:"^",selectedLine:">"});function u(e){let t=" root\n";return e=e.read((()=>{const e=s.$getSelection();return d(s.$getRoot(),((n,o)=>{const a="(".concat(n.getKey(),")"),u=n.getType()||"",d=n.isSelected(),f=i.$isMarkNode(n)?" id: [ ".concat(n.getIDs().join(", ")," ] "):"";var p=t,g=d?c.selectedLine:" ",_=o.join(" ");if(s.$isTextNode(n)){var w=n.getTextContent(!0),b=0===w.length?"(empty)":'"'.concat(h(w),'"');w=[b,0!==(w=[v(n),m(n),y(n)].filter(Boolean).join(", ")).length?"{ ".concat(w," }"):null].filter(Boolean).join(" ").trim()}else if(r.$isLinkNode(n)){w=0===(w=n.getURL()).length?"(empty)":'"'.concat(h(w),'"'),null!=(b=n.getTarget())&&(b="target: "+b);var T=Boolean;let e=n.getRel();null!=e&&(e="rel: "+e),w=[w,0!==(b=[b,e].filter(T).join(", ")).length?"{ ".concat(b," }"):null].filter(Boolean).join(" ").trim()}else w="";t=p+"".concat(g," ").concat(_," ").concat(a," ").concat(u," ").concat(f," ").concat(w,"\n"),t+=function(e){let{indent:t,isSelected:n,node:r,nodeKeyDisplay:i,selection:o,typeDisplay:a}=e;if(!s.$isTextNode(r)||!s.$isRangeSelection(o)||!n||s.$isElementNode(r))return"";n=o.anchor;var u=o.focus;if(""===r.getTextContent()||n.getNode()===o.focus.getNode()&&n.offset===u.offset)return"";u=o.anchor;let d=o.focus,h=r.getTextContent(!0),f=h.length;if(n=o=-1,"text"===u.type&&"text"===d.type){let e=u.getNode(),t=d.getNode();e===t&&r===e&&u.offset!==d.offset?[o,n]=u.offset<d.offset?[u.offset,d.offset]:[d.offset,u.offset]:[o,n]=r===e?e.isBefore(t)?[u.offset,f]:[0,u.offset]:r===t?t.isBefore(e)?[d.offset,f]:[0,d.offset]:[0,f]}r=(h.slice(0,o).match(l)||[]).length,u=(h.slice(o,n).match(l)||[]).length;let[p,g]=[o+r,n+r+u];return p===g?"":(r=t[t.length-1]===c.hasNextSibling?c.ancestorHasNextSibling:c.ancestorIsLastChild,t=[...t.slice(0,t.length-1),r],r=Array(p+1).fill(" "),o=Array(g-p).fill(c.selectedChar),i=Array(i.length+(a.length+3)).fill(" "),[c.selectedLine,t.join(" "),[...i,...r,...o].join("")].join(" ")+"\n")}({indent:o,isSelected:d,node:n,nodeKeyDisplay:a,selection:e,typeDisplay:u})})),null===e?": null":s.$isRangeSelection(e)?function(e){let t="",n=v(e),r=e.anchor;e=e.focus;let i=r.offset,s=e.offset;return t=t+": range ".concat(""!==n?"{ ".concat(n," }"):"")+"\n  \u251c anchor { key: ".concat(r.key,", offset: ").concat(null===i?"null":i,", type: ").concat(r.type," }"),t+"\n  \u2514 focus { key: ".concat(e.key,", offset: ").concat(null===s?"null":s,", type: ").concat(e.type," }")}(e):s.$isGridSelection(e)?": grid\n  \u2514 { grid: ".concat(e.gridKey,", anchorCell: ").concat(e.anchor.key,", focusCell: ").concat(e.focus.key," }"):": node\n  \u2514 [".concat(Array.from(e._nodes).join(", "),"]")})),t+"\n selection"+e}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=(e=e.getChildren()).length;e.forEach(((e,i)=>{t(e,n.concat(i===r-1?c.isLastChild:c.hasNextSibling)),s.$isElementNode(e)&&d(e,t,n.concat(i===r-1?c.ancestorIsLastChild:c.ancestorHasNextSibling))}))}function h(e){return Object.entries(a).reduce(((e,t)=>{let[n,r]=t;return e.replace(new RegExp(n,"g"),String(r))}),e)}let f=[e=>e.hasFormat("bold")&&"Bold",e=>e.hasFormat("code")&&"Code",e=>e.hasFormat("italic")&&"Italic",e=>e.hasFormat("strikethrough")&&"Strikethrough",e=>e.hasFormat("subscript")&&"Subscript",e=>e.hasFormat("superscript")&&"Superscript",e=>e.hasFormat("underline")&&"Underline"],p=[e=>e.isDirectionless()&&"Directionless",e=>e.isUnmergeable()&&"Unmergeable"],g=[e=>e.isToken()&&"Token",e=>e.isSegmented()&&"Segmented",e=>e.isInert()&&"Inert"];function m(e){let t=p.map((t=>t(e))).filter(Boolean).join(", ").toLocaleLowerCase();return""!==t&&(t="detail: "+t),t}function y(e){let t=g.map((t=>t(e))).filter(Boolean).join(", ").toLocaleLowerCase();return""!==t&&(t="mode: "+t),t}function v(e){let t=f.map((t=>t(e))).filter(Boolean).join(", ").toLocaleLowerCase();return""!==t&&(t="format: "+t),t}t.TreeView=function(e){let{timeTravelButtonClassName:t,timeTravelPanelSliderClassName:n,timeTravelPanelButtonClassName:r,viewClassName:i,timeTravelPanelClassName:s,editor:a}=e,[l,c]=o.useState([]),[d,h]=o.useState(""),[f,p]=o.useState(!1),g=o.useRef(0),m=o.useRef(null),y=o.useRef(null),[v,_]=o.useState(!1);o.useEffect((()=>(h(u(a.getEditorState())),a.registerUpdateListener((e=>{let{editorState:t}=e,n=a._compositionKey,r=u(a.getEditorState());h([r,null!==n&&"Composition key: ".concat(n)].filter(Boolean).join("\n\n")),f||c((e=>[...e,[Date.now(),t]]))})))),[f,a]);let w=l.length;return o.useEffect((()=>{if(v){let e,t=()=>{const n=g.current;n===w-1?_(!1):e=setTimeout((()=>{g.current++;const e=g.current,n=y.current;null!==n&&(n.value=String(e)),a.setEditorState(l[e][1]),t()}),l[n+1][0]-l[n][0])};return t(),()=>{clearTimeout(e)}}}),[l,v,a,w]),o.useEffect((()=>{let e=m.current;if(null!==e)return e.__lexicalEditor=a,()=>{e.__lexicalEditor=null}}),[a]),o.createElement("div",{className:i},!f&&2<w&&o.createElement("button",{onClick:()=>{let e=a.getRootElement();null!==e&&(e.contentEditable="false",g.current=w-1,p(!0))},className:t,type:"button"},"Time Travel"),o.createElement("pre",{ref:m},d),f&&o.createElement("div",{className:s},o.createElement("button",{className:r,onClick:()=>{_(!v)},type:"button"},v?"Pause":"Play"),o.createElement("input",{className:n,ref:y,onChange:e=>{e=Number(e.target.value);let t=l[e];t&&(g.current=e,a.setEditorState(t[1]))},type:"range",min:"1",max:w-1}),o.createElement("button",{className:r,onClick:()=>{var e=a.getRootElement();if(null!==e){e.contentEditable="true",e=l.length-1,a.setEditorState(l[e][1]);let t=y.current;null!==t&&(t.value=String(e)),p(!1),_(!1)}},type:"button"},"Exit")))}},7827:(e,t,n)=>{"use strict";const r=n(5832);e.exports=r},5832:(e,t,n)=>{"use strict";var r=n(1665),i=n(5523),s=n(2791);function o(e,t){return e.getEditorState().read((()=>{let e=i.$getNodeByKey(t);return null!==e&&e.isSelected()}))}t.useLexicalNodeSelection=function(e){let[t]=r.useLexicalComposerContext(),[n,a]=s.useState((()=>o(t,e)));return s.useEffect((()=>t.registerUpdateListener((()=>{a(o(t,e))}))),[t,e]),[n,s.useCallback((n=>{t.update((()=>{let t=i.$getSelection();i.$isNodeSelection(t)||(t=i.$createNodeSelection(),i.$setSelection(t)),n?t.add(e):t.delete(e)}))}),[t,e]),s.useCallback((()=>{t.update((()=>{const e=i.$getSelection();i.$isNodeSelection(e)&&e.clear()}))}),[t])]}},9473:(e,t,n)=>{"use strict";const r=n(7421);e.exports=r},7421:(e,t,n)=>{"use strict";var r=n(2357),i=n(9689),s=n(4140),o=n(5523);let a="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,l=a&&"documentMode"in document?document.documentMode:null;a&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),a&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);let c=!(!a||!("InputEvent"in window)||l)&&"getTargetRanges"in new window.InputEvent("input"),u=a&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),d=a&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,h={tag:"history-merge"};class f extends o.ElementNode{static getType(){return"quote"}static clone(e){return new f(e.__key)}constructor(e){super(e)}createDOM(e){let t=document.createElement("blockquote");return s.addClassNamesToElement(t,e.theme.quote),t}updateDOM(){return!1}static importDOM(){return{blockquote:()=>({conversion:v,priority:0})}}static importJSON(e){let t=p();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(){let e=o.$createParagraphNode(),t=this.getDirection();return e.setDirection(t),this.insertAfter(e),e}collapseAtStart(){let e=o.$createParagraphNode();return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}}function p(){return new f}class g extends o.ElementNode{static getType(){return"heading"}static clone(e){return new g(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}createDOM(e){let t=this.__tag,n=document.createElement(t);return void 0!==(e=e.theme.heading)&&s.addClassNamesToElement(n,e[t]),n}updateDOM(){return!1}static importDOM(){return{h1:()=>({conversion:y,priority:0}),h2:()=>({conversion:y,priority:0}),h3:()=>({conversion:y,priority:0}),h4:()=>({conversion:y,priority:0}),h5:()=>({conversion:y,priority:0}),h6:()=>({conversion:y,priority:0}),p:e=>null!==(e=e.firstChild)&&m(e)?{conversion:()=>({node:null}),priority:3}:null,span:e=>m(e)?{conversion:()=>({node:_("h1")}),priority:3}:null}}static importJSON(e){let t=_(e.tag);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(){let e=o.$createParagraphNode(),t=this.getDirection();return e.setDirection(t),this.insertAfter(e),e}collapseAtStart(){let e=o.$createParagraphNode();return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}extractWithChild(){return!0}}function m(e){return"span"===e.nodeName.toLowerCase()&&"26pt"===e.style.fontSize}function y(e){let t=null;return"h1"!==(e=e.nodeName.toLowerCase())&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e||(t=_(e)),{node:t}}function v(){return{node:p()}}function _(e){return new g(e)}function w(e,t){var n=o.$getSelection();if(null!==n){e.preventDefault(),e=e instanceof KeyboardEvent?null:e.clipboardData;let i=r.$getHtmlContent(t);t=r.$getLexicalContent(t),null!=e?(null!==i&&e.setData("text/html",i),null!==t&&e.setData("application/x-lexical-editor",t),n=n.getTextContent(),e.setData("text/plain",n)):null!=(n=navigator.clipboard)&&(e=[new ClipboardItem({"text/html":new Blob([i],{type:"text/html"})})],n.write(e))}}function b(e,t){var n=o.$getSelection();if(o.$isRangeSelection(n)){var r=new Set;n=n.getNodes();for(let o=0;o<n.length;o++){let a=n[o];var i=a.getKey();r.has(i)||(r.add(i),(i=s.$getNearestBlockElementAncestorOrThrow(a)).canInsertTab()?e(a):i.canIndent()&&t(i))}}}function T(e){return e=o.$getNearestNodeFromDOMNode(e),o.$isDecoratorNode(e)}t.$createHeadingNode=_,t.$createQuoteNode=p,t.$isHeadingNode=function(e){return e instanceof g},t.$isQuoteNode=function(e){return e instanceof f},t.HeadingNode=g,t.QuoteNode=f,t.registerRichText=function(e,t){let n=s.mergeRegister(e.registerCommand(o.CLICK_COMMAND,(()=>{const e=o.$getSelection();return!!o.$isNodeSelection(e)&&(e.clear(),!0)}),0),e.registerCommand(o.DELETE_CHARACTER_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(t.deleteCharacter(e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.DELETE_WORD_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(t.deleteWord(e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.DELETE_LINE_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(t.deleteLine(e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.CONTROLLED_TEXT_INSERTION_COMMAND,(t=>{const n=o.$getSelection();if("string"===typeof t)o.$isRangeSelection(n)?n.insertText(t):o.$isGridSelection(n);else{if(!o.$isRangeSelection(n)&&!o.$isGridSelection(n))return!1;const i=t.dataTransfer;null!=i?r.$insertDataTransferForRichText(i,n,e):o.$isRangeSelection(n)&&(t=t.data)&&n.insertText(t)}return!0}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.REMOVE_TEXT_COMMAND,(()=>{const e=o.$getSelection();return!!o.$isRangeSelection(e)&&(e.removeText(),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.FORMAT_TEXT_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(t.formatText(e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.FORMAT_ELEMENT_COMMAND,(e=>{var t=o.$getSelection();if(!o.$isRangeSelection(t)&&!o.$isNodeSelection(t))return!1;t=t.getNodes();for(const n of t)s.$getNearestBlockElementAncestorOrThrow(n).setFormat(e);return!0}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.INSERT_LINE_BREAK_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(t.insertLineBreak(e),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.INSERT_PARAGRAPH_COMMAND,(()=>{const e=o.$getSelection();return!!o.$isRangeSelection(e)&&(e.insertParagraph(),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.INDENT_CONTENT_COMMAND,(()=>(b((()=>{e.dispatchCommand(o.CONTROLLED_TEXT_INSERTION_COMMAND,"\t")}),(e=>{const t=e.getIndent();10!==t&&e.setIndent(t+1)})),!0)),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.OUTDENT_CONTENT_COMMAND,(()=>(b((t=>{o.$isTextNode(t)&&("\t"===(t=t.getTextContent())[t.length-1]&&e.dispatchCommand(o.DELETE_CHARACTER_COMMAND,!0))}),(e=>{const t=e.getIndent();0!==t&&e.setIndent(t-1)})),!0)),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_ARROW_UP_COMMAND,(e=>{const t=o.$getSelection();return!!(o.$isNodeSelection(t)&&!T(e.target)&&(e=t.getNodes(),0<e.length))&&(e[0].selectPrevious(),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_ARROW_DOWN_COMMAND,(e=>{const t=o.$getSelection();return!!(o.$isNodeSelection(t)&&!T(e.target)&&(e=t.getNodes(),0<e.length))&&(e[0].selectNext(0,0),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_ARROW_LEFT_COMMAND,(e=>{const t=o.$getSelection();if(o.$isNodeSelection(t)&&!T(e.target)){var n=t.getNodes();if(0<n.length)return e.preventDefault(),n[0].selectPrevious(),!0}return!!o.$isRangeSelection(t)&&(!!i.$shouldOverrideDefaultCharacterSelection(t,!0)&&(n=e.shiftKey,e.preventDefault(),i.$moveCharacter(t,n,!0),!0))}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_ARROW_RIGHT_COMMAND,(e=>{const t=o.$getSelection();if(o.$isNodeSelection(t)&&!T(e.target)){var n=t.getNodes();if(0<n.length)return e.preventDefault(),n[0].selectNext(0,0),!0}return!!o.$isRangeSelection(t)&&(n=e.shiftKey,!!i.$shouldOverrideDefaultCharacterSelection(t,!1)&&(e.preventDefault(),i.$moveCharacter(t,n,!1),!0))}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_BACKSPACE_COMMAND,(t=>{if(T(t.target))return!1;const n=o.$getSelection();if(!o.$isRangeSelection(n))return!1;t.preventDefault(),({anchor:t}=n);const r=t.getNode();return n.isCollapsed()&&0===t.offset&&!o.$isRootNode(r)&&0<s.$getNearestBlockElementAncestorOrThrow(r).getIndent()?e.dispatchCommand(o.OUTDENT_CONTENT_COMMAND,void 0):e.dispatchCommand(o.DELETE_CHARACTER_COMMAND,!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_DELETE_COMMAND,(t=>{if(T(t.target))return!1;const n=o.$getSelection();return!!o.$isRangeSelection(n)&&(t.preventDefault(),e.dispatchCommand(o.DELETE_CHARACTER_COMMAND,!1))}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_ENTER_COMMAND,(t=>{const n=o.$getSelection();if(!o.$isRangeSelection(n))return!1;if(null!==t){if((d||u)&&c)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(o.INSERT_LINE_BREAK_COMMAND,!1)}return e.dispatchCommand(o.INSERT_PARAGRAPH_COMMAND,void 0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_TAB_COMMAND,(t=>{const n=o.$getSelection();return!!o.$isRangeSelection(n)&&(t.preventDefault(),e.dispatchCommand(t.shiftKey?o.OUTDENT_CONTENT_COMMAND:o.INDENT_CONTENT_COMMAND,void 0))}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.KEY_ESCAPE_COMMAND,(()=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(e.blur(),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.DROP_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(e.preventDefault(),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.DRAGSTART_COMMAND,(e=>{const t=o.$getSelection();return!!o.$isRangeSelection(t)&&(e.preventDefault(),!0)}),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.COPY_COMMAND,(t=>(w(t,e),!0)),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.CUT_COMMAND,(t=>(function(e,t){w(e,t),e=o.$getSelection(),o.$isRangeSelection(e)?e.removeText():o.$isNodeSelection(e)&&e.getNodes().forEach((e=>e.remove()))}(t,e),!0)),o.COMMAND_PRIORITY_EDITOR),e.registerCommand(o.PASTE_COMMAND,(t=>{const n=o.$getSelection();return!(!o.$isRangeSelection(n)&&!o.$isGridSelection(n))&&(function(e,t){e.preventDefault(),t.update((()=>{let n=o.$getSelection(),i=e instanceof InputEvent?null:e.clipboardData;null!=i&&(o.$isRangeSelection(n)||o.$isGridSelection(n))&&r.$insertDataTransferForRichText(i,n,t)}),{tag:"paste"})}(t,e),!0)}),o.COMMAND_PRIORITY_EDITOR));return function(e,t){if(null!==t)if(void 0===t)e.update((()=>{var t=o.$getRoot();if(t.isEmpty()){let n=o.$createParagraphNode();t.append(n),t=document.activeElement,(null!==o.$getSelection()||null!==t&&t===e.getRootElement())&&n.select()}}),h);else if(null!==t)switch(typeof t){case"string":let n=e.parseEditorState(t);e.setEditorState(n,h);break;case"object":e.setEditorState(t,h);break;case"function":e.update((()=>{o.$getRoot().isEmpty()&&t(e)}),h)}}(e,t),n}},9689:(e,t,n)=>{"use strict";const r=n(161);e.exports=r},161:(e,t,n)=>{"use strict";var r=n(5523);let i=new Map;function s(e){let t=(e=e.getLatest()).constructor.clone(e);return t.__parent=e.__parent,r.$isElementNode(e)&&r.$isElementNode(t)?(t.__children=Array.from(e.__children),t.__format=e.__format,t.__indent=e.__indent,t.__dir=e.__dir):r.$isTextNode(e)&&r.$isTextNode(t)&&(t.__format=e.__format,t.__style=e.__style,t.__mode=e.__mode,t.__detail=e.__detail),t}function o(e,t,n,i,o,a){for(var l=t;null!==e;){for(t=e.getParent();null!==t&&t.excludeFromCopy("clone");)t=t.getParent();if(null===t)break;if(!r.$isElementNode(e)||!e.excludeFromCopy("clone")){let c=e.getKey(),u=a.get(c),d=void 0===u;if(d&&(u=s(e),a.set(c,u)),!r.$isTextNode(u)||u.isSegmented()||u.isToken()?r.$isElementNode(u)&&(u.__children=u.__children.slice(i?l:0,i?void 0:(l||0)+1)):u.__text=u.__text.slice(i?l:0,i?n:l),r.$isRootNode(t)){d&&o.push(c);break}}l=a.get(t.getKey()),l=r.$isElementNode(l)?l.__children.indexOf(e.getKey()):e.getIndexWithinParent(),e=t}}function a(e){return i.get(e)||null}function l(e,t){var n=a(e.getStyle());for(r in t=n?{...n,...t}:t,n="",t)r&&(n+="".concat(r,": ").concat(t[r],";"));var r=n;e.setStyle(r),i.set(r,t)}function c(e,t,n,r){e.modify(t?"extend":"move",n,r)}function u(e){return e=e.anchor.getNode(),"rtl"===(r.$isRootNode(e)?e:e.getParentOrThrow()).getDirection()}function d(e){for(;null!==e&&!r.$isRootNode(e);){let t=e.getLatest(),n=e.getParent();0===t.__children.length&&e.remove(!0),e=n}}function h(e){for(;null!=e;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function f(e){let t=e.parentNode;if(null==t)throw Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)]}t.$addNodeStyle=function(e){let t={},n=(e=e.getStyle()).split(";");for(let r of n)if(""!==r){let[e,n]=r.split(/:([^]+)/);t[e.trim()]=n.trim()}i.set(e,t)},t.$cloneContents=function(e){return function(e){if(r.$isRangeSelection(e)){var t=e.anchor,n=e.focus;let[d,h]=e.getCharacterOffsets();if(0===(e=e.getNodes()).length)return{nodeMap:[],range:[]};let f=e.length;var i=e[0],a=i.getParent();if(null!==a&&(!a.canBeEmpty()||r.$isRootNode(a))){var l=a.__children;if(l.length===f){for(var c=!0,u=0;u<l.length;u++)if(l[u]!==e[u].__key){c=!1;break}c&&(f++,e.push(a))}}for(a=e[f-1],t=t.isBefore(n),n=new Map,l=[],o(i,t?d:h,(c=r.$isTextNode(i)&&1===f)?t?h:d:void 0,!0,l,n),i=0;i<f;i++){let t=(u=e[i]).getKey();if(!(n.has(t)||r.$isElementNode(u)&&u.excludeFromCopy("clone"))){let e=s(u);r.$isRootNode(u.getParent())&&l.push(u.getKey()),"root"!==t&&n.set(t,e)}}return o(a,c?void 0:t?h:d,void 0,!1,l,n),{nodeMap:Array.from(n.entries()),range:l}}if(r.$isGridSelection(e))return{nodeMap:e.getNodes().map((e=>[e.getKey(),e=s(e)])),range:[e.gridKey]};throw Error("Minified Lexical error #1; visit https://lexical.dev/docs/error?code=1 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")}(e)},t.$cloneWithProperties=s,t.$getSelectionStyleValueForProperty=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=null,s=e.getNodes();var o=e.anchor,l=e.focus,c=e.isBackward();for(e=c?l.offset:o.offset,o=c?l.getNode():o.getNode(),l=0;l<s.length;l++){var u=s[l];if((0===l||0!==e||!u.is(o))&&r.$isTextNode(u)){c=t;var d=n;if(c=null!==(u=a(u=u.getStyle()))&&u[c]||d,null===i)i=c;else if(i!==c){i="";break}}}return null===i?n:i},t.$isAtNodeEnd=function(e){return"text"===e.type?e.offset===e.getNode().getTextContentSize():e.offset===e.getNode().getChildrenSize()},t.$isParentElementRTL=u,t.$moveCaretSelection=c,t.$moveCharacter=function(e,t,n){let r=u(e);c(e,t,n?!r:r,"character")},t.$patchStyleText=function(e,t){var n=e.getNodes();let i=n.length-1,s=n[0],o=n[i];if(!e.isCollapsed()){var a=e.anchor,c=e.focus;e=s.getTextContent().length;var u=c.offset,d=a.offset;if(a=(c=a.isBefore(c))?d:u,c=c?u:d,a===s.getTextContentSize()){let e=s.getNextSibling();r.$isTextNode(e)&&(a=d=0,s=e)}if(s.is(o))r.$isTextNode(s)&&((a=d>u?u:d)!==(c=d>u?d:u)&&(0===a&&c===e?(l(s,t),s.select(a,c)):(n=s.splitText(a,c),l(n=0===a?n[0]:n[1],t),n.select(0,c-a))));else for(r.$isTextNode(s)&&(0!==a&&(s=s.splitText(a)[1]),l(s,t)),r.$isTextNode(o)&&(c!==(e=o.getTextContent().length)&&([o]=o.splitText(c)),0!==c&&l(o,t)),e=1;e<i;e++)d=(u=n[e]).getKey(),r.$isTextNode(u)&&d!==s.getKey()&&d!==o.getKey()&&!u.isToken()&&l(u,t)}},t.$selectAll=function(e){let t=e.anchor;e=e.focus;var n=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();let i=n.getFirstDescendant();n=n.getLastDescendant();let s="element",o="element",a=0;r.$isTextNode(i)?s="text":r.$isElementNode(i)||null===i||(i=i.getParentOrThrow()),r.$isTextNode(n)?(o="text",a=n.getTextContentSize()):r.$isElementNode(n)||null===n||(n=n.getParentOrThrow()),i&&n&&(t.set(i.getKey(),0,s),e.set(n.getKey(),a,o))},t.$shouldOverrideDefaultCharacterSelection=function(e,t){return e=r.$getDecoratorNode(e.focus,t),r.$isDecoratorNode(e)&&!e.isIsolated()},t.$sliceSelectedTextNodeContent=function(e,t){if(t.isSelected()&&!t.isSegmented()&&!t.isToken()&&(r.$isRangeSelection(e)||r.$isGridSelection(e))){var n=e.anchor.getNode(),i=e.focus.getNode(),s=t.is(n),o=t.is(i);if(s||o){s=e.isBackward();let r,[a,l]=e.getCharacterOffsets();e=n.is(i),o=t.is(s?i:n),i=t.is(s?n:i),n=0,e?(n=a>l?l:a,r=a>l?a:l):o?(n=s?l:a,r=void 0):i&&(n=0,r=s=s?a:l),t.__text=t.__text.slice(n,r)}}return t},t.$wrapLeafNodesInElements=function(e,t,n){let i=e.getNodes(),s=i.length;var o=e.anchor;if(0===s||1===s&&"element"===o.type&&0===o.getNode().getChildrenSize()){e="text"===o.type?o.getNode().getParentOrThrow():o.getNode(),o=e.getChildren();let r=t();r.setFormat(e.getFormatType()),r.setIndent(e.getIndent()),o.forEach((e=>r.append(e))),n&&(r=n.append(r)),e.replace(r)}else{var a=i[0],l=new Map;for(o=[],(a=r.$isElementNode(a)?a:a.getParentOrThrow()).isInline()&&(a=a.getParentOrThrow());null!==a;){var c=a.getPreviousSibling();if(null!==c){a=c;break}if(a=a.getParentOrThrow(),r.$isRootNode(a))break}c=new Set;for(var u=0;u<s;u++){var h=i[u];r.$isElementNode(h)&&0===h.getChildrenSize()&&c.add(h.getKey())}var f=new Set;for(u=0;u<s;u++){var p=(h=i[u]).getParent();if(null!==p&&p.isInline()&&(p=p.getParent()),null!==p&&r.$isLeafNode(h)&&!f.has(h.getKey())){if(h=p.getKey(),void 0===l.get(h)){let e=t();e.setFormat(p.getFormatType()),e.setIndent(p.getIndent()),o.push(e),l.set(h,e),p.getChildren().forEach((t=>{e.append(t),f.add(t.getKey())})),d(p)}}else c.has(h.getKey())&&((p=t()).setFormat(h.getFormatType()),p.setIndent(h.getIndent()),o.push(p),h.remove())}if(n)for(t=0;t<o.length;t++)n.append(o[t]);if(r.$isRootNode(a))if(t=a.getFirstChild(),r.$isElementNode(t)&&(a=t),null===t)if(n)a.append(n);else for(n=0;n<o.length;n++)a.append(o[n]);else if(n)t.insertBefore(n);else for(n=0;n<o.length;n++)t.insertBefore(o[n]);else if(n)a.insertAfter(n);else for(n=o.length-1;0<=n;n--)a.insertAfter(o[n]);n=r.$getPreviousSelection(),r.$isRangeSelection(n)&&n.anchor.getNode().isAttached()&&n.focus.getNode().isAttached()?r.$setSelection(n.clone()):e.dirty=!0}},t.createDOMRange=function(e,t,n,i,s){let o=t.getKey(),a=i.getKey(),l=document.createRange(),c=e.getElementByKey(o);if(e=e.getElementByKey(a),r.$isTextNode(t)&&(c=h(c)),r.$isTextNode(i)&&(e=h(e)),void 0===t||void 0===i||null===c||null===e)return null;"BR"===c.nodeName&&([c,n]=f(c)),"BR"===e.nodeName&&([e,s]=f(e)),t=c.firstChild,c===e&&null!=t&&"BR"===t.nodeName&&0===n&&0===s&&(s=1);try{l.setStart(c,n),l.setEnd(e,s)}catch(u){return null}return!l.collapsed||n===s&&o===a||(l.setStart(e,s),l.setEnd(c,n)),l},t.createRectsFromDOMRange=function(e,t){var n=e.getRootElement();if(null===n)return[];e=n.getBoundingClientRect(),n=getComputedStyle(n),n=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);let r,i=(t=Array.from(t.getClientRects())).length;for(let s=0;s<i;s++){let o=t[s],a=o.width+n===e.width;r&&r.top===o.top&&r.left===o.left&&r.width===o.width&&r.height===o.height||a?(t.splice(s--,1),i--):r=o}return t},t.getStyleObjectFromCSS=a,t.trimTextContentFromAnchor=function(e,t,n){let i=t.getNode();if(r.$isElementNode(i)){var s=i.getDescendantByIndex(t.offset);null!==s&&(i=s)}for(;0<n&&null!==i;){var o=i.getPreviousSibling(),a=0;if(null===o){for(var l=(s=i.getParentOrThrow()).getPreviousSibling();null===l;){if(null===(s=s.getParent())){o=null;break}l=s.getPreviousSibling()}null!==s&&(a=s.isInline()?0:2,o=r.$isElementNode(l)?l.getLastDescendant():l)}let c=i.getTextContent();""===c&&r.$isElementNode(i)&&!i.isInline()&&(c="\n\n"),l=(s=c.length)-n;let u=c.slice(0,l);if(!r.$isTextNode(i)||n>=s)l=i.getParent(),i.remove(),null!=l&&0===l.getChildrenSize()&&l.remove(),n-=s+a,i=o;else{let d=i.getKey();null!==(o=e.getEditorState().read((()=>{const e=r.$getNodeByKey(d);return r.$isTextNode(e)&&e.isSimpleText()?e.getTextContent():null})))&&o!==c?(n=r.$getPreviousSelection(),s=i,i.isSimpleText()?i.setTextContent(o):(s=r.$createTextNode(o),i.replace(s)),r.$isRangeSelection(n)&&n.isCollapsed()&&(n=n.anchor.offset,s.select(n,n))):i.isSimpleText()?(o=t.key===d,(a=t.offset)<n&&(a=s),n=o?a-n:0,s=o?a:l,o&&0===n?([n]=i.splitText(n,s),n.remove()):([,n]=i.splitText(n,s),n.remove())):(n=r.$createTextNode(u),i.replace(n)),n=0}}}},4937:(e,t,n)=>{"use strict";const r=n(9878);e.exports=r},9878:(e,t,n)=>{"use strict";var r=n(5523),i=n(4140);let s={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1};class o extends r.GridCellNode{static getType(){return"tablecell"}static clone(e){return new o(e.__headerState,e.__colSpan,e.__width,e.__key)}static importDOM(){return{td:()=>({conversion:a,priority:0}),th:()=>({conversion:a,priority:0})}}static importJSON(e){return l(e.headerState,e.colSpan,e.width||void 0)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.NO_STATUS,t=arguments.length>2?arguments[2]:void 0;super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>3?arguments[3]:void 0),this.__headerState=e,this.__width=t}createDOM(e){let t=document.createElement(this.getTag());return this.__width&&(t.style.width="".concat(this.__width,"px")),i.addClassNamesToElement(t,e.theme.tableCell,this.hasHeader()&&e.theme.tableCellHeader),t}exportDOM(e){if(({element:e}=super.exportDOM(e)),e){let t=this.getParentOrThrow().getChildrenSize();e.style.border="1px solid black",e.style.width="".concat(this.getWidth()||Math.max(90,700/t),"px"),e.style.verticalAlign="top",e.style.textAlign="start",this.hasHeader()&&(e.style.backgroundColor="#f2f3f5")}return{element:e}}exportJSON(){return{...super.exportJSON(),colSpan:super.__colSpan,headerState:this.__headerState,type:"tablecell",width:this.getWidth()}}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(e){return this.getWritable().__headerState=e,this.__headerState}getHeaderStyles(){return this.getLatest().__headerState}setWidth(e){return this.getWritable().__width=e,this.__width}getWidth(){return this.getLatest().__width}toggleHeaderStyle(e){let t=this.getWritable();return t.__headerState=(t.__headerState&e)===e?t.__headerState-e:t.__headerState+e,t}hasHeaderState(e){return(this.getHeaderStyles()&e)===e}hasHeader(){return this.getLatest().__headerState!==s.NO_STATUS}updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function a(e){return{forChild:(e,t)=>c(t)&&!r.$isElementNode(e)?(t=r.$createParagraphNode(),r.$isLineBreakNode(e)&&"\n"===e.getTextContent()?null:(t.append(e),t)):e,node:l("th"===(e=e.nodeName.toLowerCase())?s.ROW:s.NO_STATUS)}}function l(e){return new o(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0)}function c(e){return e instanceof o}class u extends r.GridRowNode{static getType(){return"tablerow"}static clone(e){return new u(e.__height,e.__key)}static importDOM(){return{tr:()=>({conversion:d,priority:0})}}static importJSON(e){return h(e.height)}constructor(e,t){super(t),this.__height=e}exportJSON(){return{...super.exportJSON(),type:"tablerow",version:1}}createDOM(e){let t=document.createElement("tr");return this.__height&&(t.style.height="".concat(this.__height,"px")),i.addClassNamesToElement(t,e.theme.tableRow),t}setHeight(e){return this.getWritable().__height=e,this.__height}getHeight(){return this.getLatest().__height}updateDOM(e){return e.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function d(){return{node:h()}}function h(e){return new u(e)}function f(e){return e instanceof u}function p(e){throw Error("Minified Lexical error #".concat(e,"; visit https://lexical.dev/docs/error?code=").concat(e," for the full message or ")+"use the non-minified dev environment for full errors and additional helpful warnings.")}if("undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement){let e=document.createElement("style");e.innerHTML="\n    table.disable-selection {\n      -webkit-touch-callout: none;\n      -webkit-user-select: none; \n      -khtml-user-select: none; \n      -moz-user-select: none; \n      -ms-user-select: none; \n      user-select: none;\n    }\n  \n    .disable-selection span::selection{\n      background-color: transparent;\n    }\n    .disable-selection br::selection{\n      background-color: transparent;\n    }\n  ",document.body&&document.body.append(e)}class g{constructor(e,t){this.isHighlightingCells=!1,this.currentY=this.currentX=this.startY=this.startX=-1,this.listenersToRemove=new Set,this.tableNodeKey=t,this.editor=e,this.grid={cells:[],columns:0,rows:0},this.focusCell=this.anchorCell=this.focusCellNodeKey=this.anchorCellNodeKey=this.gridSelection=null,this.hasHijackedSelectionStyles=!1,this.trackTableGrid()}getGrid(){return this.grid}removeListeners(){Array.from(this.listenersToRemove).forEach((e=>e()))}trackTableGrid(){let e=new MutationObserver((e=>{this.editor.update((()=>{var t=!1;for(let n=0;n<e.length;n++){const r=e[n].target.nodeName;if("TABLE"===r||"TR"===r){t=!0;break}}if(t){if(!(t=this.editor.getElementByKey(this.tableNodeKey)))throw Error("Expected to find TableElement in DOM");this.grid=y(t)}}))}));this.editor.update((()=>{let t=this.editor.getElementByKey(this.tableNodeKey);if(!t)throw Error("Expected to find TableElement in DOM");this.grid=y(t),e.observe(t,{childList:!0,subtree:!0})}))}clearHighlight(){this.editor.update((()=>{var e=r.$getNodeByKey(this.tableNodeKey);if(!k(e))throw Error("Expected TableNode.");if(!(e=this.editor.getElementByKey(this.tableNodeKey)))throw Error("Expected to find TableElement in DOM");e=y(e),this.isHighlightingCells=!1,this.currentY=this.currentX=this.startY=this.startX=-1,this.focusCell=this.anchorCell=this.focusCellNodeKey=this.anchorCellNodeKey=this.gridSelection=null,this.hasHijackedSelectionStyles=!1,v(e,null),r.$setSelection(null),this.editor.dispatchCommand(r.SELECTION_CHANGE_COMMAND,void 0),this.enableHighlightStyle()}))}enableHighlightStyle(){this.editor.update((()=>{let e=this.editor.getElementByKey(this.tableNodeKey);if(!e)throw Error("Expected to find TableElement in DOM");e.classList.remove("disable-selection"),this.hasHijackedSelectionStyles=!1}))}disableHighlightStyle(){this.editor.update((()=>{let e=this.editor.getElementByKey(this.tableNodeKey);if(!e)throw Error("Expected to find TableElement in DOM");e.classList.add("disable-selection"),this.hasHijackedSelectionStyles=!0}))}updateTableGridSelection(e){if(null!=e){this.gridSelection=e,this.isHighlightingCells=!0,this.disableHighlightStyle();let t=this.editor.getElementByKey(e.anchor.key);if(e=this.editor.getElementByKey(e.focus.key),t&&e){let n=window.getSelection();n&&n.setBaseAndExtent(t,0,e,0)}v(this.grid,this.gridSelection)}else this.clearHighlight()}adjustFocusCellForSelection(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.editor.update((()=>{var n=r.$getNodeByKey(this.tableNodeKey);if(!k(n))throw Error("Expected TableNode.");if(!this.editor.getElementByKey(this.tableNodeKey))throw Error("Expected to find TableElement in DOM");n=e.x;let i=e.y;this.focusCell=e;let s=window.getSelection();if(null!==this.anchorCell&&s&&s.setBaseAndExtent(this.anchorCell.elem,0,e.elem,0),this.isHighlightingCells||this.startX===n&&this.startY===i&&!t){if(n===this.currentX&&i===this.currentY)return}else this.isHighlightingCells=!0,this.disableHighlightStyle();this.currentX=n,this.currentY=i,this.isHighlightingCells&&(n=r.$getNearestNodeFromDOMNode(e.elem),null!=this.gridSelection&&null!=this.anchorCellNodeKey&&c(n)&&(n=n.getKey(),this.gridSelection=r.$createGridSelection(),this.focusCellNodeKey=n,this.gridSelection.set(this.tableNodeKey,this.anchorCellNodeKey,this.focusCellNodeKey),r.$setSelection(this.gridSelection),this.editor.dispatchCommand(r.SELECTION_CHANGE_COMMAND,void 0),v(this.grid,this.gridSelection)))}))}setAnchorCellForSelection(e){this.editor.update((()=>{this.anchorCell=e,this.startX=e.x,this.startY=e.y;var t=window.getSelection();t&&t.setBaseAndExtent(e.elem,0,e.elem,0),c(t=r.$getNearestNodeFromDOMNode(e.elem))&&(t=t.getKey(),this.gridSelection=r.$createGridSelection(),this.anchorCellNodeKey=t)}))}formatCells(e){this.editor.update((()=>{let t=r.$getSelection();r.$isGridSelection(t)||p(11);let n=r.$createRangeSelection(),i=n.anchor,s=n.focus;t.getNodes().forEach((t=>{c(t)&&0!==t.getTextContentSize()&&(i.set(t.getKey(),0,"element"),s.set(t.getKey(),t.getChildrenSize(),"element"),n.formatText(e))})),r.$setSelection(t),this.editor.dispatchCommand(r.SELECTION_CHANGE_COMMAND,void 0)}))}clearText(){this.editor.update((()=>{let e=r.$getNodeByKey(this.tableNodeKey);if(!k(e))throw Error("Expected TableNode.");var t=r.$getSelection();r.$isGridSelection(t)||p(11),(t=t.getNodes().filter(c)).length===this.grid.columns*this.grid.rows?(e.selectPrevious(),e.remove(),this.clearHighlight()):(t.forEach((e=>{if(r.$isElementNode(e)){let t=r.$createParagraphNode(),n=r.$createTextNode();t.append(n),e.append(t),e.getChildren().forEach((e=>{e!==t&&e.remove()}))}})),v(this.grid,null),r.$setSelection(null),this.editor.dispatchCommand(r.SELECTION_CHANGE_COMMAND,void 0))}))}}function m(e){for(;null!=e;){let t=e.nodeName;if("TD"===t||"TH"===t){if(void 0===(e=e._cell))break;return e}e=e.parentNode}return null}function y(e){let t=[],n={cells:t,columns:0,rows:0};var r=e.firstChild;let i=e=0;for(t.length=0;null!=r;){var s=r.nodeName;if("TD"===s||"TH"===s)s={elem:r,highlighted:!1,x:e,y:i},r._cell=s,void 0===t[i]&&(t[i]=[]),t[i][e]=s;else if(null!=(s=r.firstChild)){r=s;continue}if(null!=(s=r.nextSibling))e++,r=s;else if(null!=(s=r.parentNode)){if(null==(r=s.nextSibling))break;i++,e=0}}return n.columns=e+1,n.rows=i+1,n}function v(e,t){let n=[],r=new Set(t?t.getNodes():[]);return _(e,((e,t)=>{let i=e.elem;r.has(t)?(e.highlighted=!0,i.style.setProperty("background-color","rgb(172, 206, 247)"),i.style.setProperty("caret-color","transparent"),n.push(e)):(e.highlighted=!1,i.style.removeProperty("background-color"),i.style.removeProperty("caret-color"),i.getAttribute("style")||i.removeAttribute("style"))})),n}function _(e,t){({cells:e}=e);for(let n=0;n<e.length;n++){let i=e[n];for(let e=0;e<i.length;e++){let s=i[e],o=r.$getNearestNodeFromDOMNode(s.elem);null!==o&&t(s,o,{x:e,y:n})}}}function w(e){e.disableHighlightStyle(),_(e.grid,(e=>{let t=e.elem;e.highlighted=!0,t.style.setProperty("background-color","rgb(172, 206, 247)"),t.style.setProperty("caret-color","transparent")}))}let b=(e,t,n,r,i)=>{const s="forward"===i;switch(i){case"backward":case"forward":return n!==(s?e.grid.columns-1:0)?S(t.getCellNodeFromCordsOrThrow(n+(s?1:-1),r,e.grid)):r!==(s?e.grid.rows-1:0)?S(t.getCellNodeFromCordsOrThrow(s?0:e.grid.columns-1,r+(s?1:-1),e.grid)):s?t.selectNext():t.selectPrevious(),!0;case"up":return 0!==r?S(t.getCellNodeFromCordsOrThrow(n,r-1,e.grid)):t.selectPrevious(),!0;case"down":return r!==e.grid.rows-1?S(t.getCellNodeFromCordsOrThrow(n,r+1,e.grid)):t.selectNext(),!0;default:return!1}},T=(e,t,n,r,i)=>{const s="forward"===i;switch(i){case"backward":case"forward":return n!==(s?e.grid.columns-1:0)&&e.adjustFocusCellForSelection(t.getCellFromCordsOrThrow(n+(s?1:-1),r,e.grid)),!0;case"up":return 0!==r&&(e.adjustFocusCellForSelection(t.getCellFromCordsOrThrow(n,r-1,e.grid)),!0);case"down":return r!==e.grid.rows-1&&(e.adjustFocusCellForSelection(t.getCellFromCordsOrThrow(n,r+1,e.grid)),!0);default:return!1}};function E(e,t){if(r.$isRangeSelection(e)||r.$isGridSelection(e)){let n=t.isParentOf(e.anchor.getNode());return e=t.isParentOf(e.focus.getNode()),n&&e}return!1}function S(e){let t=e.getChildren().find((e=>r.$isParagraphNode(e)));r.$isParagraphNode(t)?t.selectEnd():e.selectEnd()}class I extends r.GridNode{static getType(){return"table"}static clone(e){return new I(e.__key)}static importDOM(){return{table:()=>({conversion:N,priority:0})}}static importJSON(){return C()}constructor(e){super(e)}exportJSON(){return{...super.exportJSON(),type:"table",version:1}}createDOM(e){let t=document.createElement("table");return i.addClassNamesToElement(t,e.theme.table),t}updateDOM(){return!1}exportDOM(e){return{...super.exportDOM(e),after:e=>{if(e){let t=e.cloneNode(),n=document.createElement("colgroup"),r=document.createElement("tbody");if(r.append(...e.children),!f(e=this.getFirstChildOrThrow()))throw Error("Expected to find row node.");e=e.getChildrenSize();for(let i=0;i<e;i++){let e=document.createElement("col");n.append(e)}return t.replaceChildren(n,r),t}}}}canExtractContents(){return!1}canBeEmpty(){return!1}getCordsFromCellNode(e,t){let{rows:n,cells:i}=t;for(t=0;t<n;t++){var s=i[t];if(null==s)throw Error("Row not found at y:".concat(t));if(-1!==(s=s.findIndex((t=>{let{elem:n}=t;return r.$getNearestNodeFromDOMNode(n)===e}))))return{x:s,y:t}}throw Error("Cell not found in table.")}getCellFromCords(e,t,n){return({cells:n}=n),null==(t=n[t])||null==(e=t[e])?null:e}getCellFromCordsOrThrow(e,t,n){if(!(e=this.getCellFromCords(e,t,n)))throw Error("Cell not found at cords.");return e}getCellNodeFromCords(e,t,n){return null==(e=this.getCellFromCords(e,t,n))?null:c(e=r.$getNearestNodeFromDOMNode(e.elem))?e:null}getCellNodeFromCordsOrThrow(e,t,n){if(!(e=this.getCellNodeFromCords(e,t,n)))throw Error("Node at cords not TableCellNode.");return e}canSelectBefore(){return!0}canIndent(){return!1}}function N(){return{node:C()}}function C(){return new I}function k(e){return e instanceof I}function x(e){if(e=i.$findMatchingParent(e,(e=>f(e))),f(e))return e;throw Error("Expected table cell to be inside of table row.")}function A(e){if(e=i.$findMatchingParent(e,(e=>k(e))),k(e))return e;throw Error("Expected table cell to be inside of table.")}let O=r.createCommand();t.$createTableCellNode=l,t.$createTableNode=C,t.$createTableNodeWithDimensions=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=C();for(let a=0;a<e;a++){let e=h();for(let i=0;i<t;i++){var o=s.NO_STATUS;n&&(0===a&&(o|=s.ROW),0===i&&(o|=s.COLUMN)),o=l(o);let t=r.$createParagraphNode();t.append(r.$createTextNode()),o.append(t),e.append(o)}i.append(e)}return i},t.$createTableRowNode=h,t.$deleteTableColumn=function(e,t){let n=e.getChildren();for(let i=0;i<n.length;i++){var r=n[i];if(f(r)){if(t>=(r=r.getChildren()).length||0>t)throw Error("Table column target index out of range");r[t].remove()}}return e},t.$getElementGridForTableNode=function(e,t){if(null==(e=e.getElementByKey(t.getKey())))throw Error("Table Element Not Found");return y(e)},t.$getTableCellNodeFromLexicalNode=function(e){return e=i.$findMatchingParent(e,(e=>c(e))),c(e)?e:null},t.$getTableColumnIndexFromTableCellNode=function(e){return x(e).getChildren().findIndex((t=>t.is(e)))},t.$getTableNodeFromLexicalNodeOrThrow=A,t.$getTableRowIndexFromTableCellNode=function(e){let t=x(e);return A(t).getChildren().findIndex((e=>e.is(t)))},t.$getTableRowNodeFromTableCellNodeOrThrow=x,t.$insertTableColumn=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,o=e.getChildren();for(let u=0;u<o.length;u++){let e=o[u];if(f(e))for(let o=0;o<i;o++){var a=s.NO_STATUS;0===u&&(a|=s.ROW),(a=l(a)).append(r.$createParagraphNode());var c=e.getChildren();if(t>=c.length||0>t)throw Error("Table column target index out of range");c=c[t],n?c.insertAfter(a):c.insertBefore(a)}}return e},t.$insertTableRow=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;var a=e.getChildren();if(t>=a.length||0>t)throw Error("Table row target index out of range");if(!f(t=a[t]))throw Error("Row before insertion index does not exist.");for(a=0;a<i;a++){let e=t.getChildren(),i=e.length,a=h();for(let t=0;t<i;t++){var u=e[t];c(u)||p(12);var d=o;let n=A(u),{x:i,y:h}=n.getCordsFromCellNode(u,d);u={above:n.getCellNodeFromCords(i,h-1,d),below:n.getCellNodeFromCords(i,h+1,d),left:n.getCellNodeFromCords(i-1,h,d),right:n.getCellNodeFromCords(i+1,h,d)};let{above:f,below:g}=u;u=s.NO_STATUS,d=f&&f.getWidth()||g&&g.getWidth()||void 0,(f&&f.hasHeaderState(s.COLUMN)||g&&g.hasHeaderState(s.COLUMN))&&(u|=s.COLUMN),(u=l(u,1,d)).append(r.$createParagraphNode()),a.append(u)}n?t.insertAfter(a):t.insertBefore(a)}return e},t.$isTableCellNode=c,t.$isTableNode=k,t.$isTableRowNode=f,t.$removeTableRowAtIndex=function(e,t){let n=e.getChildren();if(t>=n.length||0>t)throw Error("Expected table cell to be inside of table row.");return n[t].remove(),e},t.INSERT_TABLE_COMMAND=O,t.TableCellHeaderStates=s,t.TableCellNode=o,t.TableNode=I,t.TableRowNode=u,t.TableSelection=g,t.applyTableHandlers=function(e,t,n){let s=n.getRootElement();if(null===s)throw Error("No root element.");let o=new g(n,e.getKey());t.__lexicalTableSelection=o;let a=!1,l=!1;t.addEventListener("dblclick",(e=>{let t=m(e.target);null!==t&&(e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),o.setAnchorCellForSelection(t),o.adjustFocusCellForSelection(t,!0),a=!1)})),t.addEventListener("mousedown",(e=>{setTimeout((()=>{if(0===e.button){var t=m(e.target);null!==t&&(o.setAnchorCellForSelection(t),document.addEventListener("mouseup",(()=>{a=!1}),{capture:!0,once:!0}))}}),0)})),t.addEventListener("mousemove",(e=>{if(l&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),a){let t=m(e.target);if(null!==t){let n=t.x,r=t.y;a&&(o.startX!==n||o.startY!==r||o.isHighlightingCells)&&(e.preventDefault(),a=!0,o.adjustFocusCellForSelection(t))}}})),t.addEventListener("mouseup",(()=>{a&&(a=!1)})),t.addEventListener("mouseleave",(()=>{}));let u=e=>{a=!0,0===e.button&&n.update((()=>{const t=r.$getSelection();if(r.$isGridSelection(t)&&t.gridKey===o.tableNodeKey&&s.contains(e.target))return o.clearHighlight()}))};window.addEventListener("mousedown",u),o.listenersToRemove.add((()=>window.removeEventListener("mousedown",u)));let d=()=>{a=!1};return window.addEventListener("mouseup",d),o.listenersToRemove.add((()=>window.removeEventListener("mouseup",d))),o.listenersToRemove.add(n.registerCommand(r.KEY_ARROW_DOWN_COMMAND,(t=>{var n=r.$getSelection();if(!E(n,e))return!1;if(r.$isRangeSelection(n)){if(n.isCollapsed()){var s=i.$findMatchingParent(n.anchor.getNode(),(e=>c(e)));if(!c(s))return!1;var a=e.getCordsFromCellNode(s,o.grid);if(null==(n=i.$findMatchingParent(n.anchor.getNode(),(e=>r.$isElementNode(e)))))throw Error("Expected BlockNode Parent");if((s=s.getLastChild())&&n.isParentOf(s)||n===s||t.shiftKey)return t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),t.shiftKey?(o.setAnchorCellForSelection(e.getCellFromCordsOrThrow(a.x,a.y,o.grid)),T(o,e,a.x,a.y,"down")):b(o,e,a.x,a.y,"down")}}else if(r.$isGridSelection(n)&&t.shiftKey)return!!c(a=n.focus.getNode())&&(a=e.getCordsFromCellNode(a,o.grid),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),T(o,e,a.x,a.y,"down"));return!1}),r.COMMAND_PRIORITY_CRITICAL)),o.listenersToRemove.add(n.registerCommand(r.KEY_ARROW_UP_COMMAND,(t=>{var n=r.$getSelection();if(!E(n,e))return!1;if(r.$isRangeSelection(n)){if(n.isCollapsed()){var s=i.$findMatchingParent(n.anchor.getNode(),(e=>c(e)));if(!c(s))return!1;var a=e.getCordsFromCellNode(s,o.grid);if(null==(n=i.$findMatchingParent(n.anchor.getNode(),(e=>r.$isElementNode(e)))))throw Error("Expected BlockNode Parent");if((s=s.getLastChild())&&n.isParentOf(s)||n===s||t.shiftKey)return t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),t.shiftKey?(o.setAnchorCellForSelection(e.getCellFromCordsOrThrow(a.x,a.y,o.grid)),T(o,e,a.x,a.y,"up")):b(o,e,a.x,a.y,"up")}}else if(r.$isGridSelection(n)&&t.shiftKey)return!!c(a=n.focus.getNode())&&(a=e.getCordsFromCellNode(a,o.grid),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),T(o,e,a.x,a.y,"up"));return!1}),r.COMMAND_PRIORITY_CRITICAL)),o.listenersToRemove.add(n.registerCommand(r.KEY_ARROW_LEFT_COMMAND,(t=>{var n=r.$getSelection();if(!E(n,e))return!1;if(r.$isRangeSelection(n)){if(n.isCollapsed()){var s=i.$findMatchingParent(n.anchor.getNode(),(e=>c(e)));if(!c(s))return!1;if(s=e.getCordsFromCellNode(s,o.grid),null==i.$findMatchingParent(n.anchor.getNode(),(e=>r.$isElementNode(e))))throw Error("Expected BlockNode Parent");if(0===n.anchor.offset||t.shiftKey)return t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),t.shiftKey?(o.setAnchorCellForSelection(e.getCellFromCordsOrThrow(s.x,s.y,o.grid)),T(o,e,s.x,s.y,"backward")):b(o,e,s.x,s.y,"backward")}}else if(r.$isGridSelection(n)&&t.shiftKey)return!!c(n=n.focus.getNode())&&(n=e.getCordsFromCellNode(n,o.grid),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),T(o,e,n.x,n.y,"backward"));return!1}),r.COMMAND_PRIORITY_CRITICAL)),o.listenersToRemove.add(n.registerCommand(r.KEY_ARROW_RIGHT_COMMAND,(t=>{var n=r.$getSelection();if(!E(n,e))return!1;if(r.$isRangeSelection(n)){if(n.isCollapsed()){var s=i.$findMatchingParent(n.anchor.getNode(),(e=>c(e)));if(!c(s))return!1;if(s=e.getCordsFromCellNode(s,o.grid),null==i.$findMatchingParent(n.anchor.getNode(),(e=>r.$isElementNode(e))))throw Error("Expected BlockNode Parent");if(n.anchor.offset===n.anchor.getNode().getTextContentSize()||t.shiftKey)return t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),t.shiftKey?(o.setAnchorCellForSelection(e.getCellFromCordsOrThrow(s.x,s.y,o.grid)),T(o,e,s.x,s.y,"forward")):b(o,e,s.x,s.y,"forward")}}else if(r.$isGridSelection(n)&&t.shiftKey)return!!c(n=n.focus.getNode())&&(n=e.getCordsFromCellNode(n,o.grid),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),T(o,e,n.x,n.y,"forward"));return!1}),r.COMMAND_PRIORITY_CRITICAL)),o.listenersToRemove.add(n.registerCommand(r.DELETE_CHARACTER_COMMAND,(()=>{let t=r.$getSelection();if(!E(t,e))return!1;if(r.$isGridSelection(t))return o.clearText(),!0;if(r.$isRangeSelection(t)){var n=i.$findMatchingParent(t.anchor.getNode(),(e=>c(e)));if(!c(n))return!1;if(n=i.$findMatchingParent(t.anchor.getNode(),(e=>r.$isParagraphNode(e))),!r.$isParagraphNode(n))return!1;if(t.isCollapsed()&&0===t.anchor.offset&&0===n.getPreviousSiblings().length)return!0}return!1}),r.COMMAND_PRIORITY_CRITICAL)),o.listenersToRemove.add(n.registerCommand(r.KEY_BACKSPACE_COMMAND,(t=>{let n=r.$getSelection();return!!E(n,e)&&(r.$isGridSelection(n)?(t.preventDefault(),t.stopPropagation(),o.clearText(),!0):(r.$isRangeSelection(n)&&(t=i.$findMatchingParent(n.anchor.getNode(),(e=>c(e))),c(t)),!1))}),r.COMMAND_PRIORITY_CRITICAL)),o.listenersToRemove.add(n.registerCommand(r.FORMAT_TEXT_COMMAND,(t=>{let n=r.$getSelection();return!!E(n,e)&&(r.$isGridSelection(n)?(o.formatCells(t),!0):(r.$isRangeSelection(n)&&(t=i.$findMatchingParent(n.anchor.getNode(),(e=>c(e))),c(t)),!1))}),r.COMMAND_PRIORITY_CRITICAL)),o.listenersToRemove.add(n.registerCommand(r.CONTROLLED_TEXT_INSERTION_COMMAND,(()=>{var t=r.$getSelection();return!!E(t,e)&&(r.$isGridSelection(t)?o.clearHighlight():r.$isRangeSelection(t)&&(t=i.$findMatchingParent(t.anchor.getNode(),(e=>c(e))),c(t)),!1)}),r.COMMAND_PRIORITY_CRITICAL)),o.listenersToRemove.add(n.registerCommand(r.KEY_TAB_COMMAND,(t=>{var n=r.$getSelection();if(!E(n,e))return!1;if(r.$isRangeSelection(n)){let r=i.$findMatchingParent(n.anchor.getNode(),(e=>c(e)));if(!c(r))return!1;if(n.isCollapsed())return n=e.getCordsFromCellNode(r,o.grid),t.preventDefault(),b(o,e,n.x,n.y,t.shiftKey?"backward":"forward"),!0}return!1}),r.COMMAND_PRIORITY_CRITICAL)),o.listenersToRemove.add(n.registerCommand(r.FOCUS_COMMAND,(()=>e.isSelected()),r.COMMAND_PRIORITY_CRITICAL)),o.listenersToRemove.add(n.registerCommand(r.SELECTION_CHANGE_COMMAND,(()=>{let t=r.$getSelection();var n=r.$getPreviousSelection();if(t!==n&&(r.$isGridSelection(t)||r.$isGridSelection(n))&&o.gridSelection!==t)return o.updateTableGridSelection(r.$isGridSelection(t)&&e.isSelected()?t:null),!1;if(t&&r.$isRangeSelection(t)&&!t.isCollapsed()){var i=t.anchor.getNode();if(n=t.focus.getNode(),i=e.isParentOf(i),n=e.isParentOf(n),i&&!n||n&&!i){n=t.isBackward(),i=r.$createRangeSelection();let s=e.getIndexWithinParent(),a=e.getParentOrThrow().getKey();return i.anchor.set(t.anchor.key,t.anchor.offset,t.anchor.type),i.focus.set(a,n?s-1:s+1,"element"),l=!0,r.$setSelection(i),w(o),!0}}return o.hasHijackedSelectionStyles&&!e.isSelected()?(function(e){e.enableHighlightStyle(),_(e.grid,(e=>{let t=e.elem;e.highlighted=!1,t.style.removeProperty("background-color"),t.style.removeProperty("caret-color"),t.getAttribute("style")||t.removeAttribute("style")}))}(o),l=!1):!o.hasHijackedSelectionStyles&&e.isSelected()&&w(o),!1}),r.COMMAND_PRIORITY_CRITICAL)),o},t.getCellFromTarget=m,t.getTableSelectionFromTableElement=function(e){return e.__lexicalTableSelection}},4249:(e,t,n)=>{"use strict";const r=n(8083);e.exports=r},8083:(e,t,n)=>{"use strict";var r=n(5523);function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!e&&(e=s(),t&&(e=e.trim()),""===e)}function s(){return r.$getRoot().getTextContent()}function o(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||!i(e,!1))return!1;if(t=(e=r.$getRoot().getChildren()).length,1<t)return!1;for(let i=0;i<t;i++){var n=e[i];if(r.$isElementNode(n)){if("paragraph"!==n.__type||0!==n.__indent)return!1;let e=(n=n.getChildren()).length;for(let t=0;t<e;t++)if(!r.$isTextNode(n[i]))return!1}}return!0}t.$canShowPlaceholder=o,t.$canShowPlaceholderCurry=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return()=>o(e,t)},t.$findNodeWithOffsetFromJoinedText=function(e,t,n,i){let s=(i=i.getChildren()).length,o=0,a=!1;for(let c=0;c<s&&!(o>t);++c){let t=i[c],s=r.$isTextNode(t);var l=s?t.getTextContent().length:n;if(l=o+l,(!1===a&&o===e||0===o&&o===e||o<e&&e<=l)&&r.$isTextNode(t))return{node:t,offset:e-o};o=l,a=s}return null},t.$findTextIntersectionFromCharacters=function(e,t){var n=e.getFirstChild();e=0;e:for(;null!==n;){if(r.$isElementNode(n)){var i=n.getFirstChild();if(null!==i){n=i;continue}}else if(r.$isTextNode(n)){if(e+(i=n.getTextContentSize())>t)return{node:n,offset:t-e};e+=i}if(null===(i=n.getNextSibling())){for(n=n.getParent();null!==n;){if(null!==(i=n.getNextSibling())){n=i;continue e}n=n.getParent()}break}n=i}return null},t.$isRootTextContentEmpty=i,t.$isRootTextContentEmptyCurry=function(e,t){return()=>i(e,t)},t.$joinTextNodesInElementNode=function(e,t,n){let i="",s=(e=e.getChildren()).length;for(let o=0;o<s;++o){let s=e[o];if(r.$isTextNode(s)){let e=s.getTextContent();if(s.is(n.node)){if(n.offset>e.length)throw Error("Minified Lexical error #2; visit https://lexical.dev/docs/error?code=2 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");i+=s.getTextContent().substr(0,n.offset);break}i+=e}else i+=t}return i},t.$rootTextContent=s,t.registerLexicalTextEntity=function(e,t,n,i){let s=e=>{const t=r.$createTextNode(e.getTextContent());t.setFormat(e.getFormat()),e.replace(t)};return[e.registerNodeTransform(r.TextNode,(e=>{if(e.isSimpleText()){var o=e.getPreviousSibling(),a=e.getTextContent(),l=e;if(r.$isTextNode(o)){var c=o.getTextContent(),u=t(c+a);if(o instanceof n){if(null===u||0!==o.getLatest().__mode)return void s(o);if(0<(u=u.end-c.length))return l=c+(l=a.slice(0,u)),o.select(),o.setTextContent(l),void(u===a.length?e.remove():(o=a.slice(u),e.setTextContent(o)))}else if(null===u||u.start<c.length)return}for(;;){if(a=u=null===(e=t(a))?"":a.slice(e.end),""===u){if(c=l.getNextSibling(),r.$isTextNode(c)){if(u=l.getTextContent()+c.getTextContent(),null===(u=t(u))){c instanceof n?s(c):c.markDirty();break}if(0!==u.start)break}}else if(null!==(c=t(u))&&0===c.start)break;if(null===e)break;if(0===e.start&&r.$isTextNode(o)&&o.isTextEntity())continue;let d;if(0===e.start?[d,l]=l.splitText(e.end):[,d,l]=l.splitText(e.start,e.end),e=i(d),d.replace(e),null==l)break}}})),e=e.registerNodeTransform(n,(e=>{var i=e.getTextContent();const o=t(i);null===o||0!==o.start?s(e):i.length>o.end?e.splitText(o.end):(i=e.getPreviousSibling(),r.$isTextNode(i)&&i.isTextEntity()&&(s(i),s(e)),i=e.getNextSibling(),r.$isTextNode(i)&&i.isTextEntity()&&(s(i),e instanceof n&&s(e)))}))]}},4140:(e,t,n)=>{"use strict";const r=n(8693);e.exports=r},8693:(e,t,n)=>{"use strict";var r=n(5523);function i(e){throw Error("Minified Lexical error #".concat(e,"; visit https://lexical.dev/docs/error?code=").concat(e," for the full message or ")+"use the non-minified dev environment for full errors and additional helpful warnings.")}function s(e,t){for(;e!==r.$getRoot()&&null!=e;){if(t(e))return e;e=e.getParent()}return null}function o(e,t,n,s,a){var c=n._nodes.get(e.__type);for(var u in void 0===c&&i(5),e){var d=e[u];if(null!=d&&"object"===typeof d&&null!=(d=d.editorState)){var h=r.createEditor({namespace:d.namespace});h._nodes=n._nodes,h._parentEditor=n._parentEditor,h._pendingEditorState=l(h,d),e[u]=h}}if(c=c.klass,u=e.__key,e.__key=void 0,c=c.clone(e),e.__key=u,u=c.__key,a._nodeMap.set(u,c),c.__parent=s,r.$isElementNode(c)){for(s=e.__children,d=0;d<s.length;d++)void 0!==(h=t.get(s[d]))&&(h=o(h,t,n,u,a).__key,c.__children.push(h));c.__indent=e.__indent,c.__format=e.__format,c.__dir=e.__dir}else r.$isTextNode(c)&&(c.__format=e.__format,c.__style=e.__style,c.__mode=e.__mode,c.__detail=e.__detail);return c}function a(e,t){let n=new(0,t._editorState.constructor)(new Map),r=new Map(e._nodeMap),i=r.get("root");e=t._updating;try{t._updating=!1,t.update((()=>{let e=t._dirtyElements,s=t._dirtyLeaves,a=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._dirtyType=0;try{o(i,r,t,null,n)}finally{t._dirtyElements=e,t._dirtyLeaves=s,t._dirtyType=a}}))}finally{t._updating=e}return n._readOnly=!0,n}function l(e,t){return a(t="string"===typeof t?JSON.parse(t):t,e)}t.$dfs=function(e,t){let n=[];e=(e||r.$getRoot()).getLatest(),t=t||(r.$isElementNode(e)?e.getLastDescendant():e);for(var i=e,s=0;null!==(i=i.getParent());)s++;for(i=s;null!==e&&!e.is(t);)if(n.push({depth:i,node:e}),r.$isElementNode(e)&&0<e.getChildrenSize())e=e.getFirstChild(),i++;else for(s=null;null===s&&null!==e;)null===(s=e.getNextSibling())?(e=e.getParent(),i--):e=s;return null!==e&&e.is(t)&&n.push({depth:i,node:e}),n},t.$findMatchingParent=s,t.$getNearestBlockElementAncestorOrThrow=function(e){return e=s(e,(e=>r.$isElementNode(e)&&!e.isInline())),r.$isElementNode(e)||i(4),e},t.$getNearestNodeOfType=function(e,t){for(;null!=e;){if(e instanceof t)return e;e=e.getParent()}return null},t.$insertBlockNode=function(e){var t=r.$getSelection();return r.$isRangeSelection(t)?t.focus.getNode().getTopLevelElementOrThrow().insertAfter(e):r.$isNodeSelection(t)||r.$isGridSelection(t)?(t=t.getNodes())[t.length-1].getTopLevelElementOrThrow().insertAfter(e):r.$getRoot().append(e),t=r.$createParagraphNode(),e.insertAfter(t),t.select(),e.getLatest()},t.$restoreEditorState=function(e,t){let n=new Map(t._nodeMap),i=e._pendingEditorState;i&&(i._nodeMap=n),e._dirtyType=2,e=t._selection,r.$setSelection(null===e?null:e.clone())},t.addClassNamesToElement=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((t=>{"string"===typeof t&&e.classList.add(...t.split(" "))}))},t.mergeRegister=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return()=>{t.forEach((e=>e()))}},t.registerNestedElementResolver=function(e,t,n,r){return e.registerNodeTransform(t,(e=>{e:{for(var i=e.getChildren(),s=0;s<i.length;s++)if(i[s]instanceof t){i=null;break e}for(i=e;null!==i;)if(s=i,(i=i.getParent())instanceof t){i={child:s,parent:i};break e}i=null}if(null!==i){const{child:t,parent:o}=i;if(t.is(e)){if(r(o,e),i=(e=t.getNextSiblings()).length,o.insertAfter(t),0!==i){s=n(o),t.insertAfter(s);for(let t=0;t<i;t++)s.append(e[t])}o.canBeEmpty()||0!==o.getChildrenSize()||o.remove()}}}))},t.removeClassNamesFromElement=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((t=>{"string"===typeof t&&e.classList.remove(...t.split(" "))}))},t.unstable_convertLegacyJSONEditorState=l},5523:(e,t,n)=>{"use strict";const r=n(5885);e.exports=r},5885:(e,t)=>{"use strict";let n={},r={},i={},s={},o={},a={},l={},c={},u={},d={},h={},f={},p={},g={},m={},y={},v={},_={},w={},b={},T={},E={},S={},I={},N={},C={},k={},x={},A={},O={},R={},D={},P={},L={};function M(e){throw Error("Minified Lexical error #".concat(e,"; visit https://lexical.dev/docs/error?code=").concat(e," for the full message or ")+"use the non-minified dev environment for full errors and additional helpful warnings.")}let F="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,U=F&&"documentMode"in document?document.documentMode:null,B=F&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),V=F&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),j=!(!F||!("InputEvent"in window)||U)&&"getTargetRanges"in new window.InputEvent("input"),z=F&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),$=F&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,K=z||$?"\xa0":"\u200b",W=V?"\xa0":K,q=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,H=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,G={bold:1,code:16,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},Y={directionless:1,unmergeable:2},Q={center:2,justify:4,left:1,right:3},J={2:"center",4:"justify",1:"left",3:"right"},X={inert:3,normal:0,segmented:2,token:1},Z={3:"inert",0:"normal",2:"segmented",1:"token"},ee=!1,te=0;function ne(e){te=e.timeStamp}function re(e,t,n){return t.__lexicalLineBreak===e||void 0!==e["__lexicalKey_".concat(n._key)]}function ie(e,t,n){ee=!0;let r=100<performance.now()-te;try{xn(e,(()=>{let i=an()||function(e){return e.getEditorState().read((()=>{let e=an();return null!==e?e.clone():null}))}(e);var s=new Map,o=e.getRootElement(),a=e._editorState;let l=!1,c="";for(var u=0;u<t.length;u++){var d=t[u],h=d.type,f=d.target,p=Te(f,a);if(!Pn(p))if("characterData"===h){if(d=r&&rr(p))e:{h=f;var g=p;if(Kt(d=i)){var m=d.anchor.getNode();if(m.is(g)&&d.format!==m.getFormat()){d=!1;break e}}d=3===h.nodeType&&g.isAttached()}d&&(h=d=null,null!==(g=window.getSelection())&&g.anchorNode===f&&(d=g.anchorOffset,h=g.focusOffset),null!==(f=f.nodeValue)&&Re(p,f,d,h,!1))}else if("childList"===h){for(l=!0,h=d.addedNodes,g=0;g<h.length;g++){var y=be(m=h[g]),v=m.parentNode;null==v||null!==y||"BR"===m.nodeName&&re(m,v,e)||(V&&(y=m.innerText||m.nodeValue)&&(c+=y),v.removeChild(m))}if(0<(h=(d=d.removedNodes).length)){for(g=0,m=0;m<h;m++)"BR"===(v=d[m]).nodeName&&re(v,f,e)&&(f.appendChild(v),g++);h!==g&&(f===o&&(p=a._nodeMap.get("root")),s.set(f,p))}}}if(0<s.size)for(let[t,n]of s)if(Mn(n))for(s=n.__children,o=t.firstChild,a=0;a<s.length;a++)null!==(u=e.getElementByKey(s[a]))&&(null==o?(t.appendChild(u),o=u):o!==u&&t.replaceChild(u,o),o=o.nextSibling);else rr(n)&&n.markDirty();if(0<(s=n.takeRecords()).length){for(o=0;o<s.length;o++)for(a=(u=s[o]).addedNodes,u=u.target,p=0;p<a.length;p++)null==(d=(f=a[p]).parentNode)||"BR"!==f.nodeName||re(f,u,e)||d.removeChild(f);n.takeRecords()}null!==i&&(l&&(i.dirty=!0,Ne(i)),V&&Ue(e)&&i.insertRawText(c))}))}finally{ee=!1}}function se(e){let t=e._observer;if(null!==t){ie(e,t.takeRecords(),t)}}function oe(e){0===te&&ze(e).addEventListener("textInput",ne,!0),e._observer=new MutationObserver(((t,n)=>{ie(e,t,n)}))}let ae=1,le="function"===typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function ce(e,t,n){let r=e.getRootElement();try{var i;if(i=null!==r&&r.contains(t)&&r.contains(n)&&null!==t){let e=document.activeElement,n=null!==e?e.nodeName:null;i=!Pn(Te(t))||"INPUT"!==n&&"TEXTAREA"!==n}return i&&ue(t)===e}catch(s){return!1}}function ue(e){for(;null!=e;){let t=e.__lexicalEditor;if(null!=t)return t;e=e.parentNode}return null}function de(e){return he(e)||e.isSegmented()}function he(e){return e.isToken()||e.isInert()}function fe(e){for(;null!=e;){if(3===e.nodeType)return e;e=e.firstChild}return null}function pe(e,t,n){return e&(t=G[t])&&(null===n||0===(n&t))?e^t:null===n||n&t?e|t:e}function ge(e){return rr(e)||Wn(e)||Pn(e)}function me(e){var t=e.getParent();if(null!==t){let n=(t=t.getWritable().__children).indexOf(e.__key);-1===n&&M(31),ve(e),t.splice(n,1)}}function ye(e){99<yn&&M(14);var t=e.getLatest(),n=t.__parent,r=_n();let i=wn(),s=r._nodeMap;if(r=i._dirtyElements,null!==n)e:for(;null!==n&&!r.has(n);){let e=s.get(n);if(void 0===e)break;r.set(n,!1),n=e.__parent}t=t.__key,i._dirtyType=1,Mn(e)?r.set(t,!0):i._dirtyLeaves.add(t)}function ve(e){let t=e.getPreviousSibling();e=e.getNextSibling(),null!==t&&ye(t),null!==e&&ye(e)}function _e(e){vn();var t=wn();let n=t._compositionKey;e!==n&&(t._compositionKey=e,null!==n&&(null!==(t=we(n))&&t.getWritable()),null!==e&&(null!==(e=we(e))&&e.getWritable()))}function we(e,t){return void 0===(e=(t||_n())._nodeMap.get(e))?null:e}function be(e,t){let n=wn();return void 0!==(e=e["__lexicalKey_".concat(n._key)])?we(e,t):null}function Te(e,t){for(;null!=e;){let n=be(e,t);if(null!==n)return n;e=e.parentNode}return null}function Ee(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t}function Se(e){return e.read((()=>Ie().getTextContent()))}function Ie(){return _n()._nodeMap.get("root")}function Ne(e){let t=_n();null!==e&&(e.dirty=!0,e._cachedNodes=null),t._selection=e}function Ce(e){var t,n=wn();e:{for(t=e;null!=t;){let e=t["__lexicalKey_".concat(n._key)];if(void 0!==e){t=e;break e}t=t.parentNode}t=null}return null===t?e===(n=n.getRootElement())?we("root"):null:we(t)}function ke(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function xe(e){let t=[];for(;null!==e;)t.push(e),e=e._parentEditor;return t}function Ae(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function Oe(e,t){var n=window.getSelection();if(null!==n){var r=n.anchorNode,{anchorOffset:i,focusOffset:s}=n;if(null!==r&&3===r.nodeType&&rr(n=Te(r))){if((r=r.nodeValue)===K&&t){r=t,s=i=t.length}null!==r&&Re(n,r,i,s,e)}}}function Re(e,t,n,r,i){let s=e;if(s.isAttached()&&(i||!s.isDirty())){var o=s.isComposing();if(e=t,(o||i)&&t[t.length-1]===K&&(e=t.slice(0,-1)),t=s.getTextContent(),i||e!==t)if(""===e)if(_e(null),z||$)s.remove();else{let e=wn();setTimeout((()=>{e.update((()=>{s.isAttached()&&s.remove()}))}),20)}else i=s.getParent(),t=ln(),he(s)||null!==wn()._compositionKey&&!o||null!==i&&Kt(t)&&!i.canInsertTextBefore()&&0===t.anchor.offset?s.markDirty():(Kt(o=an())&&null!==n&&null!==r&&(o.setTextNodeRange(s,n,s,r),s.isSegmented()&&(n=nr(n=s.getTextContent()),s.replace(n),s=n)),s.setTextContent(e))}}function De(e,t){var n=e.anchor,r=e.focus,i=n.getNode(),s=window.getSelection();s=null!==s?s.anchorNode:null;let o=n.key,a=wn().getElementByKey(o),l=t.length;return(t=o!==r.key||!rr(i)||(2>l||ke(t))&&n.offset!==r.offset&&!i.isComposing()||de(i)||i.isDirty()&&1<l||null!==a&&!i.isComposing()&&s!==fe(a)||i.getFormat()!==e.format)||(i.isSegmented()?t=!0:e.isCollapsed()?(e=e.anchor.offset,t=i.getParentOrThrow(),n=i.isToken(),(r=0===e)&&!(r=!i.canInsertTextBefore()||!t.canInsertTextBefore()||n)&&(r=(rr(r=i.getPreviousSibling())||Mn(r)&&r.isInline())&&!r.canInsertTextAfter()),i=i.getTextContentSize()===e&&(!i.canInsertTextBefore()||!t.canInsertTextBefore()||n),t=r||i):t=!1),t}function Pe(e,t){var n=e[t];return"string"===typeof n?(n=n.split(" "),e[t]=n):n}function Le(e,t,n,r,i){0!==n.size&&(n=r.__key,void 0===(t=t.get(r.__type))&&M(33),t=t.klass,void 0===(r=e.get(t))&&(r=new Map,e.set(t,r)),r.has(n)||r.set(n,i))}function Me(e,t,n){let r=e.getParent(),i=n;return null!==r&&(t&&0===n?(i=e.getIndexWithinParent(),e=r):t||n!==e.getChildrenSize()||(i=e.getIndexWithinParent()+1,e=r)),e.getChildAtIndex(t?i-1:i)}function Fe(e,t){var n=e.offset;return"element"===e.type?Me(e=e.getNode(),t,n):(e=e.getNode(),t&&0===n||!t&&n===e.getTextContentSize()?null===(n=t?e.getPreviousSibling():e.getNextSibling())?Me(e.getParentOrThrow(),t,e.getIndexWithinParent()+(t?0:1)):n:null)}function Ue(e){return"insertFromPaste"===(e=(e=ze(e).event)&&e.inputType)||"insertFromPasteAsQuotation"===e}function Be(e){return!Un(e)&&!e.isLastChild()&&!e.isInline()}function Ve(e,t){return void 0===(e=e._keyToDOMMap.get(t))&&M(75),e}function je(e,t){for(e=e.getParent();null!==e;){if(e.is(t))return!0;e=e.getParent()}return!1}function ze(e){return null===(e=e._window)&&M(78),e}function $e(e,t,n,r,i){let s=(e=e.__children).length;for(let o=0;o<s;o++){let s=e[o],a=r.get(s);void 0!==a&&a.__parent===t&&(Mn(a)&&$e(a,s,n,r,i),n.has(s)||i.delete(s),r.delete(s))}}function Ke(e,t){let n=e.__mode,r=e.__format;e=e.__style;let i=t.__mode,s=t.__format;return t=t.__style,(null===n||n===i)&&(null===r||r===s)&&(null===e||e===t)}function We(e,t){let n=e.mergeWithSibling(t),r=wn()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function qe(e){if(""===e.__text&&e.isSimpleText()&&!e.isUnmergeable())e.remove();else{for(var t;null!==(t=e.getPreviousSibling())&&rr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){Ke(t,e)&&(e=We(t,e));break}t.remove()}for(var n;null!==(n=e.getNextSibling())&&rr(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){Ke(e,n)&&We(e,n);break}n.remove()}}}let He,Ge,Ye,Qe,Je,Xe,Ze,et,tt,nt,rt="",it="",st="",ot=!1,at=!1,lt=null;function ct(e,t){let n=Ze.get(e);if(null!==t){let n=bt(e);t.removeChild(n)}et.has(e)||Ge._keyToDOMMap.delete(e),Mn(n)&&ut(e=n.__children,0,e.length-1,null),void 0!==n&&Le(nt,Ye,Qe,n,"destroyed")}function ut(e,t,n,r){for(;t<=n;++t){let n=e[t];void 0!==n&&ct(n,r)}}function dt(e,t){e.setProperty("text-align",t)}function ht(e,t){e.style.setProperty("padding-inline-start",0===t?"":20*t+"px")}function ft(e,t){e=e.style,0===t?dt(e,""):1===t?dt(e,"left"):2===t?dt(e,"center"):3===t?dt(e,"right"):4===t&&dt(e,"justify")}function pt(e,t,n){let r=et.get(e);void 0===r&&M(60);let i=r.createDOM(He,Ge);var s=Ge._keyToDOMMap;if(i["__lexicalKey_"+Ge._key]=e,s.set(e,i),rr(r)?i.setAttribute("data-lexical-text","true"):Pn(r)&&i.setAttribute("data-lexical-decorator","true"),Mn(r)){0!==(e=r.__indent)&&ht(i,e);var o=(e=r.__children).length;if(0!==o){--o;let t=it;it="",gt(s=e,0,o,i,null),vt(r,i),it=t}0!==(s=r.__format)&&ft(i,s),yt(null,e,i),Be(r)&&(rt+="\n\n",st+="\n\n")}else s=r.getTextContent(),Pn(r)?(null!==(o=r.decorate(Ge,He))&&wt(e,o),i.contentEditable="false"):rr(r)&&(r.isDirectionless()||(it+=s),r.isInert()&&((e=i.style).pointerEvents="none",e.userSelect="none",i.contentEditable="false",e.setProperty("-webkit-user-select","none"))),rt+=s,st+=s;return null!==t&&(null!=n?t.insertBefore(i,n):null!=(n=t.__lexicalLineBreak)?t.insertBefore(i,n):t.appendChild(i)),Le(nt,Ye,Qe,r,"created"),i}function gt(e,t,n,r,i){let s=rt;for(rt="";t<=n;++t)pt(e[t],r,i);r.__lexicalTextContent=rt,rt=s+rt}function mt(e,t){return Wn(e=t.get(e[e.length-1]))||Pn(e)}function yt(e,t,n){e=null!==e&&(0===e.length||mt(e,Ze)),t=null!==t&&(0===t.length||mt(t,et)),e?t||(null!=(t=n.__lexicalLineBreak)&&n.removeChild(t),n.__lexicalLineBreak=null):t&&(t=document.createElement("br"),n.__lexicalLineBreak=t,n.appendChild(t))}function vt(e,t){var n=t.__lexicalDir;if(t.__lexicalDirTextContent!==it||n!==lt){let s=""===it;if(s)var r=lt;else r=it,r=q.test(r)?"rtl":H.test(r)?"ltr":null;if(r!==n){let o=t.classList,a=He.theme;var i=null!==n?a[n]:void 0;let l=null!==r?a[r]:void 0;void 0!==i&&("string"===typeof i&&(i=i.split(" "),i=a[n]=i),o.remove(...i)),null===r||s&&"ltr"===r?t.removeAttribute("dir"):(void 0!==l&&("string"===typeof l&&(n=l.split(" "),l=a[r]=n),void 0!==l&&o.add(...l)),t.dir=r),at||(e.getWritable().__dir=r)}lt=r,t.__lexicalDirTextContent=it,t.__lexicalDir=r}}function _t(e,t){var n=Ze.get(e),r=et.get(e);void 0!==n&&void 0!==r||M(61);var i=ot||Xe.has(e)||Je.has(e);let s=Ve(Ge,e);if(n===r&&!i)return Mn(n)?(void 0!==(r=s.__lexicalTextContent)&&(rt+=r,st+=r),void 0!==(r=s.__lexicalDirTextContent)&&(it+=r)):(r=n.getTextContent(),rr(n)&&!n.isDirectionless()&&(it+=r),st+=r,rt+=r),s;if(n!==r&&i&&Le(nt,Ye,Qe,r,"updated"),r.updateDOM(n,s,He))return r=pt(e,null,null),null===t&&M(62),t.replaceChild(r,s),ct(e,null),r;if(Mn(n)&&Mn(r)){if((e=r.__indent)!==n.__indent&&ht(s,e),(e=r.__format)!==n.__format&&ft(s,e),(e=n.__children)!==(n=r.__children)||i){var o=e,a=n;i=r,t=it,it="";let f=rt;rt="";var l=o.length,c=a.length;if(1===l&&1===c){var u=o[0];if(u===(a=a[0]))_t(u,s);else{var d=bt(u);a=pt(a,null,null),s.replaceChild(a,d),ct(u,null)}}else if(0===l)0!==c&&gt(a,0,c-1,s,null);else if(0===c)0!==l&&(ut(o,0,l-1,(u=null==s.__lexicalLineBreak)?null:s),u&&(s.textContent=""));else{let e=l-1;l=c-1;let t=s.firstChild,n=0;for(c=0;n<=e&&c<=l;){var h=o[n];let e=a[c];if(h===e)t=_t(e,s).nextSibling,n++,c++;else{void 0===u&&(u=new Set(o)),void 0===d&&(d=new Set(a));let r=d.has(h),i=u.has(e);r?(i?((h=Ve(Ge,e))===t?t=_t(e,s).nextSibling:(null!=t?s.insertBefore(h,t):s.appendChild(h),_t(e,s)),n++):pt(e,s,t),c++):(t=bt(h).nextSibling,ct(h,s),n++)}}d=c>l,(u=n>e)&&!d?gt(a,c,l,s,u=void 0===(u=a[l+1])?null:Ge.getElementByKey(u)):d&&!u&&ut(o,n,e,s)}Be(i)&&(rt+="\n\n"),s.__lexicalTextContent=rt,rt=f+rt,vt(i,s),it=t,Un(r)||yt(e,n,s)}Be(r)&&(rt+="\n\n",st+="\n\n")}else n=r.getTextContent(),Pn(r)?null!==(i=r.decorate(Ge,He))&&wt(e,i):rr(r)&&!r.isDirectionless()&&(it+=n),rt+=n,st+=n;return!at&&Un(r)&&r.__cachedText!==st&&((r=r.getWritable()).__cachedText=st),s}function wt(e,t){let n=Ge._pendingDecorators,r=Ge._decorators;if(null===n){if(r[e]===t)return;n=Ee(Ge)}n[e]=t}function bt(e){return void 0===(e=tt.get(e))&&M(75),e}let Tt=Object.freeze({}),Et=[["keydown",function(e,t){if(!0!==e._lexicalHandled&&(e._lexicalHandled=!0,St=e.timeStamp,It=e.keyCode,!t.isComposing())){var{keyCode:n,shiftKey:r,ctrlKey:o,metaKey:a,altKey:l}=e;if(39!==n||o||a||l)if(39!==n||l||r||!o&&!a)if(37!==n||o||a||l)if(37!==n||l||r||!o&&!a)if(38!==n||o||a)if(40!==n||o||a)if(13===n&&r)xt=!0,Nn(t,b,e);else if(32===n)Nn(t,T,e);else if(B&&o&&79===n)e.preventDefault(),xt=!0,Nn(t,s,!0);else if(13!==n||r){var c=B?!l&&!a&&(8===n||72===n&&o):!(o||l||a)&&8===n;c?8===n?Nn(t,E,e):(e.preventDefault(),Nn(t,i,!0)):27===n?Nn(t,S,e):(c=B?!(r||l||a)&&(46===n||68===n&&o):!(o||l||a)&&46===n)?46===n?Nn(t,I,e):(e.preventDefault(),Nn(t,i,!1)):8===n&&(B?l:o)?(e.preventDefault(),Nn(t,u,!0)):46===n&&(B?l:o)?(e.preventDefault(),Nn(t,u,!1)):B&&a&&8===n?(e.preventDefault(),Nn(t,d,!0)):B&&a&&46===n?(e.preventDefault(),Nn(t,d,!1)):66===n&&!l&&(B?a:o)?(e.preventDefault(),Nn(t,h,"bold")):85===n&&!l&&(B?a:o)?(e.preventDefault(),Nn(t,h,"underline")):73===n&&!l&&(B?a:o)?(e.preventDefault(),Nn(t,h,"italic")):9!==n||l||o||a?90===n&&!r&&(B?a:o)?(e.preventDefault(),Nn(t,f,void 0)):(c=B?90===n&&a&&r:89===n&&o||90===n&&o&&r)?(e.preventDefault(),Nn(t,p,void 0)):Gt(t._editorState._selection)&&((c=!r&&(67===n&&(B?a:o)))?(e.preventDefault(),Nn(t,O,e)):(c=!r&&(88===n&&(B?a:o)))&&(e.preventDefault(),Nn(t,R,e))):Nn(t,N,e)}else xt=!1,Nn(t,b,e);else Nn(t,w,e);else Nn(t,_,e);else Nn(t,v,e);else Nn(t,y,e);else Nn(t,m,e);else Nn(t,g,e);(o||r||l||a)&&Nn(t,L,e)}}],["mousedown",function(e,t){let n=e.target;n instanceof Node&&xn(t,(()=>{Pn(Te(n))||(kt=!0)}))}],["compositionstart",function(e,t){xn(t,(()=>{let n=an();if(Kt(n)&&!t.isComposing()){let r=n.anchor;_e(r.key),(e.timeStamp<St+30||"element"===r.type||!n.isCollapsed()||n.anchor.getNode().getFormat()!==n.format)&&Nn(t,a,W)}}))}],["compositionend",function(e,t){V?At=!0:xn(t,(()=>{Pt(t,e.data)}))}],["input",function(e,t){e.stopPropagation(),xn(t,(()=>{var n=an(),r=e.data;null!=r&&Kt(n)&&De(n,r)?(At&&(Pt(t,r),At=!1),Nn(t,a,r),r=r.length,V&&1<r&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=r),z||$||!t.isComposing()||(St=0,_e(null))):(Oe(!1),At&&(Pt(t,r||void 0),At=!1)),vn(),se(n=wn())}))}],["click",function(e,t){xn(t,(()=>{let n=an(),i=window.getSelection(),s=ln();if(Kt(n)){let e=n.anchor,t=e.getNode();i&&"element"===e.type&&0===e.offset&&n.isCollapsed()&&!Un(t)&&1===Ie().getChildrenSize()&&t.getTopLevelElementOrThrow().isEmpty()&&null!==s&&n.is(s)&&(i.removeAllRanges(),n.dirty=!0)}Nn(t,r,e)}))}],["cut",Tt],["copy",Tt],["dragstart",Tt],["dragover",Tt],["dragend",Tt],["paste",Tt],["focus",Tt],["blur",Tt],["drop",Tt]];j&&Et.push(["beforeinput",(e,t)=>function(e,t){let n=e.inputType;"deleteCompositionText"===n||V&&Ue(t)||"insertCompositionText"!==n&&xn(t,(()=>{let r=an();if("deleteContentBackward"===n){if(null===r){var g=ln();if(!Kt(g))return;Ne(g.clone())}if(Kt(r))return void(229===It&&e.timeStamp<St+30&&r.anchor.key===r.focus.key?(_e(null),St=0,setTimeout((()=>{xn(t,(()=>{_e(null)}))}),30),Kt(r)&&(g=r.anchor.getNode(),g.markDirty(),r.format=g.getFormat())):(e.preventDefault(),Nn(t,i,!0)))}if(Kt(r)){g=e.data,r.dirty||!r.isCollapsed()||Un(r.anchor.getNode())||function(e,t){t.getTargetRanges&&(t=t.getTargetRanges()[0])&&e.applyDOMRange(t)}(r,e);var m=r.focus,y=r.anchor.getNode();if(m=m.getNode(),"insertText"===n||"insertTranspose"===n)"\n"===g?(e.preventDefault(),Nn(t,s,!1)):"\n\n"===g?(e.preventDefault(),Nn(t,o,void 0)):null==g&&e.dataTransfer?(g=e.dataTransfer.getData("text/plain"),e.preventDefault(),r.insertRawText(g)):null!=g&&De(r,g)&&(e.preventDefault(),Nn(t,a,g));else switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Nn(t,a,e);break;case"insertFromComposition":_e(null),Nn(t,a,e);break;case"insertLineBreak":_e(null),Nn(t,s,!1);break;case"insertParagraph":_e(null),xt?(xt=!1,Nn(t,s,!1)):Nn(t,o,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Nn(t,l,e);break;case"deleteByComposition":(function(e,t){return e!==t||Mn(e)||Mn(t)||!he(e)||!he(t)})(y,m)&&Nn(t,c,void 0);break;case"deleteByDrag":case"deleteByCut":Nn(t,c,void 0);break;case"deleteContent":Nn(t,i,!1);break;case"deleteWordBackward":Nn(t,u,!0);break;case"deleteWordForward":Nn(t,u,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Nn(t,d,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Nn(t,d,!1);break;case"formatStrikeThrough":Nn(t,h,"strikethrough");break;case"formatBold":Nn(t,h,"bold");break;case"formatItalic":Nn(t,h,"italic");break;case"formatUnderline":Nn(t,h,"underline");break;case"historyUndo":Nn(t,f,void 0);break;case"historyRedo":Nn(t,p,void 0)}}}))}(e,t)]);let St=0,It=0,Nt=0,Ct=!1,kt=!1,xt=!1,At=!1,Ot=[0,0,"root",0];function Rt(e,t){return null!==e&&null!==e.nodeValue&&3===e.nodeType&&0!==t&&t!==e.nodeValue.length}function Dt(e,t,r){let{anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a}=e;Ct&&(Ct=!1,Rt(i,s)&&Rt(o,a))||xn(t,(()=>{if(r){if(ce(t,i,o)){var s=an();if(Kt(s)){var a=s.anchor,l=a.getNode();if(s.isCollapsed()){"Range"===e.type&&(s.dirty=!0);var c=ze(t).event;c=c?c.timeStamp:performance.now();let[n,r,i,o]=Ot;c<o+200&&a.offset===r&&a.key===i?s.format=n:"text"===a.type?s.format=l.getFormat():"element"===a.type&&(s.format=0)}else{a=127,l=!1;let e=(c=s.getNodes()).length;for(let t=0;t<e;t++){let e=c[t];if(rr(e)&&(l=!0,0===(a&=e.getFormat())))break}s.format=l?a:0}}Nn(t,n,void 0)}}else Ne(null)}))}function Pt(e,t){var n=e._compositionKey;if(_e(null),null!==n&&null!=t){if(""===t)return t=we(n),void(null!==(e=fe(e.getElementByKey(n)))&&null!==e.nodeValue&&rr(t)&&Re(t,e.nodeValue,null,null,!0));if("\n"===t[t.length-1]&&Kt(n=an()))return t=n.focus,n.anchor.set(t.key,t.offset,t.type),void Nn(e,b,null)}Oe(!0,t)}function Lt(e){let t=e.__lexicalEventHandles;return void 0===t&&(t=[],e.__lexicalEventHandles=t),t}let Mt=new Map;function Ft(){let e=window.getSelection();if(null!==e){var t=ue(e.anchorNode);if(null!==t){kt&&(kt=!1,xn(t,(()=>{var n=ln(),r=e.anchorNode;null!==r&&(1===(r=r.nodeType)||3===r)&&Ne(n=on(n,e,t))})));var n=xe(t),r=(n=n[n.length-1])._key,i=Mt.get(r),s=i||n;s!==t&&Dt(e,s,!1),Dt(e,t,!0),t!==n?Mt.set(r,t):i&&Mt.delete(r)}}}class Ut{constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),n=e.getNode(),r=this.offset;if(e=e.offset,Mn(t)){var i=t.getDescendantByIndex(r);t=null!=i?i:t}return Mn(n)&&(i=n.getDescendantByIndex(e),n=null!=i?i:n),t===n?r<e:t.isBefore(n)}getNode(){let e=we(this.key);return null===e&&M(20),e}set(e,t,n){let r=this._selection,i=this.key;this.key=e,this.offset=t,this.type=n,gn||(wn()._compositionKey===i&&_e(e),null!==r&&(r._cachedNodes=null,r.dirty=!0))}}function Bt(e,t){let n=t.__key,r=e.offset,i="element";if(rr(t))i="text",r>(t=t.getTextContentSize())&&(r=t);else if(!Mn(t)){var s=t.getNextSibling();rr(s)?(n=s.__key,r=0):(s=t.getParent())&&(n=s.__key,r=t.getIndexWithinParent()+1)}e.set(n,r,i)}function Vt(e,t){if(Mn(t)){let n=t.getLastDescendant();Mn(n)||rr(n)?Bt(e,n):Bt(e,t)}else Bt(e,t)}function jt(e,t,n){let r=e.getNode(),i=r.getChildAtIndex(e.offset),s=nr(),o=Un(r)?or().append(s):s;s.setFormat(n),null===i?r.append(o):i.insertBefore(o),e.is(t)&&t.set(s.__key,0,"text"),e.set(s.__key,0,"text")}function zt(e,t,n,r){e.key=t,e.offset=n,e.type=r}class $t{constructor(e){this.dirty=!1,this._nodes=e,this._cachedNodes=null}is(e){if(!Gt(e))return!1;let t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every((e=>n.has(e)))}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new $t(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(){}insertText(){}getNodes(){var e=this._cachedNodes;if(null!==e)return e;var t=this._nodes;e=[];for(let n of t)null!==(t=we(n))&&e.push(t);return gn||(this._cachedNodes=e),e}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function Kt(e){return e instanceof Ht}class Wt{constructor(e,t,n){this.gridKey=e,this.anchor=t,this.focus=n,this.dirty=!1,this._cachedNodes=null,t._selection=this,n._selection=this}is(e){return!!qt(e)&&(this.gridKey===e.gridKey&&this.anchor.is(this.focus))}set(e,t,n){this.dirty=!0,this.gridKey=e,this.anchor.key=t,this.focus.key=n,this._cachedNodes=null}clone(){return new Wt(this.gridKey,this.anchor,this.focus)}isCollapsed(){return!1}isBackward(){return this.focus.isBefore(this.anchor)}getCharacterOffsets(){return Qt(this)}extract(){return this.getNodes()}insertRawText(){}insertText(){}getShape(){var e=we(this.anchor.key);null===e&&M(21);var t=e.getIndexWithinParent();e=e.getParentOrThrow().getIndexWithinParent();var n=we(this.focus.key);null===n&&M(22);var r=n.getIndexWithinParent();let i=n.getParentOrThrow().getIndexWithinParent();return n=Math.min(t,r),t=Math.max(t,r),r=Math.min(e,i),e=Math.max(e,i),{fromX:Math.min(n,t),fromY:Math.min(r,e),toX:Math.max(n,t),toY:Math.max(r,e)}}getNodes(){var e=this._cachedNodes;if(null!==e)return e;e=new Set;let{fromX:t,fromY:n,toX:r,toY:i}=this.getShape();var s=we(this.gridKey);hr(s)||M(23),e.add(s),s=s.getChildren();for(let l=n;l<=i;l++){var o=s[l];e.add(o),pr(o)||M(24),o=o.getChildren();for(let n=t;n<=r;n++){var a=o[n];for(ur(a)||M(25),e.add(a),a=a.getChildren();0<a.length;){let t=a.shift();e.add(t),Mn(t)&&a.unshift(...t.getChildren())}}}return e=Array.from(e),gn||(this._cachedNodes=e),e}getTextContent(){let e=this.getNodes(),t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function qt(e){return e instanceof Wt}class Ht{constructor(e,t,n){this.anchor=e,this.focus=t,this.dirty=!1,this.format=n,this._cachedNodes=null,e._selection=this,t._selection=this}is(e){return!!Kt(e)&&(this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format)}isBackward(){return this.focus.isBefore(this.anchor)}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){var e=this._cachedNodes;if(null!==e)return e;var t=this.anchor,n=this.focus;e=t.getNode();let r=n.getNode();return Mn(e)&&(t=e.getDescendantByIndex(t.offset),e=null!=t?t:e),Mn(r)&&(n=r.getDescendantByIndex(n.offset),r=null!=n?n:r),e=e.is(r)?Mn(e)&&(0<e.getChildrenSize()||e.excludeFromCopy())?[]:[e]:e.getNodesBetween(r),gn||(this._cachedNodes=e),e}setTextNodeRange(e,t,n,r){zt(this.anchor,e.__key,t,"text"),zt(this.focus,n.__key,r,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],n=e[e.length-1],r=this.anchor.isBefore(this.focus),[i,s]=Qt(this),o="",a=!0;for(let l=0;l<e.length;l++){let c=e[l];if(Mn(c)&&!c.isInline())a||(o+="\n"),a=!c.isEmpty();else if(a=!1,rr(c)){let e=c.getTextContent();c===t?e=c===n?i<s?e.slice(i,s):e.slice(s,i):r?e.slice(i):e.slice(s):c===n&&(e=r?e.slice(0,s):e.slice(0,i)),o+=e}else!Pn(c)&&!Wn(c)||c===n&&this.isCollapsed()||(o+=c.getTextContent())}return o}applyDOMRange(e){let t=wn(),n=t.getEditorState()._selection;if(null!==(e=tn(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n))){var[r,i]=e;zt(this.anchor,r.key,r.offset,r.type),zt(this.focus,i.key,i.offset,i.type),this._cachedNodes=null}}clone(){let e=this.anchor,t=this.focus;return new Ht(new Ut(e.key,e.offset,e.type),new Ut(t.key,t.offset,t.type),this.format)}toggleFormat(e){this.format=pe(this.format,e,null),this.dirty=!0}hasFormat(e){return 0!==(this.format&G[e])}insertRawText(e){let t=e.split(/\r?\n/);if(1===t.length)this.insertText(e);else{e=[];let n=t.length;for(let r=0;r<n;r++){let i=t[r];""!==i&&e.push(nr(i)),r!==n-1&&e.push(Kn())}this.insertNodes(e)}}insertText(e){var t=this.anchor,n=this.focus,r=this.isCollapsed()||t.isBefore(n),i=this.format;r&&"element"===t.type?jt(t,n,i):r||"element"!==n.type||jt(n,t,i);var s=this.getNodes(),o=s.length,a=r?n:t;n=(r?t:n).offset;var l=a.offset;rr(t=s[0])||M(26),r=t.getTextContent().length;var c=t.getParentOrThrow(),u=s[o-1];if(this.isCollapsed()&&n===r&&(t.isSegmented()||t.isToken()||!t.canInsertTextAfter()||!c.canInsertTextAfter()&&null===t.getNextSibling())){var d=t.getNextSibling();if(rr(d)&&!de(d)||((d=nr()).setFormat(i),c.canInsertTextAfter()?t.insertAfter(d):c.insertAfter(d)),d.select(0,0),t=d,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===n&&(t.isSegmented()||t.isToken()||!t.canInsertTextBefore()||!c.canInsertTextBefore()&&null===t.getPreviousSibling())){if(rr(d=t.getPreviousSibling())&&!de(d)||((d=nr()).setFormat(i),c.canInsertTextBefore()?t.insertBefore(d):c.insertBefore(d)),d.select(),t=d,""!==e)return void this.insertText(e)}else if(t.isSegmented()&&n!==r)(c=nr(t.getTextContent())).setFormat(i),t.replace(c),t=c;else if(!(this.isCollapsed()||""===e||(d=u.getParent(),c.canInsertTextBefore()&&c.canInsertTextAfter()&&(!Mn(d)||d.canInsertTextBefore()&&d.canInsertTextAfter()))))return this.insertText(""),en(this.anchor,this.focus,null),void this.insertText(e);if(1===o)if(he(t))(e=nr(e)).select(),t.replace(e);else{if(s=t.getFormat(),n===l&&s!==i){if(""!==t.getTextContent())return(s=nr(e)).setFormat(i),s.select(),0===n?t.insertBefore(s):([o]=t.splitText(n),o.insertAfter(s)),void(s.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length));t.setFormat(i)}""===(t=t.spliceText(n,l-n,e,!0)).getTextContent()?t.remove():"text"===this.anchor.type&&(t.isComposing()?this.anchor.offset-=e.length:this.format=s)}else{i=new Set([...t.getParentKeys(),...u.getParentKeys()]);var h=Mn(t)?t:t.getParentOrThrow();if(c=Mn(u)?u:u.getParentOrThrow(),d=u,!h.is(c)&&c.isInline())do{d=c,c=c.getParentOrThrow()}while(c.isInline());"text"===a.type&&(0!==l||""===u.getTextContent())||"element"===a.type&&u.getIndexWithinParent()<l?rr(u)&&!he(u)&&l!==u.getTextContentSize()?(u.isSegmented()&&(a=nr(u.getTextContent()),u.replace(a),u=a),u=u.spliceText(0,l,""),i.add(u.__key)):(a=u.getParentOrThrow()).canBeEmpty()||1!==a.getChildrenSize()?u.remove():a.remove():i.add(u.__key),a=c.getChildren(),l=new Set(s),u=h.is(c),h=h.isInline()&&null===t.getNextSibling()?h:t;for(let e=a.length-1;0<=e;e--){let n=a[e];if(n.is(t)||Mn(n)&&n.isParentOf(t))break;n.isAttached()&&(!l.has(n)||n.is(d)?u||h.insertAfter(n):n.remove())}if(!u)for(a=c,l=null;null!==a;)(0===(c=(u=a.getChildren()).length)||u[c-1].is(l))&&(i.delete(a.__key),l=a),a=a.getParent();for(he(t)?n===r?t.select():((e=nr(e)).select(),t.replace(e)):""===(t=t.spliceText(n,r-n,e,!0)).getTextContent()?t.remove():t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length),e=1;e<o;e++)t=s[e],i.has(t.__key)||t.remove()}}removeText(){this.insertText("")}formatText(e){if(this.isCollapsed())this.toggleFormat(e),_e(null);else{var t=this.getNodes(),n=[];for(var r of t)rr(r)&&n.push(r);var i=n.length;if(0===i)this.toggleFormat(e),_e(null);else{r=this.anchor;var s=this.focus,o=this.isBackward();t=o?s:r,r=o?r:s;var a=0,l=n[0];if(s="element"===t.type?0:t.offset,"text"===t.type&&s===l.getTextContentSize()&&(a=1,l=n[1],s=0),null!=l){o=l.getFormatFlags(e,null);var c=i-1,u=n[c];if(i="text"===r.type?r.offset:u.getTextContentSize(),l.is(u))s!==i&&(0===s&&i===l.getTextContentSize()?l.setFormat(o):(e=l.splitText(s,i),(e=0===s?e[0]:e[1]).setFormat(o),"text"===t.type&&t.set(e.__key,0,"text"),"text"===r.type&&r.set(e.__key,i-s,"text")),this.format=o);else{0!==s&&([,l]=l.splitText(s),s=0),l.setFormat(o);var d=u.getFormatFlags(e,o);for(0<i&&(i!==u.getTextContentSize()&&([u]=u.splitText(i)),u.setFormat(d)),a+=1;a<c;a++){let t=n[a];if(!t.isToken()){let n=t.getFormatFlags(e,d);t.setFormat(n)}}"text"===t.type&&t.set(l.__key,s,"text"),"text"===r.type&&r.set(u.__key,i,"text"),this.format=o|d}}}}}insertNodes(e,t){this.isCollapsed()||this.removeText();var n=this.anchor,r=n.offset,i=n.getNode(),s=i;"element"===n.type&&(s=n.getNode(),n=s.getChildAtIndex(r-1),s=null===n?s:n),n=[];var o=i.getNextSiblings(),a=Un(i)?null:i.getTopLevelElementOrThrow();if(rr(i))if(s=i.getTextContent().length,0===r&&0!==s)s=null!==(s=i.getPreviousSibling())?s:i.getParentOrThrow(),n.push(i);else if(r===s)s=i;else{if(he(i))return!1;[s,i]=i.splitText(r),n.push(i)}i=s,n.push(...o),o=e[0];var l=!1,c=null;for(let f=0;f<e.length;f++){var u=e[f];if(Mn(u)&&!u.isInline()){if(u.is(o)){if(Mn(s)&&s.isEmpty()&&s.canReplaceWith(u)){s.replace(u),s=u,l=!0;continue}var d=u.getFirstDescendant();if(ge(d)){for(d=d.getParentOrThrow();d.isInline();)d=d.getParentOrThrow();if(l=(c=d.getChildren()).length,Mn(s))for(var h=0;h<l;h++)s.append(c[h]);else{for(h=l-1;0<=h;h--)s.insertAfter(c[h]);s=s.getParentOrThrow()}if(c=c[l-1],d.remove(),l=!0,d.is(u))continue}}rr(s)&&(null===a&&M(27),s=a)}else l&&!Pn(u)&&Un(s.getParent())&&M(28);l=!1,Mn(s)&&!s.isInline()?(c=u,Pn(u)&&u.isTopLevel()?s=s.insertAfter(u):Mn(u)?!u.canBeEmpty()&&u.isEmpty()||(Un(s)?(null!==(d=s.getChildAtIndex(r))?d.insertBefore(u):s.append(u),s=u):s=s.insertAfter(u)):(null!==(d=s.getFirstChild())?d.insertBefore(u):s.append(u),s=u)):!Mn(u)||Mn(u)&&u.isInline()||Pn(s)&&s.isTopLevel()?(c=u,s=s.insertAfter(u)):(u=s.getParentOrThrow(),Wn(s)&&s.remove(),s=u,f--)}if(t&&(rr(i)?i.select():rr(e=s.getPreviousSibling())?e.select():(e=s.getIndexWithinParent(),s.getParentOrThrow().select(e,e))),Mn(s)){if(e=rr(c)?c:Mn(c)&&c.isInline()?c.getLastDescendant():s.getLastDescendant(),t||(null===e?s.select():rr(e)?e.select():e.selectNext()),0!==n.length)for(t=s,e=n.length-1;0<=e;e--)a=(r=n[e]).getParentOrThrow(),!Mn(s)||nn(r)||Pn(r)&&r.isTopLevel()?Mn(s)||nn(r)?Mn(r)&&!r.canInsertAfter(s)?(Mn(i=a.constructor.clone(a))||M(29),i.append(r),s.insertAfter(i)):s.insertAfter(r):(s.insertBefore(r),s=r):(t===s?s.append(r):s.insertBefore(r),s=r),a.isEmpty()&&!a.canBeEmpty()&&a.remove()}else t||(rr(s)?s.select():(n=s.getParentOrThrow(),s=s.getIndexWithinParent()+1,n.select(s,s)));return!0}insertParagraph(){this.isCollapsed()||this.removeText();var e=this.anchor,t=e.offset,n=[];if("text"===e.type){var r=e.getNode(),i=r.getNextSiblings().reverse(),s=r.getParentOrThrow(),o=s.isInline(),a=o?s.getTextContentSize():r.getTextContentSize();0===t?i.push(r):(o&&(n=s.getNextSiblings()),t===a||o&&t===r.getTextContentSize()||([,r]=r.splitText(t),i.push(r)))}else{if(Un(s=e.getNode()))return i=or(),n=s.getChildAtIndex(t),i.select(),void(null!==n?n.insertBefore(i):s.append(i));i=s.getChildren().slice(t).reverse()}if(r=i.length,0===t&&0<r&&s.isInline()){if(Mn(i=(n=s.getParentOrThrow()).insertNewAfter(this)))for(n=n.getChildren(),s=0;s<n.length;s++)i.append(n[s])}else if(null===(o=s.insertNewAfter(this)))this.insertLineBreak();else if(Mn(o))if(a=s.getFirstChild(),0===t&&(s.is(e.getNode())||a&&a.is(e.getNode()))&&0<r)s.insertBefore(o);else{if(s=null,t=n.length,e=o.getParentOrThrow(),0<t)for(a=0;a<t;a++)e.append(n[a]);if(0!==r)for(n=0;n<r;n++)t=i[n],null===s?o.append(t):s.insertBefore(t),s=t;o.canBeEmpty()||0!==o.getChildrenSize()?o.selectStart():(o.selectPrevious(),o.remove())}}insertLineBreak(e){let t=Kn();var n=this.anchor;"element"===n.type&&(Un(n=n.getNode())&&this.insertParagraph()),e?this.insertNodes([t],!0):this.insertNodes([t])&&t.selectNext(0,0)}getCharacterOffsets(){return Qt(this)}extract(){var e=this.getNodes(),t=e.length,n=t-1,r=this.anchor;let i=this.focus;var s=e[0];let o=e[n],[a,l]=Qt(this);return 0===t?[]:1===t?rr(s)&&!this.isCollapsed()?(e=a>l?l:a,n=s.splitText(e,a>l?a:l),null!=(e=0===e?n[0]:n[1])?[e]:[]):[s]:(t=r.isBefore(i),rr(s)&&((r=t?a:l)===s.getTextContentSize()?e.shift():0!==r&&([,s]=s.splitText(r),e[0]=s)),rr(o)&&(s=o.getTextContent().length,0===(t=t?l:a)?e.pop():t!==s&&([o]=o.splitText(t),e[n]=o)),e)}modify(e,t,n){var r=this.focus,i=this.anchor,s="move"===e,o=Fe(r,t);Pn(o)&&!o.isIsolated()?s?((s=sn()).add(o.__key),Ne(s)):rr(e=t?o.getPreviousSibling():o.getNextSibling())?(o=e.__key,t=t?e.getTextContent().length:0,r.set(o,t,"text"),s&&i.set(o,t,"text")):(n=o.getParentOrThrow(),Mn(e)?(n=e.__key,o=t?e.getChildrenSize():0):(o=o.getIndexWithinParent(),n=n.__key,t||o++),r.set(n,o,"element"),s&&i.set(n,o,"element")):(r=window.getSelection())&&(r.modify(e,t?"backward":"forward",n),0<r.rangeCount&&(t=r.getRangeAt(0),this.applyDOMRange(t),this.dirty=!0,s||r.anchorNode===t.startContainer&&r.anchorOffset===t.startOffset||(s=this.focus,r=(t=this.anchor).key,i=t.offset,o=t.type,zt(t,s.key,s.offset,s.type),zt(s,r,i,o),this._cachedNodes=null)))}deleteCharacter(e){if(this.isCollapsed()){var t=this.anchor,n=this.focus,r=t.getNode();if(!e&&("element"===t.type&&Mn(r)&&t.offset===r.getChildrenSize()||"text"===t.type&&t.offset===r.getTextContentSize())&&(Mn(r=r.getNextSibling()||r.getParentOrThrow().getNextSibling())&&!r.canExtractContents()))return;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&("element"===t.type?t.getNode():t.getNode().getParentOrThrow()).collapseAtStart(this))return}else{var i="text"===n.type?n.getNode():null;if(r="text"===t.type?t.getNode():null,null!==i&&i.isSegmented()){if(t=n.offset,n=i.getTextContentSize(),i.is(r)||e&&t!==n||!e&&0!==t)return void Jt(i,e,t)}else if(null!==r&&r.isSegmented()&&(t=t.offset,n=r.getTextContentSize(),r.is(i)||e&&0!==t||!e&&t!==n))return void Jt(r,e,t);if(r=this.anchor,i=this.focus,(t=r.getNode())===(n=i.getNode())&&"text"===r.type&&"text"===i.type){var s=r.offset,o=i.offset;let a=s<o;(n=a?s:o)!==(s=(o=a?o:s)-1)&&(ke(t=t.getTextContent().slice(n,o))||(e?i.offset=s:r.offset=s))}}}this.removeText()}deleteLine(e){this.isCollapsed()&&("text"===this.anchor.type&&this.modify("extend",e,"lineboundary"),0===(e?this.focus:this.anchor).offset&&this.modify("extend",e,"character")),this.removeText()}deleteWord(e){this.isCollapsed()&&this.modify("extend",e,"word"),this.removeText()}}function Gt(e){return e instanceof $t}function Yt(e){let t=e.offset;return"text"===e.type?t:t===(e=e.getNode()).getChildrenSize()?e.getTextContent().length:0}function Qt(e){let t=e.anchor;return e=e.focus,"element"===t.type&&"element"===e.type&&t.key===e.key&&t.offset===e.offset?[0,0]:[Yt(t),Yt(e)]}function Jt(e,t,n){let r=e.getTextContent().split(/(?=\s)/g),i=r.length,s=0,o=0;for(let a=0;a<i;a++){let e=a===i-1;if(o=s,s+=r[a].length,t&&s===n||s>n||e){r.splice(a,1),e&&(o=void 0);break}}""===(t=r.join("").trim())?e.remove():(e.setTextContent(t),e.select(o,o))}function Xt(e,t,n){var r=t;if(1===e.nodeType){let o=!1;var i=e.childNodes,s=i.length;if(r===s&&(o=!0,r=s-1),rr(i=Ce(i[r])))r=o?i.getTextContentSize():0;else{if(null===(s=Ce(e)))return null;if(Mn(s)?((t=Mn(e=s.getChildAtIndex(r)))&&(t=e.getParent(),t=null===n||null===t||!t.canBeEmpty()||t!==n.getNode()),t&&(null===(n=o?e.getLastDescendant():e.getFirstDescendant())?(s=e,r=0):s=(e=n).getParentOrThrow()),rr(e)?(i=e,s=null,r=o?e.getTextContentSize():0):e!==s&&o&&r++):(r=s.getIndexWithinParent(),r=0===t&&Pn(s)&&Ce(e)===s?r:r+1,s=s.getParentOrThrow()),Mn(s))return new Ut(s.__key,r,"element")}}else i=Ce(e);return rr(i)?new Ut(i.__key,r,"text"):null}function Zt(e,t,n){var r=e.offset,i=e.getNode();0===r?(r=i.getPreviousSibling(),i=i.getParent(),t?(n||!t)&&null===r&&Mn(i)&&i.isInline()&&(rr(t=i.getPreviousSibling())&&(e.key=t.__key,e.offset=t.getTextContent().length)):Mn(r)&&!n&&r.isInline()?(e.key=r.__key,e.offset=r.getChildrenSize(),e.type="element"):rr(r)&&!r.isInert()&&(e.key=r.__key,e.offset=r.getTextContent().length)):r===i.getTextContent().length&&(r=i.getNextSibling(),i=i.getParent(),t&&Mn(r)&&r.isInline()?(e.key=r.__key,e.offset=0,e.type="element"):(n||t)&&null===r&&Mn(i)&&i.isInline()&&!i.canInsertTextAfter()&&(rr(t=i.getNextSibling())&&(e.key=t.__key,e.offset=0)))}function en(e,t,n){if("text"===e.type&&"text"===t.type){var r=e.isBefore(t);let i=e.is(t);Zt(e,r,i),Zt(t,!r,i),i&&(t.key=e.key,t.offset=e.offset,t.type=e.type),(r=wn()).isComposing()&&r._compositionKey!==e.key&&Kt(n)&&(r=n.anchor,n=n.focus,zt(e,r.key,r.offset,r.type),zt(t,n.key,n.offset,n.type))}}function tn(e,t,n,r,i,s){return null!==e&&null!==n&&ce(i,e,n)?null===(t=Xt(e,t,Kt(s)?s.anchor:null))||null===(r=Xt(n,r,Kt(s)?s.focus:null))||"element"===t.type&&"element"===r.type&&(e=Ce(e),n=Ce(n),Pn(e)&&Pn(n))?null:(en(t,r,s),[t,r]):null}function nn(e){return Mn(e)&&!e.isInline()}function rn(e,t,n,r,i,s){let o=_n();return(e=new Ht(new Ut(e,t,i),new Ut(n,r,s),0)).dirty=!0,o._selection=e}function sn(){return new $t(new Set)}function on(e,t,n){var r=n._window;if(null===r)return null;var i=r.event,s=i?i.type:void 0;let o;if(r="selectionchange"===s,i=!ee&&(r||"beforeinput"===s||"compositionstart"===s||"compositionend"===s||"click"===s&&i&&3===i.detail||void 0===s),Kt(e)&&!i)return e.clone();if(null===t)return null;if(i=t.anchorNode,s=t.focusNode,o=t.anchorOffset,t=t.focusOffset,r&&Kt(e)&&!ce(n,i,s))return e.clone();if(null===(n=tn(i,o,s,t,n,e)))return null;let[a,l]=n;return new Ht(a,l,Kt(e)?e.format:0)}function an(){return _n()._selection}function ln(){return wn()._editorState._selection}function cn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;var i=e.anchor,s=e.focus,o=i.getNode(),a=s.getNode();if(t.is(o)||t.is(a))if(o=t.__key,e.isCollapsed())n<=(t=i.offset)&&(n=Math.max(0,t+r),i.set(o,n,"element"),s.set(o,n,"element"),un(e));else{var l=e.isBackward(),c=(a=l?s:i).getNode();s=(i=l?i:s).getNode(),t.is(c)&&(n<=(c=a.offset)&&a.set(o,Math.max(0,c+r),"element")),t.is(s)&&(n<=(t=i.offset)&&i.set(o,Math.max(0,t+r),"element")),un(e)}}function un(e){var t=e.anchor,n=t.offset;let r=e.focus;var i=r.offset,s=t.getNode(),o=r.getNode();if(e.isCollapsed())Mn(s)&&(rr(o=(i=n>=(o=s.getChildrenSize()))?s.getChildAtIndex(o-1):s.getChildAtIndex(n))&&(n=0,i&&(n=o.getTextContentSize()),t.set(o.__key,n,"text"),r.set(o.__key,n,"text")));else{if(Mn(s)){let r=s.getChildrenSize();rr(n=(e=n>=r)?s.getChildAtIndex(r-1):s.getChildAtIndex(n))&&(s=0,e&&(s=n.getTextContentSize()),t.set(n.__key,s,"text"))}Mn(o)&&(rr(i=(t=i>=(n=o.getChildrenSize()))?o.getChildAtIndex(n-1):o.getChildAtIndex(i))&&(o=0,t&&(o=i.getTextContentSize()),r.set(i.__key,o,"text")))}}function dn(e,t,n,r,i){let s=null,o=0,a=null;null!==r?(s=r.__key,rr(r)?(o=r.getTextContentSize(),a="text"):Mn(r)&&(o=r.getChildrenSize(),a="element")):null!==i&&(s=i.__key,rr(i)?a="text":Mn(i)&&(a="element")),null!==s&&null!==a?e.set(s,o,a):(o=t.getIndexWithinParent(),-1===o&&(o=n.getChildrenSize()),e.set(n.__key,o,"element"))}function hn(e,t,n,r,i){"text"===e.type?(e.key=n,t||(e.offset+=i)):e.offset>r.getIndexWithinParent()&&--e.offset}let fn=null,pn=null,gn=!1,mn=!1,yn=0;function vn(){gn&&M(13)}function _n(){return null===fn&&M(15),fn}function wn(){return null===pn&&M(16),pn}function bn(e,t,n){var r=t.__type;let i=e._nodes.get(r);for(void 0===i&&M(30),void 0===(e=n.get(r))&&(e=Array.from(i.transforms),n.set(r,e)),n=e.length,r=0;r<n&&(e[r](t),t.isAttached());r++);}function Tn(e,t){var n=t.get(e.type);if(void 0===n&&M(17),n=n.klass,e.type!==n.getType()&&M(18),n=n.importJSON(e),e=e.children,Mn(n)&&Array.isArray(e))for(let r=0;r<e.length;r++){let i=Tn(e[r],t);n.append(i)}return n}function En(e,t){let n=fn,r=gn,i=pn;fn=e,gn=!0,pn=null;try{return t()}finally{fn=n,gn=r,pn=i}}function Sn(e){var t=e._pendingEditorState,n=e._rootElement,r=e._headless;if((null!==n||r)&&null!==t){var i=e._editorState,s=i._selection,o=t._selection,a=0!==e._dirtyType,l=fn,c=gn,u=pn,d=e._updating,h=e._observer,f=null;if(e._pendingEditorState=null,e._editorState=t,!r&&a&&null!==h){pn=e,fn=t,gn=!1,e._updating=!0;try{var p=e._dirtyType,g=e._dirtyElements,m=e._dirtyLeaves;h.disconnect(),it=st=rt="",ot=2===p,lt=null,Ge=e,He=e._config,Ye=e._nodes,Qe=Ge._listeners.mutation,Je=g,Xe=m,Ze=i._nodeMap,et=t._nodeMap,at=t._readOnly,tt=new Map(e._keyToDOMMap);var y=new Map;nt=y,_t("root",null),nt=tt=He=et=Ze=Xe=Je=Ye=Ge=void 0,f=y}catch(R){if(R instanceof Error&&e._onError(R),mn)throw R;return ar(e,null,n,t),oe(e),e._dirtyType=2,mn=!0,Sn(e),void(mn=!1)}finally{h.observe(n,{characterData:!0,childList:!0,subtree:!0}),e._updating=d,fn=l,gn=c,pn=u}}t._readOnly||(t._readOnly=!0),d=e._dirtyLeaves,h=e._dirtyElements,y=e._normalizedNodes,p=e._updateTags,m=e._pendingDecorators,c=e._deferred,a&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),g=e._decorators;var v=e._pendingDecorators||g,_=t._nodeMap;for(A in v)_.has(A)||(v===g&&(v=Ee(e)),delete v[A]);if(r=r?null:window.getSelection(),e._editable&&null!==r&&(a||null===o||o.dirty)){pn=e,fn=t;try{e:{let t=r.anchorNode,i=r.focusNode,l=r.anchorOffset,c=r.focusOffset,u=document.activeElement;if(!p.has("collaboration")||u===n)if(Kt(o)){var w=o.anchor,b=o.focus,T=w.key,E=b.key,S=Ve(e,T),I=Ve(e,E),N=w.offset,C=b.offset,k=o.format,x=o.isCollapsed();a=S,E=I;var A=!1;if("text"===w.type&&(a=fe(S),A=w.getNode().getFormat()!==k),"text"===b.type&&(E=fe(I)),null!==a&&null!==E){if(x&&(null===s||A||Kt(s)&&s.format!==k)){var O=performance.now();Ot=[k,N,T,O]}if(l===N&&c===C&&t===a&&i===E&&("Range"!==r.type||!x)&&(null===n||null!==u&&n.contains(u)||n.focus({preventScroll:!0}),!$&&!z||"element"!==w.type))break e;try{if(r.setBaseAndExtent(a,N,E,C),o.isCollapsed()&&null!==n&&n===u){let t=w.getNode();if(Mn(t)){let e=t.getDescendantByIndex(w.offset);null!==e&&(t=e)}let r=e.getElementByKey(t.__key);if(null!==r){let t=r.getBoundingClientRect();if(t.bottom>ze(e).innerHeight)r.scrollIntoView(!1);else if(0>t.top)r.scrollIntoView();else{let e=n.getBoundingClientRect();Math.floor(t.bottom)>Math.floor(e.bottom)?r.scrollIntoView(!1):Math.floor(t.top)<Math.floor(e.top)&&r.scrollIntoView()}p.add("scroll-into-view")}}Ct=!0}catch(D){}}}else null!==s&&ce(e,t,i)&&r.removeAllRanges()}}finally{pn=u,fn=l}}if(null!==f)for(n=f,o=(s=Array.from(e._listeners.mutation)).length,l=0;l<o;l++){let[e,t]=s[l];void 0!==(u=n.get(t))&&e(u,{dirtyLeaves:d,updateTags:p})}if(null!==m&&(e._decorators=m,e._pendingDecorators=null,In("decorator",e,!0,m)),(n=Se(i))!==(s=Se(t))&&In("textcontent",e,!0,s),In("update",e,!0,{dirtyElements:h,dirtyLeaves:d,editorState:t,normalizedNodes:y,prevEditorState:i,tags:p}),e._deferred=[],0!==c.length){t=e._updating,e._updating=!0;try{for(i=0;i<c.length;i++)c[i]()}finally{e._updating=t}}if(0!==(t=e._updates).length&&(t=t.shift())){let[n,r]=t;kn(e,n,r)}}}function In(e,t,n){let r=t._updating;t._updating=n;try{let n=Array.from(t._listeners[e]);for(var i=arguments.length,s=new Array(i>3?i-3:0),o=3;o<i;o++)s[o-3]=arguments[o];for(e=0;e<n.length;e++)n[e].apply(null,s)}finally{t._updating=r}}function Nn(e,t,n){if(!1===e._updating||pn!==e){let r=!1;return e.update((()=>{r=Nn(e,t,n)})),r}let r=xe(e);for(let s=4;0<=s;s--)for(let o=0;o<r.length;o++){var i=r[o]._commands.get(t);if(void 0!==i&&void 0!==(i=i[s])){let t=(i=Array.from(i)).length;for(let r=0;r<t;r++)if(!0===i[r](n,e))return!0}}return!1}function Cn(e,t){let n=e._updates;for(t=t||!1;0!==n.length;){var r=n.shift();if(r){let n,[i,s]=r;void 0!==s&&(r=s.onUpdate,n=s.tag,s.skipTransforms&&(t=!0),r&&e._deferred.push(r),n&&e._updateTags.add(n)),i()}}return t}function kn(e,t,n){let r=e._updateTags;var i=!1;if(void 0!==n){var s=n.onUpdate;null!=(i=n.tag)&&r.add(i),i=n.skipTransforms||!1}s&&e._deferred.push(s),n=e._editorState;let o=!1;(null===(s=e._pendingEditorState)||s._readOnly)&&(s=e._pendingEditorState=new jn(new Map(n._nodeMap)),o=!0);let a=fn,l=gn,c=pn,u=e._updating;fn=s,gn=!1,e._updating=!0,pn=e;try{o&&!e._headless&&(s._selection=function(e){let t=e.getEditorState()._selection,n=window.getSelection();return Gt(t)||qt(t)?t.clone():on(t,n,e)}(e));let r=e._compositionKey;t(),i=Cn(e,i),function(e,t){if(t=t.getEditorState()._selection,Kt(e=e._selection)){var n=e.anchor;let r,i=e.focus;"text"===n.type&&(r=n.getNode(),r.selectionTransform(t,e)),"text"===i.type&&r!==(n=i.getNode())&&n.selectionTransform(t,e)}}(s,e),0!==e._dirtyType&&(i?function(e,t){t=t._dirtyLeaves,e=e._nodeMap;for(let n of t)rr(t=e.get(n))&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&qe(t)}(s,e):function(e,t){let n=t._dirtyLeaves,r=t._dirtyElements;e=e._nodeMap;let i=wn()._compositionKey,s=new Map;var o=n;let a=o.size;for(var l=r,c=l.size;0<a||0<c;){if(0<a){t._dirtyLeaves=new Set;for(let r of o)rr(o=e.get(r))&&o.isAttached()&&o.isSimpleText()&&!o.isUnmergeable()&&qe(o),void 0!==o&&void 0!==o&&o.__key!==i&&o.isAttached()&&bn(t,o,s),n.add(r);if(a=(o=t._dirtyLeaves).size,0<a){yn++;continue}}t._dirtyLeaves=new Set,t._dirtyElements=new Map;for(let n of l)l=n[0],c=n[1],("root"===l||c)&&(void 0!==(o=e.get(l))&&void 0!==o&&o.__key!==i&&o.isAttached()&&bn(t,o,s),r.set(l,c));a=(o=t._dirtyLeaves).size,c=(l=t._dirtyElements).size,yn++}t._dirtyLeaves=n,t._dirtyElements=r}(s,e),Cn(e),function(e,t,n,r){e=e._nodeMap,t=t._nodeMap;for(let i of n){let r=t.get(i);void 0===r||r.isAttached()||(e.has(i)||n.delete(i),t.delete(i))}for(let[i]of r)void 0===(n=t.get(i))||n.isAttached()||(Mn(n)&&$e(n,i,e,t,r),e.has(i)||r.delete(i),t.delete(i))}(n,s,e._dirtyLeaves,e._dirtyElements)),r!==e._compositionKey&&(s._flushSync=!0);let a=s._selection;if(Kt(a)){let e=s._nodeMap,t=a.focus.key;void 0!==e.get(a.anchor.key)&&void 0!==e.get(t)||M(19)}else Gt(a)&&0===a._nodes.size&&(s._selection=null)}catch(d){return d instanceof Error&&e._onError(d),e._pendingEditorState=n,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Sn(e)}finally{fn=a,gn=l,pn=c,e._updating=u,yn=0}0!==e._dirtyType||function(e,t){if(t=t.getEditorState()._selection,e=e._selection,null!==e){if(e.dirty||!e.is(t))return!0}else if(null!==t)return!0;return!1}(s,e)?s._flushSync?(s._flushSync=!1,Sn(e)):o&&le((()=>{Sn(e)})):(s._flushSync=!1,o&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function xn(e,t,n){e._updating?e._updates.push([t,n]):kn(e,t,n)}function An(e,t,n){vn();var r=e.__key;let i=e.getParent();if(null!==i){var s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0!==t&&M(1),t=an(),!Kt(t)||!Mn(e))return t;let{anchor:n,focus:r}=t,i=n.getNode(),s=r.getNode();return je(i,e)&&n.set(e.__key,0,"element"),je(s,e)&&r.set(e.__key,0,"element"),t}(e),o=!1;if(Kt(s)&&t){var a=s.anchor;let t=s.focus;a.key===r&&(dn(a,e,i,e.getPreviousSibling(),e.getNextSibling()),o=!0),t.key===r&&(dn(t,e,i,e.getPreviousSibling(),e.getNextSibling()),o=!0)}-1===(r=(a=i.getWritable().__children).indexOf(r))&&M(31),ve(e),a.splice(r,1),e.getWritable().__parent=null,Kt(s)&&t&&!o&&cn(s,i,r,-1),n||null===i||Un(i)||i.canBeEmpty()||!i.isEmpty()||An(i,t),null!==i&&Un(i)&&i.isEmpty()&&i.selectEnd()}}function On(e){return null===(e=we(e))&&M(63),e}class Rn{static getType(){M(64)}static clone(){M(65)}constructor(e){if(this.__type=this.constructor.getType(),this.__parent=null,null!=e)this.__key=e;else{vn(),99<yn&&M(14),e=wn();var t=_n(),n=""+ae++;t._nodeMap.set(n,this),Mn(this)?e._dirtyElements.set(n,!0):e._dirtyLeaves.add(n),e._cloneNotNeeded.add(n),e._dirtyType=1,this.__key=n}}getType(){return this.__type}isAttached(){for(var e=this.__key;null!==e;){if("root"===e)return!0;if(null===(e=we(e)))break;e=e.__parent}return!1}isSelected(){let e=an();if(null==e)return!1;let t=e.getNodes().some((e=>e.__key===this.__key));return(rr(this)||!Kt(e)||"element"!==e.anchor.type||"element"!==e.focus.type||e.anchor.key!==e.focus.key||e.anchor.offset!==e.focus.offset)&&t}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();return null===e?-1:e.__children.indexOf(this.__key)}getParent(){let e=this.getLatest().__parent;return null===e?null:we(e)}getParentOrThrow(){let e=this.getParent();return null===e&&M(66),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(Un(t)&&(Mn(e)||Pn(e)&&e.isTopLevel()))return e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&M(67),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){var e=this.getParent();if(null===e)return null;let t=(e=e.__children).indexOf(this.__key);return 0>=t?null:we(e[t-1])}getPreviousSiblings(){var e=this.getParent();if(null===e)return[];let t=(e=e.__children).indexOf(this.__key);return e.slice(0,t).map((e=>On(e)))}getNextSibling(){var e=this.getParent();if(null===e)return null;let t=(e=e.__children).length,n=e.indexOf(this.__key);return n>=t-1?null:we(e[n+1])}getNextSiblings(){var e=this.getParent();if(null===e)return[];let t=(e=e.__children).indexOf(this.__key);return e.slice(t+1).map((e=>On(e)))}getCommonAncestor(e){let t=this.getParents();var n=e.getParents();Mn(this)&&t.unshift(this),Mn(e)&&n.unshift(e),e=t.length;var r=n.length;if(0===e||0===r||t[e-1]!==n[r-1])return null;for(n=new Set(n),r=0;r<e;r++){let e=t[r];if(n.has(e))return e}return null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;var t=this.getCommonAncestor(e);let n=this;for(;;){var r=n.getParentOrThrow();if(r===t){r=r.__children.indexOf(n.__key);break}n=r}for(n=e;;){if((e=n.getParentOrThrow())===t){t=e.__children.indexOf(n.__key);break}n=e}return r<t}isParentOf(e){let t=this.__key;if(t===e.__key)return!1;for(;null!==e;){if(e.__key===t)return!0;e=e.getParent()}return!1}getNodesBetween(e){let t=this.isBefore(e),n=[],r=new Set;for(var i=this;;){var s=i.__key;if(r.has(s)||(r.add(s),n.push(i)),i===e)break;if(null!==(s=Mn(i)?t?i.getFirstChild():i.getLastChild():null))i=s;else if(null!==(s=t?i.getNextSibling():i.getPreviousSibling()))i=s;else{if(i=i.getParentOrThrow(),r.has(i.__key)||n.push(i),i===e)break;s=i;do{null===s&&M(68),i=t?s.getNextSibling():s.getPreviousSibling(),null!==(s=s.getParent())&&(null!==i||r.has(s.__key)||n.push(s))}while(null===i)}}return t||n.reverse(),n}isDirty(){let e=wn()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){let e=we(this.__key);return null===e&&M(69),e}getWritable(){vn();var e=_n(),t=wn();e=e._nodeMap;let n=this.__key,r=this.getLatest(),i=r.__parent;t=t._cloneNotNeeded;var s=an();return null!==s&&(s._cachedNodes=null),t.has(n)?(ye(r),r):((s=r.constructor.clone(r)).__parent=i,Mn(r)&&Mn(s)?(s.__children=Array.from(r.__children),s.__indent=r.__indent,s.__format=r.__format,s.__dir=r.__dir):rr(r)&&rr(s)&&(s.__format=r.__format,s.__style=r.__style,s.__mode=r.__mode,s.__detail=r.__detail),t.add(n),s.__key=n,ye(s),e.set(n,s),s)}getTextContent(){return""}getTextContentSize(e,t){return this.getTextContent(e,t).length}createDOM(){M(70)}updateDOM(){M(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){M(72)}static importJSON(){M(18)}remove(e){An(this,!0,e)}replace(e){vn();let t=this.__key;me(e=e.getWritable());var n=this.getParentOrThrow(),r=n.getWritable().__children;let i=r.indexOf(this.__key),s=e.__key;return-1===i&&M(31),r.splice(i,0,s),e.__parent=n.__key,An(this,!1),ve(e),Kt(r=an())&&(n=r.anchor,r=r.focus,n.key===t&&Vt(n,e),r.key===t&&Vt(r,e)),wn()._compositionKey===t&&_e(s),e}insertAfter(e){vn();var t=this.getWritable(),n=e.getWritable(),r=n.getParent();let i=an();var s=e.getIndexWithinParent(),o=!1,a=!1;null!==r&&(me(n),Kt(i)&&(a=r.__key,o=i.anchor,r=i.focus,o="element"===o.type&&o.key===a&&o.offset===s+1,a="element"===r.type&&r.key===a&&r.offset===s+1)),s=this.getParentOrThrow().getWritable(),r=n.__key,n.__parent=t.__parent;let l=s.__children;return-1===(t=l.indexOf(t.__key))&&M(31),l.splice(t+1,0,r),ve(n),Kt(i)&&(cn(i,s,t+1),n=s.__key,o&&i.anchor.set(n,t+2,"element"),a&&i.focus.set(n,t+2,"element")),e}insertBefore(e){var t=this.getWritable(),n=e.getWritable();me(n);let r=this.getParentOrThrow().getWritable(),i=n.__key;n.__parent=t.__parent;let s=r.__children;return-1===(t=s.indexOf(t.__key))&&M(31),s.splice(t,0,i),ve(n),Kt(n=an())&&cn(n,r,t),e}selectPrevious(e,t){vn();let n=this.getPreviousSibling(),r=this.getParentOrThrow();return null===n?r.select(0,0):Mn(n)?n.select():rr(n)?n.select(e,t):(e=n.getIndexWithinParent()+1,r.select(e,e))}selectNext(e,t){vn();let n=this.getNextSibling(),r=this.getParentOrThrow();return null===n?r.select():Mn(n)?n.select(0,0):rr(n)?n.select(e,t):(e=n.getIndexWithinParent(),r.select(e,e))}markDirty(){this.getWritable()}}class Dn extends Rn{constructor(e){super(e)}decorate(){M(47)}isIsolated(){return!1}isTopLevel(){return!1}}function Pn(e){return e instanceof Dn}class Ln extends Rn{constructor(e){super(e),this.__children=[],this.__indent=this.__format=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){let e=this.getFormat();return J[e]||""}getIndent(){return this.getLatest().__indent}getChildren(){let e=this.getLatest().__children,t=[];for(let n=0;n<e.length;n++){let r=we(e[n]);null!==r&&t.push(r)}return t}getChildrenKeys(){return this.getLatest().__children}getChildrenSize(){return this.getLatest().__children.length}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=wn()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest();return e.getParentOrThrow().getLastChild()===e}getAllTextNodes(e){let t=[],n=this.getLatest().__children;for(let i=0;i<n.length;i++){var r=we(n[i]);!rr(r)||!e&&r.isInert()?Mn(r)&&(r=r.getAllTextNodes(e),t.push(...r)):t.push(r)}return t}getFirstDescendant(){let e=this.getFirstChild();for(;null!==e;){if(Mn(e)){let t=e.getFirstChild();if(null!==t){e=t;continue}}break}return e}getLastDescendant(){let e=this.getLastChild();for(;null!==e;){if(Mn(e)){let t=e.getLastChild();if(null!==t){e=t;continue}}break}return e}getDescendantByIndex(e){let t=this.getChildren(),n=t.length;return e>=n?Mn(e=t[n-1])&&e.getLastDescendant()||e||null:Mn(e=t[e])&&e.getFirstDescendant()||e||null}getFirstChild(){let e=this.getLatest().__children;return 0===e.length?null:we(e[0])}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&M(45),e}getLastChild(){let e=this.getLatest().__children,t=e.length;return 0===t?null:we(e[t-1])}getChildAtIndex(e){return void 0===(e=this.getLatest().__children[e])?null:we(e)}getTextContent(e,t){let n="",r=this.getChildren(),i=r.length;for(let s=0;s<i;s++){let o=r[s];n+=o.getTextContent(e,t),Mn(o)&&s!==i-1&&!o.isInline()&&(n+="\n\n")}return n}getDirection(){return this.getLatest().__dir}hasFormat(e){return""!==e&&(e=Q[e],0!==(this.getFormat()&e))}select(e,t){vn();let n=an();var r=this.getChildrenSize();return void 0===e&&(e=r),void 0===t&&(t=r),r=this.__key,Kt(n)?(n.anchor.set(r,e,"element"),n.focus.set(r,t,"element"),n.dirty=!0,n):rn(r,e,r,t,"element","element")}selectStart(){let e=this.getFirstDescendant();return Mn(e)||rr(e)?e.select(0,0):null!==e?e.selectPrevious():this.select(0,0)}selectEnd(){let e=this.getLastDescendant();return Mn(e)||rr(e)?e.select():null!==e?e.selectNext():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach((e=>e.remove())),e}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.splice(this.getChildrenSize(),0,t)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?Q[e]:0,this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){let r=this.getWritable();var i=r.__key;let s=r.__children,o=n.length;var a=[];for(let l=0;l<o;l++){let e=n[l],t=e.getWritable();e.__key===i&&M(76),me(t),t.__parent=i,a.push(t.__key)}if((n=this.getChildAtIndex(e-1))&&ye(n),(i=this.getChildAtIndex(e+t))&&ye(i),e===s.length?(s.push(...a),e=[]):e=s.splice(e,t,...a),e.length&&Kt(t=an())){let r=new Set(e),o=new Set(a);a=e=>{for(e=e.getNode();e;){const t=e.__key;if(r.has(t)&&!o.has(t))return!0;e=e.getParent()}return!1};let{anchor:l,focus:c}=t;for(a(l)&&dn(l,l.getNode(),this,n,i),a(c)&&dn(c,c.getNode(),this,n,i),a=e.length,t=0;t<a;t++)null!=(n=we(e[t]))&&(n.getWritable().__parent=null);0!==s.length||this.canBeEmpty()||Un(this)||this.remove()}return r}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(){return null}canInsertTab(){return!1}canIndent(){return!0}collapseAtStart(){return!1}excludeFromCopy(){return!1}canExtractContents(){return!0}canReplaceWith(){return!0}canInsertAfter(){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}canMergeWith(){return!1}extractWithChild(){return!1}}function Mn(e){return e instanceof Ln}class Fn extends Ln{static getType(){return"root"}static clone(){return new Fn}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){M(51)}getTextContent(e,t){let n=this.__cachedText;return!gn&&0!==wn()._dirtyType||null===n||e&&!1===t?super.getTextContent(e,t):n}remove(){M(52)}replace(){M(53)}insertBefore(){M(54)}insertAfter(){M(55)}updateDOM(){return!1}append(){for(let e=0;e<arguments.length;e++){let t=e<0||arguments.length<=e?void 0:arguments[e];Mn(t)||Pn(t)||M(56)}return super.append(...arguments)}static importJSON(e){let t=Ie();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}}function Un(e){return e instanceof Fn}function Bn(){return new jn(new Map([["root",new Fn]]))}function Vn(e){let t=e.exportJSON();t.type!==e.constructor.getType()&&M(58);let n=t.children;if(Mn(e)){Array.isArray(n)||M(59),e=e.getChildren();for(let t=0;t<e.length;t++){let r=Vn(e[t]);n.push(r)}}return t}class jn{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._readOnly=this._flushSync=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e){return En(this,e)}clone(e){return(e=new jn(this._nodeMap,void 0===e?this._selection:e))._readOnly=!0,e}toJSON(){return En(this,(()=>({root:Vn(Ie())})))}}class zn extends Rn{static getType(){return"linebreak"}static clone(e){return new zn(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>{let t=e.parentElement;return null!=t&&t.firstChild===e&&t.lastChild===e?null:{conversion:$n,priority:0}}}}static importJSON(){return Kn()}exportJSON(){return{type:"linebreak",version:1}}}function $n(){return{node:Kn()}}function Kn(){return new zn}function Wn(e){return e instanceof zn}function qn(e,t){return 16&t?"code":32&t?"sub":64&t?"sup":null}function Hn(e,t){return 1&t?"strong":2&t?"em":"span"}function Gn(e,t,n,r,i){e=r.classList,void 0!==(r=Pe(i,"base"))&&e.add(...r);let s=!1,o=8&t&&4&t;var a=8&n&&4&n;void 0!==(r=Pe(i,"underlineStrikethrough"))&&(a?(s=!0,o||e.add(...r)):o&&e.remove(...r));for(let l in G)a=G[l],void 0!==(r=Pe(i,l))&&(n&a&&(!s||"underline"!==l&&"strikethrough"!==l)?(0===(t&a)||o&&"underline"===l||"strikethrough"===l)&&e.add(...r):t&a&&e.remove(...r))}function Yn(e,t,n){let r=t.firstChild;if(e+=(n=n.isComposing())?K:"",null==r)t.textContent=e;else if((t=r.nodeValue)!==e)if(n||V){n=t.length;let i=e.length,s=0,o=0;for(;s<n&&s<i&&t[s]===e[s];)s++;for(;o+s<n&&o+s<i&&t[n-o-1]===e[i-o-1];)o++;e=[s,n-s-o,e.slice(s,i-o)];let[a,l,c]=e;0!==l&&r.deleteData(a,l),r.insertData(a,c)}else r.nodeValue=e}class Qn extends Rn{static getType(){return"text"}static clone(e){return new Qn(e.__text,e.__key)}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style="",this.__detail=this.__mode=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let e=this.getLatest();return Z[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===wn()._compositionKey}isSegmented(){return 2===this.getLatest().__mode}isInert(){return 3===this.getLatest().__mode}isDirectionless(){return 0!==(1&this.getLatest().__detail)}isUnmergeable(){return 0!==(2&this.getLatest().__detail)}hasFormat(e){return e=G[e],0!==(this.getFormat()&e)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(e,t){return!e&&this.isInert()||!1===t&&this.isDirectionless()?"":this.getLatest().__text}getFormatFlags(e,t){return pe(this.getLatest().__format,e,t)}createDOM(e){var t=this.__format,n=qn(0,t);let r=Hn(0,t),i=document.createElement(null===n?r:n),s=i;return null!==n&&(s=document.createElement(r),i.appendChild(s)),n=s,Yn(this.__text,n,this),void 0!==(e=e.theme.text)&&Gn(r,0,t,n,e),""!==(t=this.__style)&&(i.style.cssText=t),i}updateDOM(e,t,n){let r=this.__text;var i=e.__format,s=this.__format,o=qn(0,i);let a=qn(0,s);var l=Hn(0,i);let c=Hn(0,s);return(null===o?l:o)!==(null===a?c:a)||(o===a&&l!==c?(null==(i=t.firstChild)&&M(48),Yn(r,e=o=document.createElement(c),this),void 0!==(n=n.theme.text)&&Gn(c,0,s,e,n),t.replaceChild(o,i),!1):(l=t,null!==a&&null!==o&&(null==(l=t.firstChild)&&M(49)),Yn(r,l,this),void 0!==(n=n.theme.text)&&i!==s&&Gn(c,i,s,l,n),s=this.__style,e.__style!==s&&(t.style.cssText=s),!1))}static importDOM(){return{"#text":()=>({conversion:Zn,priority:0}),b:()=>({conversion:Xn,priority:0}),code:()=>({conversion:tr,priority:0}),em:()=>({conversion:tr,priority:0}),i:()=>({conversion:tr,priority:0}),span:()=>({conversion:Jn,priority:0}),strong:()=>({conversion:tr,priority:0}),u:()=>({conversion:tr,priority:0})}}static importJSON(e){let t=nr(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(){}setFormat(e){let t=this.getWritable();return t.__format="string"===typeof e?G[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"===typeof e?Y[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){return e=G[e],this.setFormat(this.getFormat()^e)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){e=X[e];let t=this.getWritable();return t.__mode=e,t}setTextContent(e){let t=this.getWritable();return t.__text=e,t}select(e,t){vn();let n=an();var r=this.getTextContent();let i=this.__key;return"string"===typeof r?(r=r.length,void 0===e&&(e=r),void 0===t&&(t=r)):t=e=0,Kt(n)?((r=wn()._compositionKey)!==n.anchor.key&&r!==n.focus.key||_e(i),n.setTextNodeRange(this,e,this,t),n):rn(i,e,i,t,"text","text")}spliceText(e,t,n,r){let i=this.getWritable(),s=i.__text,o=n.length,a=e;0>a&&(a=o+a,0>a&&(a=0));let l=an();return r&&Kt(l)&&(e+=o,l.setTextNodeRange(i,e,i,e)),t=s.slice(0,a)+n+s.slice(a+t),i.__text=t,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];vn();var r=this.getLatest(),i=r.getTextContent(),s=r.__key,o=wn()._compositionKey,a=new Set(t);t=[];for(var l=i.length,c="",u=0;u<l;u++)""!==c&&a.has(u)&&(t.push(c),c=""),c+=i[u];if(""!==c&&t.push(c),0===(a=t.length))return[];if(t[0]===i)return[r];var d=t[0];u=(i=r.getParentOrThrow()).__key;let h=r.getFormat(),f=r.getStyle(),p=r.__detail;l=!1,r.isSegmented()?((c=nr(d)).__parent=u,c.__format=h,c.__style=f,c.__detail=p,l=!0):(c=r.getWritable()).__text=d,r=an(),c=[c],d=d.length;for(let y=1;y<a;y++){var g=t[y],m=g.length;(g=nr(g).getWritable()).__format=h,g.__style=f,g.__detail=p;let e=g.__key;if(m=d+m,Kt(r)){let t=r.anchor,n=r.focus;t.key===s&&"text"===t.type&&t.offset>d&&t.offset<=m&&(t.key=e,t.offset-=d,r.dirty=!0),n.key===s&&"text"===n.type&&n.offset>d&&n.offset<=m&&(n.key=e,n.offset-=d,r.dirty=!0)}o===s&&_e(e),d=m,g.__parent=u,c.push(g)}return ve(this),s=(o=i.getWritable().__children).indexOf(s),t=c.map((e=>e.__key)),l?(o.splice(s,0,...t),this.remove()):o.splice(s,1,...t),Kt(r)&&cn(r,i,s,a-1),c}mergeWithSibling(e){var t=e===this.getPreviousSibling();t||e===this.getNextSibling()||M(50);var n=this.__key;let r=e.__key,i=this.__text,s=i.length;wn()._compositionKey===r&&_e(n);let o=an();if(Kt(o)){let i=o.anchor,a=o.focus;null!==i&&i.key===r&&(hn(i,t,n,e,s),o.dirty=!0),null!==a&&a.key===r&&(hn(a,t,n,e,s),o.dirty=!0)}return n=e.__text,this.setTextContent(t?n+i:i+n),t=this.getWritable(),e.remove(),t}isTextEntity(){return!1}}function Jn(e){let t="700"===e.style.fontWeight,n="line-through"===e.style.textDecoration,r="italic"===e.style.fontStyle,i="underline"===e.style.textDecoration,s=e.style.verticalAlign;return{forChild:e=>rr(e)?(t&&e.toggleFormat("bold"),n&&e.toggleFormat("strikethrough"),r&&e.toggleFormat("italic"),i&&e.toggleFormat("underline"),"sub"===s&&e.toggleFormat("subscript"),"super"===s&&e.toggleFormat("superscript"),e):e,node:null}}function Xn(e){let t="normal"===e.style.fontWeight;return{forChild:e=>(rr(e)&&!t&&e.toggleFormat("bold"),e),node:null}}function Zn(e){let{parentElement:t}=e,n=(e=e.textContent||"").trim();return null!=t&&"pre"===t.tagName.toLowerCase()||0!==n.length||!e.includes("\n")?{node:nr(e)}:{node:null}}let er={code:"code",em:"italic",i:"italic",strong:"bold",u:"underline"};function tr(e){let t=er[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:e=>(rr(e)&&e.toggleFormat(t),e),node:null}}function nr(){return new Qn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}function rr(e){return e instanceof Qn}class ir extends Ln{static getType(){return"paragraph"}static clone(e){return new ir(e.__key)}createDOM(e){let t=document.createElement("p");return void 0!==(e=Pe(e.theme,"paragraph"))&&t.classList.add(...e),t}updateDOM(){return!1}static importDOM(){return{p:()=>({conversion:sr,priority:0})}}exportDOM(e){return({element:e}=super.exportDOM(e)),e&&this.isEmpty()&&e.append(document.createElement("br")),{element:e}}static importJSON(e){let t=or();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}insertNewAfter(){let e=or(),t=this.getDirection();return e.setDirection(t),this.insertAfter(e),e}collapseAtStart(){let e=this.getChildren();if(0===e.length||rr(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function sr(){return{node:or()}}function or(){return new ir}function ar(e,t,n,r){let i=e._keyToDOMMap;i.clear(),e._editorState=Bn(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],null!==(r=e._observer)&&(r.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",i.set("root",n))}class lr{constructor(e,t,n,r,i,s){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._compositionKey=this._pendingEditorState=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Ae(),this._onError=i,this._htmlConversions=s,this._editable=!0,this._headless=!1,this._window=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){void 0===n&&M(35);let r=this._commands;r.has(e)||r.set(e,[new Set,new Set,new Set,new Set,new Set]);let i=r.get(e);void 0===i&&M(36);let s=i[n];return s.add(t),()=>{s.delete(t),i.every((e=>0===e.size))&&r.delete(e)}}registerMutationListener(e,t){void 0===this._nodes.get(e.getType())&&M(37);let n=this._listeners.mutation;return n.set(t,e),()=>{n.delete(t)}}registerNodeTransform(e,t){e=e.getType();let n=this._nodes.get(e);void 0===n&&M(37);let r=n.transforms;return r.add(t),function(e,t){xn(e,(()=>{var e=_n();if(!e.isEmpty())if("root"===t)Ie().markDirty();else{e=e._nodeMap;for(let[,t]of e)t.markDirty()}}),null===e._pendingEditorState?{tag:"history-merge"}:void 0)}(this,e),()=>{r.delete(t)}}hasNodes(e){for(let t=0;t<e.length;t++){let n=e[t].getType();if(!this._nodes.has(n))return!1}return!0}dispatchCommand(e,t){return Nn(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){var n=this._pendingEditorState||this._editorState;if(this._rootElement=e,ar(this,t,e,n),null!==t&&!this._config.disableEvents){if(0!==Nt&&(Nt--,0===Nt&&t.ownerDocument.removeEventListener("selectionchange",Ft)),null!==(n=t.__lexicalEditor)&&void 0!==n){if(null!==n._parentEditor){var r=xe(n);r=r[r.length-1]._key,Mt.get(r)===n&&Mt.delete(r)}else Mt.delete(n._key);t.__lexicalEditor=null}for(n=Lt(t),r=0;r<n.length;r++)n[r]();t.__lexicalEventHandles=[]}null!==e?(n=(n=e.ownerDocument)&&n.defaultView||null,(r=e.style).userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=n,this._dirtyType=2,oe(this),this._updateTags.add("history-merge"),Sn(this),this._config.disableEvents||function(e,t){0===Nt&&e.ownerDocument.addEventListener("selectionchange",Ft),Nt++,e.__lexicalEditor=t;let n=Lt(e);for(let r=0;r<Et.length;r++){let[i,s]=Et[r],o="function"===typeof s?e=>{t.isEditable()&&s(e,t)}:e=>{if(t.isEditable())switch(i){case"cut":return Nn(t,R,e);case"copy":return Nn(t,O,e);case"paste":return Nn(t,l,e);case"dragstart":return Nn(t,k,e);case"dragover":return Nn(t,x,e);case"dragend":return Nn(t,A,e);case"focus":return Nn(t,D,e);case"blur":return Nn(t,P,e);case"drop":return Nn(t,C,e)}};e.addEventListener(i,o),n.push((()=>{e.removeEventListener(i,o)}))}}(e,this)):this._window=null,In("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&M(38),se(this);let n=this._pendingEditorState,r=this._updateTags;t=void 0!==t?t.tag:null,null===n||n.isEmpty()||(null!=t&&r.add(t),Sn(this)),this._pendingEditorState=e,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=t&&r.add(t),Sn(this)}parseEditorState(e,t){e="string"===typeof e?JSON.parse(e):e;let n=Bn(),r=fn,i=gn,s=pn,o=this._dirtyElements,a=this._dirtyLeaves,l=this._cloneNotNeeded,c=this._dirtyType;this._dirtyElements=new Map,this._dirtyLeaves=new Set,this._cloneNotNeeded=new Set,this._dirtyType=0,fn=n,gn=!1,pn=this;try{Tn(e.root,this._nodes),t&&t(),n._readOnly=!0}finally{this._dirtyElements=o,this._dirtyLeaves=a,this._cloneNotNeeded=l,this._dirtyType=c,fn=r,gn=i,pn=s}return n}update(e,t){xn(this,e,t)}focus(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),xn(this,(()=>{let e=an(),n=Ie();null!==e?e.dirty=!0:0!==n.getChildrenSize()&&("rootStart"===t.defaultSelection?n.selectStart():n.selectEnd())}),{onUpdate:()=>{n.removeAttribute("autocapitalize"),e&&e()}}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){var e=this._rootElement;null!==e&&e.blur(),null!==(e=window.getSelection())&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,In("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}class cr extends Ln{constructor(e,t){super(t),this.__colSpan=e}exportJSON(){return{...super.exportJSON(),colSpan:this.__colSpan}}}function ur(e){return e instanceof cr}class dr extends Ln{}function hr(e){return e instanceof dr}class fr extends Ln{}function pr(e){return e instanceof fr}t.$createGridSelection=function(){let e=new Ut("root",0,"element"),t=new Ut("root",0,"element");return new Wt("root",e,t)},t.$createLineBreakNode=Kn,t.$createNodeSelection=sn,t.$createParagraphNode=or,t.$createRangeSelection=function(){let e=new Ut("root",0,"element"),t=new Ut("root",0,"element");return new Ht(e,t,0)},t.$createTextNode=nr,t.$getDecoratorNode=Fe,t.$getNearestNodeFromDOMNode=Te,t.$getNodeByKey=we,t.$getPreviousSelection=ln,t.$getRoot=Ie,t.$getSelection=an,t.$isDecoratorNode=Pn,t.$isElementNode=Mn,t.$isGridCellNode=ur,t.$isGridNode=hr,t.$isGridRowNode=pr,t.$isGridSelection=qt,t.$isLeafNode=ge,t.$isLineBreakNode=Wn,t.$isNodeSelection=Gt,t.$isParagraphNode=function(e){return e instanceof ir},t.$isRangeSelection=Kt,t.$isRootNode=Un,t.$isTextNode=rr,t.$nodesOfType=function(e){var t=_n();let n=t._readOnly,r=e.getType();t=t._nodeMap;let i=[];for(let[,s]of t)s instanceof e&&s.__type===r&&(n||s.isAttached())&&i.push(s);return i},t.$parseSerializedNode=function(e){return Tn(e,wn()._nodes)},t.$setCompositionKey=_e,t.$setSelection=Ne,t.BLUR_COMMAND=P,t.CAN_REDO_COMMAND={},t.CAN_UNDO_COMMAND={},t.CLEAR_EDITOR_COMMAND={},t.CLEAR_HISTORY_COMMAND={},t.CLICK_COMMAND=r,t.COMMAND_PRIORITY_CRITICAL=4,t.COMMAND_PRIORITY_EDITOR=0,t.COMMAND_PRIORITY_HIGH=3,t.COMMAND_PRIORITY_LOW=1,t.COMMAND_PRIORITY_NORMAL=2,t.CONTROLLED_TEXT_INSERTION_COMMAND=a,t.COPY_COMMAND=O,t.CUT_COMMAND=R,t.DELETE_CHARACTER_COMMAND=i,t.DELETE_LINE_COMMAND=d,t.DELETE_WORD_COMMAND=u,t.DRAGEND_COMMAND=A,t.DRAGOVER_COMMAND=x,t.DRAGSTART_COMMAND=k,t.DROP_COMMAND=C,t.DecoratorNode=Dn,t.ElementNode=Ln,t.FOCUS_COMMAND=D,t.FORMAT_ELEMENT_COMMAND={},t.FORMAT_TEXT_COMMAND=h,t.GridCellNode=cr,t.GridNode=dr,t.GridRowNode=fr,t.INDENT_CONTENT_COMMAND={},t.INSERT_LINE_BREAK_COMMAND=s,t.INSERT_PARAGRAPH_COMMAND=o,t.KEY_ARROW_DOWN_COMMAND=w,t.KEY_ARROW_LEFT_COMMAND=y,t.KEY_ARROW_RIGHT_COMMAND=g,t.KEY_ARROW_UP_COMMAND=_,t.KEY_BACKSPACE_COMMAND=E,t.KEY_DELETE_COMMAND=I,t.KEY_ENTER_COMMAND=b,t.KEY_ESCAPE_COMMAND=S,t.KEY_MODIFIER_COMMAND=L,t.KEY_SPACE_COMMAND=T,t.KEY_TAB_COMMAND=N,t.LineBreakNode=zn,t.MOVE_TO_END=m,t.MOVE_TO_START=v,t.OUTDENT_CONTENT_COMMAND={},t.PASTE_COMMAND=l,t.ParagraphNode=ir,t.REDO_COMMAND=p,t.REMOVE_TEXT_COMMAND=c,t.RootNode=Fn,t.SELECTION_CHANGE_COMMAND=n,t.TextNode=Qn,t.UNDO_COMMAND=f,t.VERSION="0.4.0",t.createCommand=function(){return{}},t.createEditor=function(e){var t=e||{},n=pn,r=t.theme||{};let i=void 0===e?n:t.parentEditor||null,s=t.disableEvents||!1,o=Bn(),a=t.namespace||(null!==i?i._config.namespace:Ae()),l=t.editorState,c=[Fn,Qn,zn,ir,...t.nodes||[]],u=t.onError;if(t=t.editable||!0,void 0===e&&null!==n)e=n._nodes;else for(e=new Map,n=0;n<c.length;n++){let t=c[n],r=t.getType();e.set(r,{klass:t,transforms:new Set})}return r=new lr(o,i,e,{disableEvents:s,namespace:a,theme:r},u||console.error,function(e){let t=new Map,n=new Set;return e.forEach((e=>{if(null!=(e=null!=e.klass.importDOM?e.klass.importDOM.bind(e.klass):null)&&!n.has(e)){n.add(e);var r=e();null!==r&&Object.keys(r).forEach((e=>{let n=t.get(e);void 0===n&&(n=[],t.set(e,n)),n.push(r[e])}))}})),t}(e),t),void 0!==l&&(r._pendingEditorState=l,r._dirtyType=2),r}},9402:()=>{Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}}),Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Prism.languages.c.boolean},4350:()=>{Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/}},9110:()=>{!function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(Prism)},9465:()=>{Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript},7537:()=>{!function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(e){return e=e.replace(/<inner>/g,(function(){return t})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+e+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,(function(){return r})),s=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+s+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+s+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+s+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach((function(t){["url","bold","italic","strike","code-snippet"].forEach((function(n){t!==n&&(e.languages.markdown[t].inside.content.inside[n]=e.languages.markdown[n])}))})),e.hooks.add("after-tokenize",(function(e){"markdown"!==e.language&&"md"!==e.language||function e(t){if(t&&"string"!==typeof t)for(var n=0,r=t.length;n<r;n++){var i=t[n];if("code"===i.type){var s=i.content[1],o=i.content[3];if(s&&o&&"code-language"===s.type&&"code-block"===o.type&&"string"===typeof s.content){var a=s.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),l="language-"+(a=(/[a-z][\w-]*/i.exec(a)||[""])[0].toLowerCase());o.alias?"string"===typeof o.alias?o.alias=[o.alias,l]:o.alias.push(l):o.alias=[l]}}else e(i.content)}}(e.tokens)})),e.hooks.add("wrap",(function(t){if("code-block"===t.type){for(var n="",r=0,i=t.classes.length;r<i;r++){var s=t.classes[r],c=/language-(.+)/.exec(s);if(c){n=c[1];break}}var u=e.languages[n];if(u)t.content=e.highlight(function(e){var t=e.replace(o,"");return t=t.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,(function(e,t){var n;if("#"===(t=t.toLowerCase())[0])return n="x"===t[1]?parseInt(t.slice(2),16):Number(t.slice(1)),l(n);var r=a[t];return r||e}))}(t.content),u,n);else if(n&&"none"!==n&&e.plugins.autoloader){var d="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());t.attributes.id=d,e.plugins.autoloader.loadLanguages(n,(function(){var t=document.getElementById(d);t&&(t.innerHTML=e.highlight(t.textContent,e.languages[n],n))}))}}}));var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),a={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;e.languages.md=e.languages.markdown}(Prism)},6639:()=>{Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:r},Prism.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml},8153:()=>{Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete Prism.languages.objectivec["class-name"],Prism.languages.objc=Prism.languages.objectivec},5156:()=>{Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python},7275:()=>{!function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,(function(){return t}));t=t.replace(/<self>/g,(function(){return/[^\s\S]/.source})),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)},3471:()=>{Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/}},5464:()=>{Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+/(?:elseif|if)\b/.source+"(?:[ \t]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/},Prism.languages.swift["string-literal"].forEach((function(e){e.inside.interpolation.inside=Prism.languages.swift}))},1293:(e,t,n)=>{var r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof s?new s(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,s;switch(n=n||{},i.util.type(t)){case"Object":if(s=i.util.objId(t),n[s])return n[s];for(var o in r={},n[s]=r,t)t.hasOwnProperty(o)&&(r[o]=e(t[o],n));return r;case"Array":return s=i.util.objId(t),n[s]?n[s]:(r=[],n[s]=r,t.forEach((function(t,i){r[i]=e(t,n)})),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if("undefined"===typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var s=(r=r||i.languages)[e],o={};for(var a in s)if(s.hasOwnProperty(a)){if(a==t)for(var l in n)n.hasOwnProperty(l)&&(o[l]=n[l]);n.hasOwnProperty(a)||(o[a]=s[a])}var c=r[e];return r[e]=o,i.languages.DFS(i.languages,(function(t,n){n===c&&t!=e&&(this[t]=o)})),o},DFS:function e(t,n,r,s){s=s||{};var o=i.util.objId;for(var a in t)if(t.hasOwnProperty(a)){n.call(t,a,t[a],r||a);var l=t[a],c=i.util.type(l);"Object"!==c||s[o(l)]?"Array"!==c||s[o(l)]||(s[o(l)]=!0,e(l,n,a,s)):(s[o(l)]=!0,e(l,n,null,s))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var s,o=0;s=r.elements[o++];)i.highlightElement(s,!0===t,r.callback)},highlightElement:function(t,n,r){var s=i.util.getLanguage(t),o=i.languages[s];i.util.setLanguage(t,s);var a=t.parentElement;a&&"pre"===a.nodeName.toLowerCase()&&i.util.setLanguage(a,s);var l={element:t,language:s,grammar:o,code:t.textContent};function c(e){l.highlightedCode=e,i.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i.hooks.run("after-highlight",l),i.hooks.run("complete",l),r&&r.call(l.element)}if(i.hooks.run("before-sanity-check",l),(a=l.element.parentElement)&&"pre"===a.nodeName.toLowerCase()&&!a.hasAttribute("tabindex")&&a.setAttribute("tabindex","0"),!l.code)return i.hooks.run("complete",l),void(r&&r.call(l.element));if(i.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var u=new Worker(i.filename);u.onmessage=function(e){c(e.data)},u.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(i.highlight(l.code,l.grammar,l.language));else c(i.util.encode(l.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(i.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),s.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new l;return c(i,i.head,e),a(e,i,t,i.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(i)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,s=0;r=n[s++];)r(t)}},Token:s};function s(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function o(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var s=i[1].length;i.index+=s,i[0]=i[0].slice(s)}return i}function a(e,t,n,r,l,d){for(var h in n)if(n.hasOwnProperty(h)&&n[h]){var f=n[h];f=Array.isArray(f)?f:[f];for(var p=0;p<f.length;++p){if(d&&d.cause==h+","+p)return;var g=f[p],m=g.inside,y=!!g.lookbehind,v=!!g.greedy,_=g.alias;if(v&&!g.pattern.global){var w=g.pattern.toString().match(/[imsuy]*$/)[0];g.pattern=RegExp(g.pattern.source,w+"g")}for(var b=g.pattern||g,T=r.next,E=l;T!==t.tail&&!(d&&E>=d.reach);E+=T.value.length,T=T.next){var S=T.value;if(t.length>e.length)return;if(!(S instanceof s)){var I,N=1;if(v){if(!(I=o(b,E,e,y))||I.index>=e.length)break;var C=I.index,k=I.index+I[0].length,x=E;for(x+=T.value.length;C>=x;)x+=(T=T.next).value.length;if(E=x-=T.value.length,T.value instanceof s)continue;for(var A=T;A!==t.tail&&(x<k||"string"===typeof A.value);A=A.next)N++,x+=A.value.length;N--,S=e.slice(E,x),I.index-=E}else if(!(I=o(b,0,S,y)))continue;C=I.index;var O=I[0],R=S.slice(0,C),D=S.slice(C+O.length),P=E+S.length;d&&P>d.reach&&(d.reach=P);var L=T.prev;if(R&&(L=c(t,L,R),E+=R.length),u(t,L,N),T=c(t,L,new s(h,m?i.tokenize(O,m):O,_,O)),D&&c(t,T,D),N>1){var M={cause:h+","+p,reach:P};a(e,t,n,T.prev,E,M),d&&M.reach>d.reach&&(d.reach=M.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function u(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}if(e.Prism=i,s.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach((function(t){r+=e(t,n)})),r}var s={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},o=t.alias;o&&(Array.isArray(o)?Array.prototype.push.apply(s.classes,o):s.classes.push(o)),i.hooks.run("wrap",s);var a="";for(var l in s.attributes)a+=" "+l+'="'+(s.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'"'+a+">"+s.content+"</"+s.tag+">"},!e.document)return e.addEventListener?(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,s=n.code,o=n.immediateClose;e.postMessage(i.highlight(s,i.languages[r],r)),o&&e.close()}),!1),i):i;var d=i.util.currentScript();function h(){i.manual||i.highlightAll()}if(d&&(i.filename=d.src,d.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var f=document.readyState;"loading"===f||"interactive"===f&&d&&d.defer?document.addEventListener("DOMContentLoaded",h):window.requestAnimationFrame?window.requestAnimationFrame(h):window.setTimeout(h,16)}return i}("undefined"!==typeof window?window:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=r),"undefined"!==typeof n.g&&(n.g.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};i["language-"+t]={pattern:/[\s\S]+/,inside:r.languages[t]};var s={};s[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:i},r.languages.insertBefore("markup","cdata",s)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(e,t){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:r.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,function(){if("undefined"!==typeof r&&"undefined"!==typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",n="loading",i="loaded",s="pre[data-src]:not(["+t+'="'+i+'"]):not(['+t+'="'+n+'"])';r.hooks.add("before-highlightall",(function(e){e.selector+=", "+s})),r.hooks.add("before-sanity-check",(function(o){var a=o.element;if(a.matches(s)){o.code="",a.setAttribute(t,n);var l=a.appendChild(document.createElement("CODE"));l.textContent="Loading\u2026";var c=a.getAttribute("data-src"),u=o.language;if("none"===u){var d=(/\.(\w+)$/.exec(c)||[,"none"])[1];u=e[d]||d}r.util.setLanguage(l,u),r.util.setLanguage(a,u);var h=r.plugins.autoloader;h&&h.loadLanguages(u),function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){4==r.readyState&&(r.status<400&&r.responseText?t(r.responseText):r.status>=400?n("\u2716 Error "+r.status+" while fetching file: "+r.statusText):n("\u2716 Error: File does not exist or is empty"))},r.send(null)}(c,(function(e){a.setAttribute(t,i);var n=function(e){var t=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(e||"");if(t){var n=Number(t[1]),r=t[2],i=t[3];return r?i?[n,Number(i)]:[n,void 0]:[n,n]}}(a.getAttribute("data-range"));if(n){var s=e.split(/\r\n?|\n/g),o=n[0],c=null==n[1]?s.length:n[1];o<0&&(o+=s.length),o=Math.max(0,Math.min(o-1,s.length)),c<0&&(c+=s.length),c=Math.max(0,Math.min(c,s.length)),e=s.slice(o,c).join("\n"),a.hasAttribute("data-start")||a.setAttribute("data-start",String(o+1))}l.textContent=e,r.highlightElement(l)}),(function(e){a.setAttribute(t,"failed"),l.textContent=e}))}})),r.plugins.fileHighlight={highlight:function(e){for(var t,n=(e||document).querySelectorAll(s),i=0;t=n[i++];)r.highlightElement(t)}};var o=!1;r.fileHighlight=function(){o||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),o=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}}}()},4463:(e,t,n)=>{"use strict";var r=n(2791),i=n(5296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var B=!1;function V(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function j(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case T:return"Portal";case I:return"Profiler";case S:return"StrictMode";case x:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ee=null,Se=null;function Ie(e){if(e=_i(e)){if("function"!==typeof Te)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Te(e.stateNode,e.type,t))}}function Ne(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function ke(e,t){return e(t)}function xe(){}var Ae=!1;function Oe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return ke(e,t,n)}finally{Ae=!1,(null!==Ee||null!==Se)&&(xe(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,Be=null,Ve={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,Tt,Et,St,It,Nt=!1,Ct=[],kt=null,xt=null,At=null,Ot=new Map,Rt=new Map,Dt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&Tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void It(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&Tt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Nt=!1,null!==kt&&Ut(kt)&&(kt=null),null!==xt&&Ut(xt)&&(xt=null),null!==At&&Ut(At)&&(At=null),Ot.forEach(Bt),Rt.forEach(Bt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return jt(t,e)}if(0<Ct.length){jt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&jt(kt,e),null!==xt&&jt(xt,e),null!==At&&jt(At,e),Ot.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var $t=w.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=_t,s=$t.transition;$t.transition=null;try{_t=1,Ht(e,t,n,r)}finally{_t=i,$t.transition=s}}function qt(e,t,n,r){var i=_t,s=$t.transition;$t.transition=null;try{_t=4,Ht(e,t,n,r)}finally{_t=i,$t.transition=s}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Mt(kt,e,t,n,r,i),!0;case"dragenter":return xt=Mt(xt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ot.set(s,Mt(Ot.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&bt(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Gt=null;function Yt(e,t,n,r){if(Gt=null,null!==(e=vi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=F({},cn,{view:0,detail:0}),hn=sn(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(F({},fn,{dataTransfer:0})),mn=sn(F({},dn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(vn),wn=sn(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function In(){return Sn}var Nn=F({},dn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Nn),kn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=sn(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(On),Dn=[9,13,27,32],Pn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Pn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Bn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Wn(e,t,n,r){Ne(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Hn=null;function Gn(e){Ur(e,0)}function Yn(e){if(H(wi(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Hn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Wn(t,Hn,e,be(e)),Oe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,_r=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==G(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=qr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Er={},Sr={};function Ir(e){if(Er[e])return Er[e];if(!Tr[e])return e;var t,n=Tr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);var Nr=Ir("animationend"),Cr=Ir("animationiteration"),kr=Ir("animationstart"),xr=Ir("transitionend"),Ar=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Dr=0;Dr<Or.length;Dr++){var Pr=Or[Dr];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Nr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(kr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(xr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=Be,Ue=!1,Be=null,e}function Br(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Qt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Oe((function(){var r=s,i=be(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=xn;break;case Nr:case Cr:case kr:l=yn;break;case xr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Re(p,h))&&u.push(Wr(p,g,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(g,p+"leave",l,n,i)).target=d,a.relatedTarget=f,g=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Hr(f))p++;for(f=0,g=h;g;g=Hr(g))f++;for(;0<p-f;)u=Hr(u),p--;for(;0<f-p;)h=Hr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Hr(u),h=Hr(h)}u=null}else u=null;null!==l&&Gr(o,a,l,u,!1),null!==c&&null!==d&&Gr(o,d,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Qn;else if(Kn(a))if(Jn)m=or;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,wr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(Pn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else zn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==_?"onCompositionEnd"===_&&zn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=qr(r,_)).length&&(_=new wn(_,e,null,n,i),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=jn(n))&&(_.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Un);case"textInput":return(e=t.data)===Un&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Re(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[fi]||null}var Ti=[],Ei=-1;function Si(e){return{current:e}}function Ii(e){0>Ei||(e.current=Ti[Ei],Ti[Ei]=null,Ei--)}function Ni(e,t){Ei++,Ti[Ei]=e.current,e.current=t}var Ci={},ki=Si(Ci),xi=Si(!1),Ai=Ci;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ii(xi),Ii(ki)}function Pi(e,t,n){if(ki.current!==Ci)throw Error(s(168));Ni(ki,t),Ni(xi,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=ki.current,Ni(ki,e),Ni(xi,xi.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(xi),Ii(ki),Ni(ki,e)):Ii(xi),Ni(xi,n)}var Ui=null,Bi=!1,Vi=!1;function ji(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Bi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,zi),i}finally{_t=t,Vi=!1}}return null}var $i=w.ReactCurrentBatchConfig;function Ki(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Wi=Si(null),qi=null,Hi=null,Gi=null;function Yi(){Gi=Hi=qi=null}function Qi(e){var t=Wi.current;Ii(Wi),e._currentValue=t}function Ji(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xi(e,t){qi=e,Gi=Hi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ta=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(Gi!==e)if(e={context:e,memoizedValue:t,next:null},null===Hi){if(null===qi)throw Error(s(308));Hi=e,qi.dependencies={lanes:0,firstContext:e}}else Hi=Hi.next=e;return t}var es=null,ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function is(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ss(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,nc(e)?(null===(e=n.interleaved)?(t.next=t,null===es?es=[n]:es.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function as(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ls(e,t,n,r){var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=F({},d,h);break e;case 2:ts=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Pl|=o,e.lanes=o,e.memoizedState=d}}function cs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var us=(new r.Component).refs;function ds(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xl(),i=Zl(e),s=is(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),ss(e,s),null!==(t=ec(e,i,r))&&os(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xl(),i=Zl(e),s=is(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),ss(e,s),null!==(t=ec(e,i,r))&&os(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xl(),r=Zl(e),i=is(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ss(e,i),null!==(t=ec(e,r,n))&&os(t,e,r)}};function fs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function ps(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Zi(s):(i=Ri(t)?Ai:ki.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=hs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function gs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hs.enqueueReplaceState(t,t.state,null)}function ms(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=us,ns(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Zi(s):(s=Ri(t)?Ai:ki.current,i.context=Oi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ds(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&hs.enqueueReplaceState(i,i.state,null),ls(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ys=[],vs=0,_s=null,ws=0,bs=[],Ts=0,Es=null,Ss=1,Is="";function Ns(e,t){ys[vs++]=ws,ys[vs++]=_s,_s=e,ws=t}function Cs(e,t,n){bs[Ts++]=Ss,bs[Ts++]=Is,bs[Ts++]=Es,Es=e;var r=Ss;e=Is;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ss=1<<32-ot(t)+i|n<<i|r,Is=s+e}else Ss=1<<s|n<<i|r,Is=e}function ks(e){null!==e.return&&(Ns(e,1),Cs(e,1,0))}function xs(e){for(;e===_s;)_s=ys[--vs],ys[vs]=null,ws=ys[--vs],ys[vs]=null;for(;e===Es;)Es=bs[--Ts],bs[Ts]=null,Is=bs[--Ts],bs[Ts]=null,Ss=bs[--Ts],bs[Ts]=null}var As=null,Os=null,Rs=!1,Ds=null;function Ps(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,As=e,Os=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,As=e,Os=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Es?{id:Ss,overflow:Is}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,As=e,Os=null,!0);default:return!1}}function Ms(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fs(e){if(Rs){var t=Os;if(t){var n=t;if(!Ls(e,t)){if(Ms(e))throw Error(s(418));t=ci(n.nextSibling);var r=As;t&&Ls(e,t)?Ps(r,n):(e.flags=-4097&e.flags|2,Rs=!1,As=e)}}else{if(Ms(e))throw Error(s(418));e.flags=-4097&e.flags|2,Rs=!1,As=e}}}function Us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;As=e}function Bs(e){if(e!==As)return!1;if(!Rs)return Us(e),Rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Os)){if(Ms(e)){for(e=Os;e;)e=ci(e.nextSibling);throw Error(s(418))}for(;t;)Ps(e,t),t=ci(t.nextSibling)}if(Us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Os=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Os=null}}else Os=As?ci(e.stateNode.nextSibling):null;return!0}function Vs(){Os=As=null,Rs=!1}function js(e){null===Ds?Ds=[e]:Ds.push(e)}function zs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===us&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function $s(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ks(e){return(0,e._init)(e._payload)}function Ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Ks(s)===t.type)?((r=i(t,n.props)).ref=zs(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=zs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=zs(e,null,t),n.return=e,n;case T:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;$s(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case T:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);$s(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);$s(t,r)}return null}function g(i,s,a,l){for(var c=null,u=null,d=s,g=s=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(i,d,a[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===a.length)return n(i,d),Rs&&Ns(i,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(i,a[g],l))&&(s=o(d,s,g),null===u?c=d:u.sibling=d,u=d);return Rs&&Ns(i,g),c}for(d=r(i,d);g<a.length;g++)null!==(m=p(d,i,g,a[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(i,e)})),Rs&&Ns(i,g),c}function m(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var _=f(i,g,v.value,c);if(null===_){null===g&&(g=y);break}e&&g&&null===_.alternate&&t(i,g),a=o(_,a,m),null===d?u=_:d.sibling=_,d=_,g=y}if(v.done)return n(i,g),Rs&&Ns(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,m),null===d?u=v:d.sibling=v,d=v);return Rs&&Ns(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(i,e)})),Rs&&Ns(i,m),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Ks(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=zs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Pc(o.type,o.key,o.props,null,r.mode,l)).ref=zs(r,s,o),l.return=r,r=l)}return a(r);case T:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(L(o))return m(r,s,o,l);$s(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var qs=Ws(!0),Hs=Ws(!1),Gs={},Ys=Si(Gs),Qs=Si(Gs),Js=Si(Gs);function Xs(e){if(e===Gs)throw Error(s(174));return e}function Zs(e,t){switch(Ni(Js,t),Ni(Qs,e),Ni(Ys,Gs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Ys),Ni(Ys,t)}function eo(){Ii(Ys),Ii(Qs),Ii(Js)}function to(e){Xs(Js.current);var t=Xs(Ys.current),n=le(t,e.type);t!==n&&(Ni(Qs,e),Ni(Ys,n))}function no(e){Qs.current===e&&(Ii(Ys),Ii(Qs))}var ro=Si(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var so=[];function oo(){for(var e=0;e<so.length;e++)so[e]._workInProgressVersionPrimary=null;so.length=0}var ao=w.ReactCurrentDispatcher,lo=w.ReactCurrentBatchConfig,co=0,uo=null,ho=null,fo=null,po=!1,go=!1,mo=0,yo=0;function vo(){throw Error(s(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function wo(e,t,n,r,i,o){if(co=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=null===e||null===e.memoizedState?ra:ia,e=n(r,i),go){o=0;do{if(go=!1,mo=0,25<=o)throw Error(s(301));o+=1,fo=ho=null,t.updateQueue=null,ao.current=sa,e=n(r,i)}while(go)}if(ao.current=na,t=null!==ho&&null!==ho.next,co=0,fo=ho=uo=null,po=!1,t)throw Error(s(300));return e}function bo(){var e=0!==mo;return mo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fo?uo.memoizedState=fo=e:fo=fo.next=e,fo}function Eo(){if(null===ho){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===fo?uo.memoizedState:fo.next;if(null!==t)fo=t,ho=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===fo?uo.memoizedState=fo=e:fo=fo.next=e}return fo}function So(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=Eo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((co&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,uo.lanes|=d,Pl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(Ta=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Pl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Eo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(Ta=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Co(){}function ko(e,t){var n=uo,r=Eo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,Ta=!0),r=r.queue,Bo(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==fo&&1&fo.memoizedState.tag){if(n.flags|=2048,Po(9,Ao.bind(null,n,r,i,t),void 0,null),null===Cl)throw Error(s(349));0!==(30&co)||xo(n,t,i)}return i}function xo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&ec(e,1,-1)}function Oo(e,t,n){return n((function(){Ro(t)&&ec(e,1,-1)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Do(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,uo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return Eo().memoizedState}function Mo(e,t,n,r){var i=To();uo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=Eo();r=void 0===r?null:r;var s=void 0;if(null!==ho){var o=ho.memoizedState;if(s=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Po(t,n,s,r))}uo.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Uo(e,t){return Mo(8390656,8,e,t)}function Bo(e,t){return Fo(2048,8,e,t)}function Vo(e,t){return Fo(4,2,e,t)}function jo(e,t){return Fo(4,4,e,t)}function zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $o(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,zo.bind(null,t,e),n)}function Ko(){}function Wo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,Ta=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),uo.lanes|=n,Pl|=n,e.baseState=!0),t)}function Go(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=lo.transition;lo.transition={};try{e(!1),t()}finally{_t=n,lo.transition=r}}function Yo(){return Eo().memoizedState}function Qo(e,t,n){var r=Zl(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e)?Zo(t,n):(ea(e,t,n),null!==(e=ec(e,r,n=Xl()))&&ta(e,t,r))}function Jo(e,t,n){var r=Zl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Zo(t,i);else{ea(e,t,i);var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o))return}catch(l){}null!==(e=ec(e,r,n=Xl()))&&ta(e,t,r)}}function Xo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Zo(e,t){go=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ea(e,t,n){nc(e)?(null===(e=t.interleaved)?(n.next=n,null===es?es=[t]:es.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ta(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var na={readContext:Zi,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},ra={readContext:Zi,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Zi,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qo.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Do,useDebugValue:Ko,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Go.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=To();if(Rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Cl)throw Error(s(349));0!==(30&co)||xo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Cl.identifierPrefix;if(Rs){var n=Is;t=":"+t+"R"+(n=(Ss&~(1<<32-ot(Ss)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=yo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ia={readContext:Zi,useCallback:Wo,useContext:Zi,useEffect:Bo,useImperativeHandle:$o,useInsertionEffect:Vo,useLayoutEffect:jo,useMemo:qo,useReducer:Io,useRef:Lo,useState:function(){return Io(So)},useDebugValue:Ko,useDeferredValue:function(e){return Ho(Eo(),ho.memoizedState,e)},useTransition:function(){return[Io(So)[0],Eo().memoizedState]},useMutableSource:Co,useSyncExternalStore:ko,useId:Yo,unstable_isNewReconciler:!1},sa={readContext:Zi,useCallback:Wo,useContext:Zi,useEffect:Bo,useImperativeHandle:$o,useInsertionEffect:Vo,useLayoutEffect:jo,useMemo:qo,useReducer:No,useRef:Lo,useState:function(){return No(So)},useDebugValue:Ko,useDeferredValue:function(e){var t=Eo();return null===ho?t.memoizedState=e:Ho(t,ho.memoizedState,e)},useTransition:function(){return[No(So)[0],Eo().memoizedState]},useMutableSource:Co,useSyncExternalStore:ko,useId:Yo,unstable_isNewReconciler:!1};function oa(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i}}function aa(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var la,ca,ua,da,ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=is(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zl||(zl=!0,$l=r),aa(0,t)},n}function pa(e,t,n){(n=is(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){aa(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){aa(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=is(-1,1)).tag=2,ss(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function va(e,t){if(!Rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function _a(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function wa(e,t,n){var r=t.pendingProps;switch(xs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _a(t),null;case 1:case 17:return Ri(t.type)&&Di(),_a(t),null;case 3:return r=t.stateNode,eo(),Ii(xi),Ii(ki),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Bs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Ds&&(oc(Ds),Ds=null))),ca(e,t),_a(t),null;case 5:no(t);var i=Xs(Js.current);if(n=t.type,null!==e&&null!=t.stateNode)ua(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return _a(t),null}if(e=Xs(Ys.current),Bs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Q(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":q(r),Z(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,la(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Br("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return _a(t),null;case 6:if(e&&null!=t.stateNode)da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Xs(Js.current),Xs(Ys.current),Bs(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=As))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return _a(t),null;case 13:if(Ii(ro),r=t.memoizedState,Rs&&null!==Os&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Os;r;)r=ci(r.nextSibling);return Vs(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Bs(t),null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));r[hi]=t}else Vs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return _a(t),null}return null!==Ds&&(oc(Ds),Ds=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Bs(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Rl&&(Rl=3):gc())),null!==t.updateQueue&&(t.flags|=4),_a(t),null);case 4:return eo(),ca(e,t),null===e&&zr(t.stateNode.containerInfo),_a(t),null;case 10:return Qi(t.type._context),_a(t),null;case 19:if(Ii(ro),null===(o=t.memoizedState))return _a(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)va(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=io(e))){for(t.flags|=128,va(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ni(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Vl&&(t.flags|=128,r=!0,va(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),va(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!Rs)return _a(t),null}else 2*Je()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,va(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ro.current,Ni(ro,r?1&n|2:1&n),t):(_a(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Al)&&(_a(t),6&t.subtreeFlags&&(t.flags|=8192)):_a(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}la=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ca=function(){},ua=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xs(Ys.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},da=function(e,t,n,r){n!==r&&(t.flags|=4)};var ba=w.ReactCurrentOwner,Ta=!1;function Ea(e,t,n,r){t.child=null===e?Hs(t,null,n,r):qs(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Xi(t,i),r=wo(e,t,n,r,s,i),n=bo(),null===e||Ta?(Rs&&n&&ks(t),t.flags|=1,Ea(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Na(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function Na(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(Ta=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(Ta=!0)}}return xa(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni(Ol,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni(Ol,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ni(Ol,Al),Al|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ni(Ol,Al),Al|=r;return Ea(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xa(e,t,n,r,i){var s=Ri(n)?Ai:ki.current;return s=Oi(t,s),Xi(t,i),n=wo(e,t,n,r,s,i),r=bo(),null===e||Ta?(Rs&&r&&ks(t),t.flags|=1,Ea(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Aa(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(Xi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ps(t,n,r),ms(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Zi(c):c=Oi(t,c=Ri(n)?Ai:ki.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&gs(t,o,r,c),ts=!1;var h=t.memoizedState;o.state=h,ls(t,r,o,i),l=t.memoizedState,a!==r||h!==l||xi.current||ts?("function"===typeof u&&(ds(t,n,u,r),l=t.memoizedState),(a=ts||fs(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,rs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Ki(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Zi(l):l=Oi(t,l=Ri(n)?Ai:ki.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&gs(t,o,r,l),ts=!1,h=t.memoizedState,o.state=h,ls(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||xi.current||ts?("function"===typeof f&&(ds(t,n,f,r),p=t.memoizedState),(c=ts||fs(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Oa(e,t,n,r,s,i)}function Oa(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,ba.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=qs(t,e.child,null,s),t.child=qs(t,null,a,s)):Ea(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Zs(e,t.containerInfo)}function Da(e,t,n,r,i){return Vs(),js(i),t.flags|=256,Ea(e,t,n,r),t.child}var Pa={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Fa(e,t,n){var r,i=t.pendingProps,o=ro.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ni(ro,1&o),null===e)return Fs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,a?(i=t.mode,a=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=Mc(o,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=Pa,e):Ua(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,ja(e,t,n,Error(s(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,o=t.mode,i=Mc({mode:"visible",children:i.children},o,0,null),(a=Lc(a,o,n,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&qs(t,e.child,null,n),t.child.memoizedState=La(n),t.memoizedState=Pa,a);if(0===(1&t.mode))t=ja(e,t,n,null);else if("$!"===r.data)t=ja(e,t,n,Error(s(419)));else if(i=0!==(n&e.childLanes),Ta||i){if(null!==(i=Cl)){switch(n&-n){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(i=0!==(a&(i.suspendedLanes|n))?0:a)&&i!==o.retryLane&&(o.retryLane=i,ec(e,i,-1))}gc(),t=ja(e,t,n,Error(s(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Os=ci(r.nextSibling),As=t,Rs=!0,Ds=null,null!==n&&(bs[Ts++]=Ss,bs[Ts++]=Is,bs[Ts++]=Es,Ss=n.id,Is=n.overflow,Es=t),(t=Ua(t,t.pendingProps.children)).flags|=4096);return t}return a?(i=Va(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?La(n):Ma(o,n),a.childLanes=e.childLanes&~n,t.memoizedState=Pa,i):(n=Ba(e,t,i.children,n),t.memoizedState=null,n)}return a?(i=Va(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?La(n):Ma(o,n),a.childLanes=e.childLanes&~n,t.memoizedState=Pa,i):(n=Ba(e,t,i.children,n),t.memoizedState=null,n)}function Ua(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){var i=e.child;return e=i.sibling,n=Dc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Va(e,t,n,r,i){var s=t.mode,o=(e=e.child).sibling,a={mode:"hidden",children:n};return 0===(1&s)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=a,t.deletions=null):(n=Dc(e,a)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Dc(o,r):(r=Lc(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ja(e,t,n,r){return null!==r&&js(r),qs(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ji(e.return,t,n)}function $a(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ka(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ea(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$a(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$a(t,!0,n,null,s);break;case"together":$a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){switch(xs(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ii(xi),Ii(ki),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ii(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));Vs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ro),null;case 4:return eo(),null;case 10:return Qi(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}var Ha=!1,Ga=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Qa=null;function Ja(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function Xa(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var Za=!1;function el(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Xa(t,n,s)}i=i.next}while(i!==r)}}function tl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}function al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(al(e,t,n),e=e.sibling;null!==e;)al(e,t,n),e=e.sibling}var ll=null,cl=!1;function ul(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ga||Ja(n,t);case 6:var r=ll,i=cl;ll=null,ul(e,t,n),cl=i,null!==(ll=r)&&(cl?(e=ll,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ll.removeChild(n.stateNode));break;case 18:null!==ll&&(cl?(e=ll,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ll,n.stateNode));break;case 4:r=ll,i=cl,ll=n.stateNode.containerInfo,cl=!0,ul(e,t,n),ll=r,cl=i;break;case 0:case 11:case 14:case 15:if(!Ga&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&Xa(n,t,o),i=i.next}while(i!==r)}ul(e,t,n);break;case 1:if(!Ga&&(Ja(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Ga=(r=Ga)||null!==n.memoizedState,ul(e,t,n),Ga=r):ul(e,t,n);break;default:ul(e,t,n)}}function hl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach((function(t){var r=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ll=l.stateNode,cl=!1;break e;case 3:case 4:ll=l.stateNode.containerInfo,cl=!0;break e}l=l.return}if(null===ll)throw Error(s(160));dl(o,a,i),ll=null,cl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}function pl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&r){try{el(3,e,e.return),tl(3,e)}catch(g){Sc(e,e.return,g)}try{el(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:fl(t,e),gl(e),512&r&&null!==n&&Ja(n,n.return);break;case 5:if(fl(t,e),gl(e),512&r&&null!==n&&Ja(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):_(i,d,h,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(fl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(s(162));u=e.stateNode,d=e.memoizedProps;try{u.nodeValue=d}catch(g){Sc(e,e.return,g)}}break;case 3:if(fl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(u=e.child).flags&&null!==u.memoizedState&&(null===u.alternate||null===u.alternate.memoizedState)&&(Bl=Je()),4&r&&hl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Ga=(d=Ga)||u,fl(t,e),Ga=d):fl(t,e),gl(e),8192&r){d=null!==e.memoizedState;e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,d?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=f.stateNode,a=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}if(d&&!u&&0!==(1&e.mode))for(Qa=e,e=e.child;null!==e;){for(u=Qa=e;null!==Qa;){switch(h=(d=Qa).child,d.tag){case 0:case 11:case 14:case 15:el(4,d,d.return);break;case 1:if(Ja(d,d.return),"function"===typeof(o=d.stateNode).componentWillUnmount){f=d,p=d.return;try{i=f,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(g){Sc(f,p,g)}}break;case 5:Ja(d,d.return);break;case 22:if(null!==d.memoizedState){_l(u);continue}}null!==h?(h.return=d,Qa=h):_l(u)}e=e.sibling}}break;case 19:fl(t,e),gl(e),4&r&&hl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),al(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ol(e,sl(e),o);break;default:throw Error(s(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ml(e,t,n){Qa=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Qa;){var i=Qa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ha;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ga;a=Ha;var c=Ga;if(Ha=o,(Ga=l)&&!c)for(Qa=i;null!==Qa;)l=(o=Qa).child,22===o.tag&&null!==o.memoizedState?wl(i):null!==l?(l.return=o,Qa=l):wl(i);for(;null!==s;)Qa=s,yl(s,t,n),s=s.sibling;Qa=i,Ha=a,Ga=c}vl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Qa=s):vl(e)}}function vl(e){for(;null!==Qa;){var t=Qa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ga||tl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ga)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ki(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&cs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}cs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(s(163))}Ga||512&t.flags&&nl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Qa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qa=n;break}Qa=t.return}}function _l(e){for(;null!==Qa;){var t=Qa;if(t===e){Qa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qa=n;break}Qa=t.return}}function wl(e){for(;null!==Qa;){var t=Qa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{tl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{nl(t)}catch(l){Sc(t,s,l)}break;case 5:var o=t.return;try{nl(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Qa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Qa=a;break}Qa=t.return}}var bl,Tl=Math.ceil,El=w.ReactCurrentDispatcher,Sl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Nl=0,Cl=null,kl=null,xl=0,Al=0,Ol=Si(0),Rl=0,Dl=null,Pl=0,Ll=0,Ml=0,Fl=null,Ul=null,Bl=0,Vl=1/0,jl=null,zl=!1,$l=null,Kl=null,Wl=!1,ql=null,Hl=0,Gl=0,Yl=null,Ql=-1,Jl=0;function Xl(){return 0!==(6&Nl)?Je():-1!==Ql?Ql:Ql=Je()}function Zl(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==xl?xl&-xl:null!==$i.transition?(0===Jl&&(Jl=gt()),Jl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function ec(e,t,n){if(50<Gl)throw Gl=0,Yl=null,Error(s(185));var r=tc(e,t);return null===r?null:(yt(r,t,n),0!==(2&Nl)&&r===Cl||(r===Cl&&(0===(2&Nl)&&(Ll|=t),4===Rl&&ac(r,xl)),rc(r,n),1===t&&0===Nl&&0===(1&e.mode)&&(Vl=Je()+500,Bi&&zi())),r)}function tc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function nc(e){return(null!==Cl||null!==es)&&0!==(1&e.mode)&&0===(2&Nl)}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Cl?xl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Bi=!0,ji(e)}(lc.bind(null,e)):ji(lc.bind(null,e)),oi((function(){0===Nl&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=xc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Ql=-1,Jl=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Tc()&&e.callbackNode!==n)return null;var r=ht(e,e===Cl?xl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Nl;Nl|=2;var o=pc();for(Cl===e&&xl===t||(jl=null,Vl=Je()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Yi(),El.current=o,Nl=i,null!==kl?t=0:(Cl=null,xl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Dl,hc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Dl,hc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:bc(e,Ul,jl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Bl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Xl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Ul,jl),t);break}bc(e,Ul,jl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Ul,jl),r);break}bc(e,Ul,jl);break;default:throw Error(s(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=n,null!==t&&oc(t)),e}function oc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Ml,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Nl))throw Error(s(327));Tc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Dl,hc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Ul,jl),rc(e,Je()),null}function cc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Vl=Je()+500,Bi&&zi())}}function uc(e){null!==ql&&0===ql.tag&&0===(6&Nl)&&Tc();var t=Nl;Nl|=1;var n=Il.transition,r=_t;try{if(Il.transition=null,_t=1,e)return e()}finally{_t=r,Il.transition=n,0===(6&(Nl=t))&&zi()}}function dc(){Al=Ol.current,Ii(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==kl)for(n=kl.return;null!==n;){var r=n;switch(xs(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:eo(),Ii(xi),Ii(ki),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ii(ro);break;case 10:Qi(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Cl=e,kl=e=Dc(e.current,null),xl=Al=t,Rl=0,Dl=null,Ml=Ll=Pl=0,Ul=Fl=null,null!==es){for(t=0;t<es.length;t++)if(null!==(r=(n=es[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}es=null}return e}function fc(e,t){for(;;){var n=kl;try{if(Yi(),ao.current=na,po){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,fo=ho=uo=null,go=!1,mo=0,Sl.current=null,null===n||null===n.return){Rl=1,Dl=t,kl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=xl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(Rs&&1&l.mode){var y=ma(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),js(c);break e}}o=c,4!==Rl&&(Rl=2),null===Fl?Fl=[o]:Fl.push(o),c=oa(c,l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,as(l,fa(0,c,t));break e;case 1:o=c;var v=l.type,_=l.stateNode;if(0===(128&l.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Kl||!Kl.has(_)))){l.flags|=65536,t&=-t,l.lanes|=t,as(l,pa(l,o,t));break e}}l=l.return}while(null!==l)}wc(n)}catch(w){t=w,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=na,null===e?na:e}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Cl||0===(268435455&Pl)&&0===(268435455&Ll)||ac(Cl,xl)}function mc(e,t){var n=Nl;Nl|=2;var r=pc();for(Cl===e&&xl===t||(jl=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Yi(),Nl=n,El.current=r,null!==kl)throw Error(s(261));return Cl=null,xl=0,Rl}function yc(){for(;null!==kl;)_c(kl)}function vc(){for(;null!==kl&&!Ye();)_c(kl)}function _c(e){var t=bl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?wc(e):kl=t,Sl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=wa(n,t,Al)))return void(kl=n)}else{if(null!==(n=qa(n,t)))return n.flags&=32767,void(kl=n);if(null===e)return Rl=6,void(kl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kl=t);kl=t=e}while(null!==t);0===Rl&&(Rl=5)}function bc(e,t,n){var r=_t,i=Il.transition;try{Il.transition=null,_t=1,function(e,t,n,r){do{Tc()}while(null!==ql);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Cl&&(kl=Cl=null,xl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,xc(tt,(function(){return Tc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=_t;_t=1;var l=Nl;Nl|=4,Sl.current=null,function(e,t){if(ei=Kt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(T){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Qa=t;null!==Qa;)if(e=(t=Qa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qa=e;else for(;null!==Qa;){t=Qa;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ki(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;if(1===w.nodeType)w.textContent="";else if(9===w.nodeType){var b=w.body;null!=b&&(b.textContent="")}break;default:throw Error(s(163))}}catch(T){Sc(t,t.return,T)}if(null!==(e=t.sibling)){e.return=t.return,Qa=e;break}Qa=t.return}g=Za,Za=!1}(e,n),pl(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ml(n,e,i),Qe(),Nl=l,_t=a,Il.transition=o}else e.current=n;if(Wl&&(Wl=!1,ql=e,Hl=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(zl)throw zl=!1,e=$l,$l=null,e;0!==(1&Hl)&&0!==e.tag&&Tc(),o=e.pendingLanes,0!==(1&o)?e===Yl?Gl++:(Gl=0,Yl=e):Gl=0,zi()}(e,t,n,r)}finally{Il.transition=i,_t=r}return null}function Tc(){if(null!==ql){var e=wt(Hl),t=Il.transition,n=_t;try{if(Il.transition=null,_t=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Hl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Qa=e.current;null!==Qa;){var o=Qa,a=o.child;if(0!==(16&Qa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qa=u;null!==Qa;){var d=Qa;switch(d.tag){case 0:case 11:case 15:el(8,d,o)}var h=d.child;if(null!==h)h.return=d,Qa=h;else for(;null!==Qa;){var f=(d=Qa).sibling,p=d.return;if(rl(d),d===u){Qa=null;break}if(null!==f){f.return=p,Qa=f;break}Qa=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Qa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Qa=a;else e:for(;null!==Qa;){if(0!==(2048&(o=Qa).flags))switch(o.tag){case 0:case 11:case 15:el(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Qa=v;break e}Qa=o.return}}var _=e.current;for(Qa=_;null!==Qa;){var w=(a=Qa).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Qa=w;else e:for(a=_;null!==Qa;){if(0!==(2048&(l=Qa).flags))try{switch(l.tag){case 0:case 11:case 15:tl(9,l)}}catch(T){Sc(l,l.return,T)}if(l===a){Qa=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Qa=b;break e}Qa=l.return}}if(Nl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(T){}r=!0}return r}finally{_t=n,Il.transition=t}}return!1}function Ec(e,t,n){ss(e,t=fa(0,t=oa(n,t),1)),t=Xl(),null!==(e=tc(e,1))&&(yt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){ss(t,e=pa(t,e=oa(n,e),1)),e=Xl(),null!==(t=tc(t,1))&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Xl(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(xl&n)===n&&(4===Rl||3===Rl&&(130023424&xl)===xl&&500>Je()-Bl?hc(e,0):Ml|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Xl();null!==(e=tc(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Nc(e,n)}function xc(e,t){return He(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Lc(n.children,i,o,t);case S:a=8,i|=8;break;case I:return(e=Oc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case x:return(e=Oc(13,n,t,i)).elementType=x,e.lanes=o,e;case A:return(e=Oc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case C:a=9;break e;case k:a=11;break e;case O:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Oc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Fc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Oc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ns(s),e}function jc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=jc(null),n=e.current,(s=is(r=Xl(),i=Zl(n))).callback=void 0!==t&&null!==t?t:null,ss(n,s),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function $c(e,t,n,r){var i=t.current,s=Xl(),o=Zl(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=is(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ss(i,t),null!==(e=ec(i,o,s))&&os(e,i,o),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}bl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)Ta=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ta=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),Vs();break;case 5:to(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Zs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(Wi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ni(ro,1&ro.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ni(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ka(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Wa(e,t,n)}(e,t,n);Ta=0!==(131072&e.flags)}else Ta=!1,Rs&&0!==(1048576&t.flags)&&Cs(t,ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Oi(t,ki.current);Xi(t,n),i=wo(null,t,r,e,i,n);var o=bo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ns(t),i.updater=hs,t.stateNode=i,i._reactInternals=t,ms(t,r,e,n),t=Oa(null,t,r,!0,o,n)):(t.tag=0,Rs&&o&&ks(t),Ea(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===O)return 14}return 2}(r),e=Ki(r,e),i){case 0:t=xa(null,t,r,e,n);break e;case 1:t=Aa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,Ki(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 1:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 3:e:{if(Ra(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,rs(e,t),ls(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=Error(s(423)));break e}if(r!==i){t=Da(e,t,r,n,i=Error(s(424)));break e}for(Os=ci(t.stateNode.containerInfo.firstChild),As=t,Rs=!0,Ds=null,n=Hs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Vs(),r===i){t=Wa(e,t,n);break e}Ea(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),Ea(e,t,a,n),t.child;case 6:return null===e&&Fs(t),null;case 13:return Fa(e,t,n);case 4:return Zs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=qs(t,null,r,n):Ea(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 7:return Ea(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ea(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ni(Wi,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!xi.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=is(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ji(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ji(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ea(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Xi(t,n),r=r(i=Zi(i)),t.flags|=1,Ea(e,t,r,n),t.child;case 14:return i=Ki(r=t.type,t.pendingProps),Ia(e,t,r,i=Ki(r.type,i),n);case 15:return Na(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ki(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Xi(t,n),ps(t,r,i),ms(t,r,i,n),Oa(null,t,r,!0,e,n);case 19:return Ka(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kc(o);a.call(e)}}$c(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kc(o);s.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){$c(t,l,n,r)})),l}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$c(e,t,null,null)},Yc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){$c(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&Nl)&&(Vl=Je()+500,zi()))}break;case 13:var r=Xl();uc((function(){return ec(e,1,r)})),qc(e,1)}},Tt=function(e){13===e.tag&&(ec(e,134217728,Xl()),qc(e,134217728))},Et=function(e){if(13===e.tag){var t=Xl(),n=Zl(e);ec(e,n,t),qc(e,n)}},St=function(){return _t},It=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Te=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));H(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=cc,xe=uc;var eu={usingClientEntryPoint:!1,Events:[_i,wi,bi,Ne,Ce,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},1250:(e,t,n)=>{"use strict";var r=n(4164);t.s=r.createRoot,r.hydrateRoot},4164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:(e,t,n)=>{"use strict";var r=n(2791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},9117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=_.prototype=new v;w.constructor=_,g(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,T=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)T.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+k(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),x(o,t,i,"",(function(e){return e}))):null!=o&&(N(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+k(a=e[c],c);l+=x(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=x(a=a.value,t,i,u=s+k(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)T.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.1.0"},2791:(e,t,n)=>{"use strict";e.exports=n(9117)},184:(e,t,n)=>{"use strict";e.exports=n(6374)},6813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,D(T);else{var t=r(u);null!==t&&P(b,t.startTime-e)}}function T(e,n){g=!1,m&&(m=!1,v(N),N=-1),p=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!x());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(b,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,I=null,N=-1,C=5,k=-1;function x(){return!(t.unstable_now()-k<C)}function A(){if(null!==I){var e=t.unstable_now();k=e;var n=!0;try{n=I(!0,e)}finally{n?E():(S=!1,I=null)}}else S=!1}if("function"===typeof _)E=function(){_(A)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=A,E=function(){R.postMessage(null)}}else E=function(){y(A,0)};function D(e){I=e,S||(S=!0,E())}function P(e,n){N=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(T))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(v(N),N=-1):m=!0,P(b,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,D(T))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:(e,t,n)=>{"use strict";e.exports=n(6813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Ve,SDK_VERSION:()=>$t,_DEFAULT_ENTRY_NAME:()=>Ot,_addComponent:()=>Lt,_addOrOverwriteComponent:()=>Mt,_apps:()=>Dt,_clearComponents:()=>Vt,_components:()=>Pt,_getProvider:()=>Ut,_registerComponent:()=>Ft,_removeServiceInstance:()=>Bt,deleteApp:()=>Ht,getApp:()=>Wt,getApps:()=>qt,initializeApp:()=>Kt,onLog:()=>Yt,registerVersion:()=>Gt,setLogLevel:()=>Qt});var t,r=n(2791),i=n.t(r,2),s=n(1250),o=n(4164),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,d=t.Pop,g=null,m=y();function y(){return(a.state||{idx:null}).idx}function v(){d=t.Pop;let e=y(),n=null==e?null:e-m;m=e,g&&g({action:d,location:w.location,delta:n})}function _(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,a.replaceState(l({},a.state,{idx:m}),""));let w={get action(){return d},get location(){return e(s,a)},listen(e){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(c,v),g=e,()=>{s.removeEventListener(c,v),g=null}},createHref:e=>n(s,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){d=t.Push;let i=f(w.location,e,n);r&&r(i,e),m=y()+1;let l=h(i,m),c=w.createHref(i);try{a.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(c)}o&&g&&g({action:d,location:w.location,delta:1})},replace:function(e,n){d=t.Replace;let i=f(w.location,e,n);r&&r(i,e),m=y();let s=h(i,m),l=w.createHref(i);a.replaceState(s,"",l),o&&g&&g({action:d,location:w.location,delta:0})},go:e=>a.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=R(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;let i=_(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=x(i[o],O(r));return s}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=F([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),_(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:k(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))i(e,t,r);else i(e,t)})),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=w(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const b=/^:[\w-]+$/,T=3,E=2,S=1,I=10,N=-2,C=e=>"*"===e;function k(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=N),t&&(r+=E),n.filter((e=>!C(e))).reduce(((e,t)=>e+(b.test(t)?T:""===t?S:I)),r)}function x(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:F([i,c.pathname]),pathnameBase:U(F([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=F([i,c.pathnameBase]))}return s}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return d(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function O(e){try{return decodeURI(e)}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=P(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:B(r),hash:V(i)}}(i,s),d=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function j(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],$=(new Set(z),["get",...z]);new Set($),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const W=r.createContext(null);const q=r.createContext(null);const H=r.createContext(null);const G=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function J(){return null!=r.useContext(G)}function X(){return J()||u(!1),r.useContext(G).location}function Z(e){r.useContext(H).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ce(ae.UseNavigateStable),t=de(le.UseNavigateStable),n=r.useRef(!1);Z((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},i)))}),[e,t]);return i}():function(){J()||u(!1);let e=r.useContext(W),{basename:t,future:n,navigator:i}=r.useContext(H),{matches:s}=r.useContext(Y),{pathname:o}=X(),a=JSON.stringify(L(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return Z((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=M(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:F([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function te(e,n,i,s){J()||u(!1);let{navigator:o}=r.useContext(H),{matches:a}=r.useContext(Y),l=a[a.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=X();if(n){var p;let e="string"===typeof n?g(n):n;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||u(!1),h=e}else h=f;let m=h.pathname||"/",y=v(e,{pathname:"/"===d?m:m.slice(d.length)||"/"});let _=oe(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([d,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:F([d,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&_?r.createElement(G.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},_):_}function ne(){let e=function(){var e;let t=r.useContext(Q),n=ue(le.UseRouteError),i=de(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=j(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const re=r.createElement(ne,null);class ie extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(W);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function oe(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=d>=0?a.slice(0,d+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,u=!1,h=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||re,c&&(d<0&&0===s?(p="route-fallback",!1||he[p]||(he[p]=!0),u=!0,f=null):d===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,s+1)),m=()=>{let t;return t=o?h:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(se,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(ie,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=r.useContext(W);return t||u(!1),t}function ue(e){let t=r.useContext(q);return t||u(!1),t}function de(e){let t=function(e){let t=r.useContext(Y);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const he={};i.startTransition;function fe(e){let{to:t,replace:n,state:i,relative:s}=e;J()||u(!1);let{future:o,static:a}=r.useContext(H),{matches:l}=r.useContext(Y),{pathname:c}=X(),d=ee(),h=M(t,L(l,o.v7_relativeSplatPath),c,"path"===s),f=JSON.stringify(h);return r.useEffect((()=>d(JSON.parse(f),{replace:n,state:i,relative:s})),[d,f,s,n,i]),null}function pe(e){u(!1)}function ge(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:c}=e;J()&&u(!1);let d=n.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:d,navigator:a,static:l,future:K({v7_relativeSplatPath:!1},c)})),[d,c,a,l]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=s,_=r.useMemo((()=>{let e=R(f,d);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:o}}),[d,f,p,m,y,v,o]);return null==_?null:r.createElement(H.Provider,{value:h},r.createElement(G.Provider,{children:i,value:_}))}function me(e){let{children:t,location:n}=e;return te(ye(t),n)}new Promise((()=>{}));r.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ye(e.props.children,s));e.type!==pe&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ye(e.props.children,s)),n.push(o)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);new Map;const ve=i.startTransition;a.flushSync,i.useId;function _e(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),m((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&ve?ve((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>l.listen(h)),[l,h]),r.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var we,be;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(we||(we={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(be||(be={}));const Te=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Te(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Se;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Se extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ie=function(e){return function(e){const t=Te(e);return Ee.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ne=function(e){try{return Ee.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ce(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ce(e[n],t[n]));return e}const ke=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,xe=()=>{try{return ke()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Ne(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ae=()=>{var e;return null===(e=xe())||void 0===e?void 0:e.config},Oe=e=>{var t;return null===(t=xe())||void 0===t?void 0:t["_".concat(e)]};class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function De(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(De())}function Le(){var e;const t=null===(e=xe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Me(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Fe(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ue(){const e=De();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Be(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Ve extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,je.prototype.create)}}class je{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ze,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ve(n,s,t)}}const ze=/\{\$([^}]+)}/g;function $e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ke(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(We(n)&&We(s)){if(!Ke(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function We(e){return null!==e&&"object"===typeof e}function qe(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function He(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Ge(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ye(e,t){const n=new Qe(e,t);return n.subscribe.bind(n)}class Qe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Je),void 0===r.error&&(r.error=Je),void 0===r.complete&&(r.complete=Je);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Je(){}function Xe(e){return e&&e._delegate?e._delegate:e}class Ze{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const et="[DEFAULT]";class tt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Re;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:et})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===et?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return this.component?this.component.multipleInstances?e:et:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class nt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const rt=[];var it;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(it||(it={}));const st={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},ot=it.INFO,at={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},lt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=at[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ct{constructor(e){this.name=e,this._logLevel=ot,this._logHandler=lt,this._userLogHandler=null,rt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?st[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...t),this._logHandler(this,it.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...t),this._logHandler(this,it.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,it.INFO,...t),this._logHandler(this,it.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,it.WARN,...t),this._logHandler(this,it.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,it.ERROR,...t),this._logHandler(this,it.ERROR,...t)}}const ut=(e,t)=>t.some((t=>e instanceof t));let dt,ht;const ft=new WeakMap,pt=new WeakMap,gt=new WeakMap,mt=new WeakMap,yt=new WeakMap;let vt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return pt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||gt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function _t(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ht||(ht=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Tt(this),n),bt(ft.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bt(e.apply(Tt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Tt(this),t,...r);return gt.set(s,t.sort?t.sort():[t]),bt(s)}}function wt(e){return"function"===typeof e?_t(e):(e instanceof IDBTransaction&&function(e){if(pt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));pt.set(e,t)}(e),ut(e,dt||(dt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,vt):e)}function bt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(bt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ft.set(t,e)})).catch((()=>{})),yt.set(t,e),t}(e);if(mt.has(e))return mt.get(e);const t=wt(e);return t!==e&&(mt.set(e,t),yt.set(t,e)),t}const Tt=e=>yt.get(e);const Et=["get","getKey","getAll","getAllKeys","count"],St=["put","add","delete","clear"],It=new Map;function Nt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(It.get(t))return It.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=St.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Et.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return It.set(t,s),s}vt=(e=>({...e,get:(t,n,r)=>Nt(t,n)||e.get(t,n,r),has:(t,n)=>!!Nt(t,n)||e.has(t,n)}))(vt);class Ct{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const kt="@firebase/app",xt="0.9.25",At=new ct("@firebase/app"),Ot="[DEFAULT]",Rt={[kt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Dt=new Map,Pt=new Map;function Lt(e,t){try{e.container.addComponent(t)}catch(n){At.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Mt(e,t){e.container.addOrOverwriteComponent(t)}function Ft(e){const t=e.name;if(Pt.has(t))return At.debug("There were multiple attempts to register component ".concat(t,".")),!1;Pt.set(t,e);for(const n of Dt.values())Lt(n,e);return!0}function Ut(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Bt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ot;Ut(e,t).clearInstance(n)}function Vt(){Pt.clear()}const jt=new je("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class zt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ze("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}}const $t="10.7.1";function Kt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ot,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw jt.create("bad-app-name",{appName:String(i)});if(n||(n=Ae()),!n)throw jt.create("no-options");const s=Dt.get(i);if(s){if(Ke(n,s.options)&&Ke(r,s.config))return s;throw jt.create("duplicate-app",{appName:i})}const o=new nt(i);for(const l of Pt.values())o.addComponent(l);const a=new zt(n,r,o);return Dt.set(i,a),a}function Wt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;const t=Dt.get(e);if(!t&&e===Ot&&Ae())return Kt();if(!t)throw jt.create("no-app",{appName:e});return t}function qt(){return Array.from(Dt.values())}async function Ht(e){const t=e.name;Dt.has(t)&&(Dt.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Gt(e,t,n){var r;let i=null!==(r=Rt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void At.warn(e.join(" "))}Ft(new Ze("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Yt(e,t){if(null!==e&&"function"!==typeof e)throw jt.create("invalid-log-argument");!function(e,t){for(const n of rt){let r=null;t&&t.level&&(r=st[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:it[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Qt(e){var t;t=e,rt.forEach((e=>{e.setLogLevel(t)}))}const Jt="firebase-heartbeat-database",Xt=1,Zt="firebase-heartbeat-store";let en=null;function tn(){return en||(en=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=bt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(bt(o.result),e.oldVersion,e.newVersion,bt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Jt,Xt,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Zt)}}).catch((e=>{throw jt.create("idb-open",{originalErrorMessage:e.message})}))),en}async function nn(e,t){try{const n=(await tn()).transaction(Zt,"readwrite"),r=n.objectStore(Zt);await r.put(t,rn(e)),await n.done}catch(n){if(n instanceof Ve)At.warn(n.message);else{const e=jt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});At.warn(e.message)}}}function rn(e){return"".concat(e.name,"!").concat(e.options.appId)}class sn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new an(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=on();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=on(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ln(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ln(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ie(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function on(){return(new Date).toISOString().substring(0,10)}class an{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Be()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await tn();return await t.transaction(Zt).objectStore(Zt).get(rn(e))}catch(t){if(t instanceof Ve)At.warn(t.message);else{const e=jt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});At.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ln(e){return Ie(JSON.stringify({version:2,heartbeats:e})).length}var cn;cn="",Ft(new Ze("platform-logger",(e=>new Ct(e)),"PRIVATE")),Ft(new Ze("heartbeat",(e=>new sn(e)),"PRIVATE")),Gt(kt,xt,cn),Gt(kt,xt,"esm2017"),Gt("fire-js","");class un{constructor(e,t){this._delegate=e,this.firebase=t,Lt(e,new Ze("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ht(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Lt(this._delegate,e)}_addOrOverwriteComponent(e){Mt(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const dn=new je("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const hn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Kt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if($e(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Gt,setLogLevel:Qt,onLog:Yt,apps:null,SDK_VERSION:$t,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Ft(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw dn.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Ce(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!$e(n,e=e||Ot))throw dn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(un);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ce(n,e)},createSubscribe:Ye,ErrorFactory:je,deepExtend:Ce}),n}(),fn=new ct("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){fn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&fn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const pn=hn;!function(e){Gt("@firebase/app-compat","0.2.25",e)}();pn.registerVersion("firebase","10.7.1","app-compat");var gn,mn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},yn={},vn=vn||{},_n=mn||self;function wn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function bn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Tn="closure_uid_"+(1e9*Math.random()>>>0),En=0;function Sn(e,t,n){return e.call.apply(e.bind,arguments)}function In(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Nn(e,t,n){return(Nn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Sn:In).apply(null,arguments)}function Cn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function kn(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function xn(){this.s=this.s,this.o=this.o}xn.prototype.s=!1,xn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Tn)&&e[Tn]||(e[Tn]=++En))},xn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const An=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function On(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Rn(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(wn(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Dn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Dn.prototype.h=function(){this.defaultPrevented=!0};var Pn=function(){if(!_n.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};_n.addEventListener("test",e,t),_n.removeEventListener("test",e,t)}catch(n){}return e}();function Ln(e){return/^[\s\xa0]*$/.test(e)}function Mn(){var e=_n.navigator;return e&&(e=e.userAgent)?e:""}function Fn(e){return-1!=Mn().indexOf(e)}function Un(e){return Un[" "](e),e}Un[" "]=function(){};var Bn,Vn,jn=Fn("Opera"),zn=Fn("Trident")||Fn("MSIE"),$n=Fn("Edge"),Kn=$n||zn,Wn=Fn("Gecko")&&!(-1!=Mn().toLowerCase().indexOf("webkit")&&!Fn("Edge"))&&!(Fn("Trident")||Fn("MSIE"))&&!Fn("Edge"),qn=-1!=Mn().toLowerCase().indexOf("webkit")&&!Fn("Edge");function Hn(){var e=_n.document;return e?e.documentMode:void 0}e:{var Gn="",Yn=function(){var e=Mn();return Wn?/rv:([^\);]+)(\)|;)/.exec(e):$n?/Edge\/([\d\.]+)/.exec(e):zn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):qn?/WebKit\/(\S+)/.exec(e):jn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Yn&&(Gn=Yn?Yn[1]:""),zn){var Qn=Hn();if(null!=Qn&&Qn>parseFloat(Gn)){Bn=String(Qn);break e}}Bn=Gn}if(_n.document&&zn){var Jn=Hn();Vn=Jn||(parseInt(Bn,10)||void 0)}else Vn=void 0;var Xn=Vn;function Zn(e,t){if(Dn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Wn){e:{try{Un(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:er[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Zn.$.h.call(this)}}kn(Zn,Dn);var er={2:"touch",3:"pen",4:"mouse"};Zn.prototype.h=function(){Zn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var tr="closure_listenable_"+(1e6*Math.random()|0),nr=0;function rr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++nr,this.fa=this.ia=!1}function ir(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function sr(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function or(e){const t={};for(const n in e)t[n]=e[n];return t}const ar="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<ar.length;t++)n=ar[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function cr(e){this.src=e,this.g={},this.h=0}function ur(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=An(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ir(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function dr(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}cr.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=dr(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new rr(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var hr="closure_lm_"+(1e6*Math.random()|0),fr={};function pr(e,t,n,r,i){if(r&&r.once)return mr(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)pr(e,t[s],n,r,i);return null}return n=Er(n),e&&e[tr]?e.O(t,n,bn(r)?!!r.capture:!!r,i):gr(e,t,n,!1,r,i)}function gr(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=bn(i)?!!i.capture:!!i,a=br(e);if(a||(e[hr]=a=new cr(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=wr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Pn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(_r(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function mr(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)mr(e,t[s],n,r,i);return null}return n=Er(n),e&&e[tr]?e.P(t,n,bn(r)?!!r.capture:!!r,i):gr(e,t,n,!0,r,i)}function yr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)yr(e,t[s],n,r,i);else r=bn(r)?!!r.capture:!!r,n=Er(n),e&&e[tr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=dr(s=e.g[t],n,r,i))&&(ir(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=br(e))&&(t=e.g[t.toString()],e=-1,t&&(e=dr(t,n,r,i)),(n=-1<e?t[e]:null)&&vr(n))}function vr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[tr])ur(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(_r(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=br(t))?(ur(n,e),0==n.h&&(n.src=null,t[hr]=null)):ir(e)}}}function _r(e){return e in fr?fr[e]:fr[e]="on"+e}function wr(e,t){if(e.fa)e=!0;else{t=new Zn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&vr(e),e=n.call(r,t)}return e}function br(e){return(e=e[hr])instanceof cr?e:null}var Tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Er(e){return"function"===typeof e?e:(e[Tr]||(e[Tr]=function(t){return e.handleEvent(t)}),e[Tr])}function Sr(){xn.call(this),this.i=new cr(this),this.S=this,this.J=null}function Ir(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Dn(t,e);else if(t instanceof Dn)t.target=t.target||e;else{var i=t;lr(t=new Dn(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Nr(o,r,!0,t)&&i}if(i=Nr(o=t.g=e,r,!0,t)&&i,i=Nr(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Nr(o=t.g=n[s],r,!1,t)&&i}function Nr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ur(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}kn(Sr,xn),Sr.prototype[tr]=!0,Sr.prototype.removeEventListener=function(e,t,n,r){yr(this,e,t,n,r)},Sr.prototype.N=function(){if(Sr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ir(n[r]);delete t.g[e],t.h--}}this.J=null},Sr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Sr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Cr=_n.JSON.stringify;function kr(){var e=Lr;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var xr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Ar),(e=>e.reset()));class Ar{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Or(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Rr(e){_n.setTimeout((()=>{throw e}),0)}let Dr,Pr=!1,Lr=new class{constructor(){this.h=this.g=null}add(e,t){const n=xr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Mr=()=>{const e=_n.Promise.resolve(void 0);Dr=()=>{e.then(Fr)}};var Fr=()=>{for(var e;e=kr();){try{e.h.call(e.g)}catch(n){Rr(n)}var t=xr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Pr=!1};function Ur(e,t){Sr.call(this),this.h=e||1,this.g=t||_n,this.j=Nn(this.qb,this),this.l=Date.now()}function Br(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Vr(e,t,n){if("function"===typeof e)n&&(e=Nn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Nn(e.handleEvent,e)}return 2147483647<Number(t)?-1:_n.setTimeout(e,t||0)}function jr(e){e.g=Vr((()=>{e.g=null,e.i&&(e.i=!1,jr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}kn(Ur,Sr),(gn=Ur.prototype).ga=!1,gn.T=null,gn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ir(this,"tick"),this.ga&&(Br(this),this.start()))}},gn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gn.N=function(){Ur.$.N.call(this),Br(this),delete this.g};class zr extends xn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(_n.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(e){xn.call(this),this.h=e,this.g={}}kn($r,xn);var Kr=[];function Wr(e,t,n,r){Array.isArray(n)||(n&&(Kr[0]=n.toString()),n=Kr);for(var i=0;i<n.length;i++){var s=pr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function qr(e){sr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&vr(e)}),e),e.g={}}function Hr(){this.g=!0}function Gr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Cr(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}$r.prototype.N=function(){$r.$.N.call(this),qr(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hr.prototype.Ea=function(){this.g=!1},Hr.prototype.info=function(){};var Yr={},Qr=null;function Jr(){return Qr=Qr||new Sr}function Xr(e){Dn.call(this,Yr.Ta,e)}function Zr(e){const t=Jr();Ir(t,new Xr(t))}function ei(e,t){Dn.call(this,Yr.STAT_EVENT,e),this.stat=t}function ti(e){const t=Jr();Ir(t,new ei(t,e))}function ni(e,t){Dn.call(this,Yr.Ua,e),this.size=t}function ri(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return _n.setTimeout((function(){e()}),t)}Yr.Ta="serverreachability",kn(Xr,Dn),Yr.STAT_EVENT="statevent",kn(ei,Dn),Yr.Ua="timingevent",kn(ni,Dn);var ii={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},si={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function oi(){}function ai(e){return e.h||(e.h=e.i())}function li(){}oi.prototype.h=null;var ci,ui={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function di(){Dn.call(this,"d")}function hi(){Dn.call(this,"c")}function fi(){}function pi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new $r(this),this.P=mi,e=Kn?125:void 0,this.V=new Ur(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gi}function gi(){this.i=null,this.g="",this.h=!1}kn(di,Dn),kn(hi,Dn),kn(fi,oi),fi.prototype.g=function(){return new XMLHttpRequest},fi.prototype.i=function(){return{}},ci=new fi;var mi=45e3,yi={},vi={};function _i(e,t,n){e.L=1,e.A=Ui(Di(t)),e.u=n,e.S=!0,wi(e,null)}function wi(e,t){e.G=Date.now(),Si(e),e.B=Di(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Ji(n.i,"t",r),e.o=0,n=e.l.J,e.h=new gi,e.g=Xs(e.l,n?t:null,!e.u),0<e.O&&(e.M=new zr(Nn(e.Pa,e,e.g),e.O)),Wr(e.U,e.g,"readystatechange",e.nb),t=e.I?or(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Zr(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function bi(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Ti(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Ei(e,n),r==vi){4==t&&(e.s=4,ti(14),i=!1),Gr(e.j,e.m,null,"[Incomplete Response]");break}if(r==yi){e.s=4,ti(15),Gr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Gr(e.j,e.m,r,null),xi(e,r)}bi(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,ti(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ks(t),t.M=!0,ti(11))):(Gr(e.j,e.m,n,"[Invalid Chunked Response]"),ki(e),Ci(e))}function Ei(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?vi:(n=Number(t.substring(n,r)),isNaN(n)?yi:(r+=1)+n>t.length?vi:(t=t.slice(r,r+n),e.o=r+n,t))}function Si(e){e.Y=Date.now()+e.P,Ii(e,e.P)}function Ii(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ri(Nn(e.lb,e),t)}function Ni(e){e.C&&(_n.clearTimeout(e.C),e.C=null)}function Ci(e){0==e.l.H||e.J||Hs(e.l,e)}function ki(e){Ni(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Br(e.V),qr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function xi(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||is(n.i,e)))if(!e.K&&is(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;qs(n),Ms(n)}$s(n),ti(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ri(Nn(n.ib,n),6e3));if(1>=rs(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Ys(n,11)}else if((e.K||n.g==e)&&qs(n),!Ln(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ss(s,s.h),s.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Fi(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Js(r,r.J?r.pa:null,r.Y),o.K){os(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Ni(a),Si(a)),r.g=o}else zs(r);0<n.j.length&&Us(n)}else"stop"!=c[0]&&"close"!=c[0]||Ys(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ys(n,7):Ls(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Zr()}catch(c){}}function Ai(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(wn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(wn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(wn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(gn=pi.prototype).setTimeout=function(e){this.P=e},gn.nb=function(e){e=e.target;const t=this.M;t&&3==xs(e)?t.l():this.Pa(e)},gn.Pa=function(e){try{if(e==this.g)e:{const u=xs(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Kn||this.g&&(this.h.h||this.g.ja()||As(this.g)))){this.J||4!=u||7==t||Zr(),Ni(this);var n=this.g.da();this.ca=n;t:if(bi(this)){var r=As(this.g);e="";var i=r.length,s=4==xs(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ki(this),Ci(this);var o="";break t}this.h.i=new _n.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ln(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,ti(12),ki(this),Ci(this);break e}Gr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xi(this,n)}this.S?(Ti(this,u,o),Kn&&this.i&&3==u&&(Wr(this.U,this.V,"tick",this.mb),this.V.start())):(Gr(this.j,this.m,o,null),xi(this,o)),4==u&&ki(this),this.i&&!this.J&&(4==u?Hs(this.l,this):(this.i=!1,Si(this)))}else(function(e){const t={};e=(e.g&&2<=xs(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Ln(e[r]))continue;var n=Or(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,ti(12)):(this.s=0,ti(13)),ki(this),Ci(this)}}}catch(u){}},gn.mb=function(){if(this.g){var e=xs(this.g),t=this.g.ja();this.o<t.length&&(Ni(this),Ti(this,e,t),this.i&&4!=e&&Si(this))}},gn.cancel=function(){this.J=!0,ki(this)},gn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Zr(),ti(17)),ki(this),this.s=2,Ci(this)):Ii(this,this.Y-e)};var Oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ri(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ri){this.h=e.h,Pi(this,e.j),this.s=e.s,this.g=e.g,Li(this,e.m),this.l=e.l;var t=e.i,n=new Hi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Mi(this,n),this.o=e.o}else e&&(t=String(e).match(Oi))?(this.h=!1,Pi(this,t[1]||"",!0),this.s=Bi(t[2]||""),this.g=Bi(t[3]||"",!0),Li(this,t[4]),this.l=Bi(t[5]||"",!0),Mi(this,t[6]||"",!0),this.o=Bi(t[7]||"")):(this.h=!1,this.i=new Hi(null,this.h))}function Di(e){return new Ri(e)}function Pi(e,t,n){e.j=n?Bi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Li(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Mi(e,t,n){t instanceof Hi?(e.i=t,function(e,t){t&&!e.j&&(Gi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Yi(this,t),Ji(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Vi(t,Wi)),e.i=new Hi(t,e.h))}function Fi(e,t,n){e.i.set(t,n)}function Ui(e){return Fi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Bi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ji),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ji(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ri.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Vi(t,zi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Vi(t,zi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vi(n,"/"==n.charAt(0)?Ki:$i,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Vi(n,qi)),e.join("")};var zi=/[#\/\?@]/g,$i=/[#\?:]/g,Ki=/[#\?]/g,Wi=/[#\?@]/g,qi=/#/g;function Hi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Gi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Yi(e,t){Gi(e),t=Xi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Qi(e,t){return Gi(e),t=Xi(e,t),e.g.has(t)}function Ji(e,t,n){Yi(e,t),0<n.length&&(e.i=null,e.g.set(Xi(e,t),On(n)),e.h+=n.length)}function Xi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(gn=Hi.prototype).add=function(e,t){Gi(this),this.i=null,e=Xi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},gn.forEach=function(e,t){Gi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},gn.ta=function(){Gi(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},gn.Z=function(e){Gi(this);let t=[];if("string"===typeof e)Qi(this,e)&&(t=t.concat(this.g.get(Xi(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},gn.set=function(e,t){return Gi(this),this.i=null,Qi(this,e=Xi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},gn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},gn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Zi=class{constructor(e,t){this.g=e,this.map=t}};function es(e){this.l=e||ts,_n.PerformanceNavigationTiming?e=0<(e=_n.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(_n.g&&_n.g.Ka&&_n.g.Ka()&&_n.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ts=10;function ns(e){return!!e.h||!!e.g&&e.g.size>=e.j}function rs(e){return e.h?1:e.g?e.g.size:0}function is(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ss(e,t){e.g?e.g.add(t):e.h=t}function os(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function as(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return On(e.i)}es.prototype.cancel=function(){if(this.i=as(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ls,cs=class{stringify(e){return _n.JSON.stringify(e,void 0)}parse(e){return _n.JSON.parse(e,void 0)}};function us(){this.g=new cs}function ds(e,t,n){const r=n||"";try{Ai(e,(function(e,n){let i=e;bn(e)&&(i=Cr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function hs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function fs(e){this.l=e.ec||null,this.j=e.ob||!1}function ps(e,t){Sr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=gs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kn(fs,oi),fs.prototype.g=function(){return new ps(this.l,this.j)},fs.prototype.i=(ls={},function(){return ls}),kn(ps,Sr);var gs=0;function ms(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ys(e){e.readyState=4,e.l=null,e.j=null,e.A=null,vs(e)}function vs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(gn=ps.prototype).open=function(e,t){if(this.readyState!=gs)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,vs(this)},gn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||_n).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},gn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ys(this)),this.readyState=gs},gn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,vs(this)),this.g&&(this.readyState=3,vs(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof _n.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ms(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},gn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ys(this):vs(this),3==this.readyState&&ms(this)}},gn.Za=function(e){this.g&&(this.response=this.responseText=e,ys(this))},gn.Ya=function(e){this.g&&(this.response=e,ys(this))},gn.ka=function(){this.g&&ys(this)},gn.setRequestHeader=function(e,t){this.v.append(e,t)},gn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},gn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ps.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var _s=_n.JSON.parse;function ws(e){Sr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bs,this.L=this.M=!1}kn(ws,Sr);var bs="",Ts=/^https?$/i,Es=["POST","PUT"];function Ss(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Is(e),Cs(e)}function Is(e){e.F||(e.F=!0,Ir(e,"complete"),Ir(e,"error"))}function Ns(e){if(e.h&&"undefined"!=typeof vn&&(!e.C[1]||4!=xs(e)||2!=e.da()))if(e.v&&4==xs(e))Vr(e.La,0,e);else if(Ir(e,"readystatechange"),4==xs(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Oi)[1]||null;!i&&_n.self&&_n.self.location&&(i=_n.self.location.protocol.slice(0,-1)),r=!Ts.test(i?i.toLowerCase():"")}n=r}if(n)Ir(e,"complete"),Ir(e,"success");else{e.m=6;try{var s=2<xs(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Is(e)}}finally{Cs(e)}}}function Cs(e,t){if(e.g){ks(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ir(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function ks(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(_n.clearTimeout(e.A),e.A=null)}function xs(e){return e.g?e.g.readyState:0}function As(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case bs:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Uo){return null}}function Os(e){let t="";return sr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Rs(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Os(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Fi(e,t,n))}function Ds(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ps(e){this.Ga=0,this.j=[],this.l=new Hr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ds("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ds("baseRetryDelayMs",5e3,e),this.hb=Ds("retryDelaySeedMs",1e4,e),this.eb=Ds("forwardChannelMaxRetries",2,e),this.xa=Ds("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new es(e&&e.concurrentRequestLimit),this.Ja=new us,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ls(e){if(Fs(e),3==e.H){var t=e.W++,n=Di(e.I);if(Fi(n,"SID",e.K),Fi(n,"RID",t),Fi(n,"TYPE","terminate"),Vs(e,n),(t=new pi(e,e.l,t)).L=2,t.A=Ui(Di(n)),n=!1,_n.navigator&&_n.navigator.sendBeacon)try{n=_n.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&_n.Image&&((new Image).src=t.A,n=!0),n||(t.g=Xs(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Si(t)}Qs(e)}function Ms(e){e.g&&(Ks(e),e.g.cancel(),e.g=null)}function Fs(e){Ms(e),e.u&&(_n.clearTimeout(e.u),e.u=null),qs(e),e.i.cancel(),e.m&&("number"===typeof e.m&&_n.clearTimeout(e.m),e.m=null)}function Us(e){if(!ns(e.i)&&!e.m){e.m=!0;var t=e.Na;Dr||Mr(),Pr||(Dr(),Pr=!0),Lr.add(t,e),e.C=0}}function Bs(e,t){var n;n=t?t.m:e.W++;const r=Di(e.I);Fi(r,"SID",e.K),Fi(r,"RID",n),Fi(r,"AID",e.V),Vs(e,r),e.o&&e.s&&Rs(r,e.o,e.s),n=new pi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=js(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ss(e.i,n),_i(n,r,t)}function Vs(e,t){e.na&&sr(e.na,(function(e,n){Fi(t,n,e)})),e.h&&Ai({},(function(e,n){Fi(t,n,e)}))}function js(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Nn(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{ds(a,e,"req"+n+"_")}catch(tl){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function zs(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Dr||Mr(),Pr||(Dr(),Pr=!0),Lr.add(t,e),e.A=0}}function $s(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ri(Nn(e.Ma,e),Gs(e,e.A)),e.A++,!0)}function Ks(e){null!=e.B&&(_n.clearTimeout(e.B),e.B=null)}function Ws(e){e.g=new pi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Di(e.wa);Fi(t,"RID","rpc"),Fi(t,"SID",e.K),Fi(t,"AID",e.V),Fi(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Fi(t,"TO",e.qa),Fi(t,"TYPE","xmlhttp"),Vs(e,t),e.o&&e.s&&Rs(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Ui(Di(t)),n.u=null,n.S=!0,wi(n,e)}function qs(e){null!=e.v&&(_n.clearTimeout(e.v),e.v=null)}function Hs(e,t){var n=null;if(e.g==t){qs(e),Ks(e),e.g=null;var r=2}else{if(!is(e.i,t))return;n=t.F,os(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Ir(r=Jr(),new ni(r,n)),Us(e)}else zs(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(rs(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ri(Nn(e.Na,e,t),Gs(e,e.C)),e.C++,!0))}(e,t)||2==r&&$s(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ys(e,5);break;case 4:Ys(e,10);break;case 3:Ys(e,6);break;default:Ys(e,2)}}function Gs(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ys(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Nn(e.pb,e);n||(n=new Ri("//www.google.com/images/cleardot.gif"),_n.location&&"http"==_n.location.protocol||Pi(n,"https"),Ui(n)),function(e,t){const n=new Hr;if(_n.Image){const r=new Image;r.onload=Cn(hs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Cn(hs,n,r,"TestLoadImage: error",!1,t),r.onabort=Cn(hs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Cn(hs,n,r,"TestLoadImage: timeout",!1,t),_n.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ti(2);e.H=0,e.h&&e.h.za(t),Qs(e),Fs(e)}function Qs(e){if(e.H=0,e.ma=[],e.h){const t=as(e.i);0==t.length&&0==e.j.length||(Rn(e.ma,t),Rn(e.ma,e.j),e.i.i.length=0,On(e.j),e.j.length=0),e.h.ya()}}function Js(e,t,n){var r=n instanceof Ri?Di(n):new Ri(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Li(r,r.m);else{var i=_n.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Ri(null);r&&Pi(s,r),t&&(s.g=t),i&&Li(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Fi(r,n,t),Fi(r,"VER",e.ra),Vs(e,r),r}function Xs(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new ws(new fs({ob:n})):new ws(e.va)).Oa(e.J),t}function Zs(){}function eo(){if(zn&&!(10<=Number(Xn)))throw Error("Environmental error: no available transport.")}function to(e,t){Sr.call(this),this.g=new Ps(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ln(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ln(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new io(this)}function no(e){di.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ro(){hi.call(this),this.status=1}function io(e){this.g=e}function so(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function oo(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function ao(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(gn=ws.prototype).Oa=function(e){this.M=e},gn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ci.g(),this.C=this.u?ai(this.u):ai(ci),this.g.onreadystatechange=Nn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Ss(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=_n.FormData&&e instanceof _n.FormData,!(0<=An(Es,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ks(this),0<this.B&&((this.L=function(e){return zn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nn(this.ua,this)):this.A=Vr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Ss(this,s)}},gn.ua=function(){"undefined"!=typeof vn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ir(this,"timeout"),this.abort(8))},gn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ir(this,"complete"),Ir(this,"abort"),Cs(this))},gn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cs(this,!0)),ws.$.N.call(this)},gn.La=function(){this.s||(this.G||this.v||this.l?Ns(this):this.kb())},gn.kb=function(){Ns(this)},gn.isActive=function(){return!!this.g},gn.da=function(){try{return 2<xs(this)?this.g.status:-1}catch(ls){return-1}},gn.ja=function(){try{return this.g?this.g.responseText:""}catch(ls){return""}},gn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),_s(t)}},gn.Ia=function(){return this.m},gn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(gn=Ps.prototype).ra=8,gn.H=1,gn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new pi(this,this.l,e);let s=this.s;if(this.U&&(s?(s=or(s),lr(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=js(this,i,t),Fi(n=Di(this.I),"RID",e),Fi(n,"CVER",22),this.F&&Fi(n,"X-HTTP-Session-Id",this.F),Vs(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Os(s)))+"&"+t:this.o&&Rs(n,this.o,s)),ss(this.i,i),this.bb&&Fi(n,"TYPE","init"),this.P?(Fi(n,"$req",t),Fi(n,"SID","null"),i.aa=!0,_i(i,n,null)):_i(i,n,t),this.H=2}}else 3==this.H&&(e?Bs(this,e):0==this.j.length||ns(this.i)||Bs(this))},gn.Ma=function(){if(this.u=null,Ws(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ri(Nn(this.jb,this),e)}},gn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ti(10),Ms(this),Ws(this))},gn.ib=function(){null!=this.v&&(this.v=null,Ms(this),$s(this),ti(19))},gn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ti(2)):(this.l.info("Failed to ping google.com"),ti(1))},gn.isActive=function(){return!!this.h&&this.h.isActive(this)},(gn=Zs.prototype).Ba=function(){},gn.Aa=function(){},gn.za=function(){},gn.ya=function(){},gn.isActive=function(){return!0},gn.Va=function(){},eo.prototype.g=function(e,t){return new to(e,t)},kn(to,Sr),to.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ti(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Js(e,null,e.Y),Us(e)},to.prototype.close=function(){Ls(this.g)},to.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Cr(e),e=n);t.j.push(new Zi(t.fb++,e)),3==t.H&&Us(t)},to.prototype.N=function(){this.g.h=null,delete this.j,Ls(this.g),delete this.g,to.$.N.call(this)},kn(no,di),kn(ro,hi),kn(io,Zs),io.prototype.Ba=function(){Ir(this.g,"a")},io.prototype.Aa=function(e){Ir(this.g,new no(e))},io.prototype.za=function(e){Ir(this.g,new ro)},io.prototype.ya=function(){Ir(this.g,"b")},kn(so,(function(){this.blockSize=-1})),so.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},so.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)oo(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){oo(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){oo(this,r),i=0;break}}this.h=i,this.i+=t},so.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var lo={};function co(e){return-128<=e&&128>e?function(e,t){var n=lo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new ao([0|e],0>e?-1:0)})):new ao([0|e],0>e?-1:0)}function uo(e){if(isNaN(e)||!isFinite(e))return fo;if(0>e)return vo(uo(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ho;return new ao(t,0)}var ho=4294967296,fo=co(0),po=co(1),go=co(16777216);function mo(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function yo(e){return-1==e.h}function vo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ao(n,~e.h).add(po)}function _o(e,t){return e.add(vo(t))}function wo(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function bo(e,t){this.g=e,this.h=t}function To(e,t){if(mo(t))throw Error("division by zero");if(mo(e))return new bo(fo,fo);if(yo(e))return t=To(vo(e),t),new bo(vo(t.g),vo(t.h));if(yo(t))return t=To(e,vo(t)),new bo(vo(t.g),t.h);if(30<e.g.length){if(yo(e)||yo(t))throw Error("slowDivide_ only works with positive integers.");for(var n=po,r=t;0>=r.X(e);)n=Eo(n),r=Eo(r);var i=So(n,1),s=So(r,1);for(r=So(r,2),n=So(n,2);!mo(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=So(r,1),n=So(n,1)}return t=_o(e,i.R(t)),new bo(i,t)}for(i=fo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=uo(n)).R(t);yo(o)||0<o.X(e);)o=(s=uo(n-=r)).R(t);mo(s)&&(s=po),i=i.add(s),e=_o(e,o)}return new bo(i,e)}function Eo(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ao(n,e.h)}function So(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new ao(i,e.h)}(gn=ao.prototype).ea=function(){if(yo(this))return-vo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ho+r)*t,t*=ho}return e},gn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(mo(this))return"0";if(yo(this))return"-"+vo(this).toString(e);for(var t=uo(Math.pow(e,6)),n=this,r="";;){var i=To(n,t).g,s=((0<(n=_o(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(mo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},gn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},gn.X=function(e){return yo(e=_o(this,e))?-1:mo(e)?0:1},gn.abs=function(){return yo(this)?vo(this):this},gn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ao(n,-2147483648&n[n.length-1]?-1:0)},gn.R=function(e){if(mo(this)||mo(e))return fo;if(yo(this))return yo(e)?vo(this).R(vo(e)):vo(vo(this).R(e));if(yo(e))return vo(this.R(vo(e)));if(0>this.X(go)&&0>e.X(go))return uo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,wo(n,2*r+2*i),n[2*r+2*i+1]+=s*l,wo(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,wo(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,wo(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ao(n,0)},gn.gb=function(e){return To(this,e).h},gn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ao(n,this.h&e.h)},gn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ao(n,this.h|e.h)},gn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ao(n,this.h^e.h)},eo.prototype.createWebChannel=eo.prototype.g,to.prototype.send=to.prototype.u,to.prototype.open=to.prototype.m,to.prototype.close=to.prototype.close,ii.NO_ERROR=0,ii.TIMEOUT=8,ii.HTTP_ERROR=6,si.COMPLETE="complete",li.EventType=ui,ui.OPEN="a",ui.CLOSE="b",ui.ERROR="c",ui.MESSAGE="d",Sr.prototype.listen=Sr.prototype.O,ws.prototype.listenOnce=ws.prototype.P,ws.prototype.getLastError=ws.prototype.Sa,ws.prototype.getLastErrorCode=ws.prototype.Ia,ws.prototype.getStatus=ws.prototype.da,ws.prototype.getResponseJson=ws.prototype.Wa,ws.prototype.getResponseText=ws.prototype.ja,ws.prototype.send=ws.prototype.ha,ws.prototype.setWithCredentials=ws.prototype.Oa,so.prototype.digest=so.prototype.l,so.prototype.reset=so.prototype.reset,so.prototype.update=so.prototype.j,ao.prototype.add=ao.prototype.add,ao.prototype.multiply=ao.prototype.R,ao.prototype.modulo=ao.prototype.gb,ao.prototype.compare=ao.prototype.X,ao.prototype.toNumber=ao.prototype.ea,ao.prototype.toString=ao.prototype.toString,ao.prototype.getBits=ao.prototype.D,ao.fromNumber=uo,ao.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return vo(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=uo(Math.pow(n,8)),i=fo,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=uo(Math.pow(n,o)),i=i.R(o).add(uo(a))):i=(i=i.R(r)).add(uo(a))}return i};var Io=yn.createWebChannelTransport=function(){return new eo},No=yn.getStatEventTarget=function(){return Jr()},Co=yn.ErrorCode=ii,ko=yn.EventType=si,xo=yn.Event=Yr,Ao=yn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Oo=(yn.FetchXmlHttpFactory=fs,yn.WebChannel=li),Ro=yn.XhrIo=ws,Do=yn.Md5=so,Po=yn.Integer=ao;const Lo="@firebase/firestore";class Mo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mo.UNAUTHENTICATED=new Mo(null),Mo.GOOGLE_CREDENTIALS=new Mo("google-credentials-uid"),Mo.FIRST_PARTY=new Mo("first-party-uid"),Mo.MOCK_USER=new Mo("mock-user");let Fo="10.7.0";const Uo=new ct("@firebase/firestore");function Bo(){return Uo.logLevel}function Vo(e){if(Uo.logLevel<=it.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($o);Uo.debug("Firestore (".concat(Fo,"): ").concat(e),...i)}}function jo(e){if(Uo.logLevel<=it.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($o);Uo.error("Firestore (".concat(Fo,"): ").concat(e),...i)}}function zo(e){if(Uo.logLevel<=it.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map($o);Uo.warn("Firestore (".concat(Fo,"): ").concat(e),...i)}}function $o(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ko(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Fo,") INTERNAL ASSERTION FAILED: ")+e;throw jo(t),new Error(t)}function Wo(e,t){e||Ko()}function qo(e,t){return e}const Ho={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Go extends Ve{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Yo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Qo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Jo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mo.UNAUTHENTICATED)))}shutdown(){}}class Xo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Zo{constructor(e){this.t=e,this.currentUser=Mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Yo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yo,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Vo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Vo("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Vo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Wo("string"==typeof t.accessToken),new Qo(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Wo(null===e||"string"==typeof e),new Mo(e)}}class ea{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Mo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ta{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ea(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Mo.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class na{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ra{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Vo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Vo("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Vo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Vo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Wo("string"==typeof e.token),this.R=e.token,new na(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ia(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class sa{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ia(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function oa(e,t){return e<t?-1:e>t?1:0}function aa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function la(e){return e+"\0"}class ca{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Go(Ho.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Go(Ho.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Go(Ho.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Go(Ho.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ca.fromMillis(Date.now())}static fromDate(e){return ca.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ca(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oa(this.nanoseconds,e.nanoseconds):oa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ua{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ua(e)}static min(){return new ua(new ca(0,0))}static max(){return new ua(new ca(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class da{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ko(),void 0===n?n=e.length-t:n>e.length-t&&Ko(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===da.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof da?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ha extends da{construct(e,t,n){return new ha(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Go(Ho.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ha(e)}static emptyPath(){return new ha([])}}const fa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pa extends da{construct(e,t,n){return new pa(e,t,n)}static isValidIdentifier(e){return fa.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pa(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Go(Ho.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Go(Ho.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Go(Ho.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Go(Ho.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pa(t)}static emptyPath(){return new pa([])}}class ga{constructor(e){this.path=e}static fromPath(e){return new ga(ha.fromString(e))}static fromName(e){return new ga(ha.fromString(e).popFirst(5))}static empty(){return new ga(ha.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ha.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ha.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ga(new ha(e.slice()))}}class ma{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ya(e){return e.fields.find((e=>2===e.kind))}function va(e){return e.fields.filter((e=>2!==e.kind))}ma.UNKNOWN_ID=-1;class _a{constructor(e,t){this.fieldPath=e,this.kind=t}}class wa{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wa(0,Ea.min())}}function ba(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ua.fromTimestamp(1e9===r?new ca(n+1,0):new ca(n,r));return new Ea(i,ga.empty(),t)}function Ta(e){return new Ea(e.readTime,e.key,-1)}class Ea{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ea(ua.min(),ga.empty(),-1)}static max(){return new Ea(ua.max(),ga.empty(),-1)}}function Sa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ga.comparator(e.documentKey,t.documentKey),0!==n?n:oa(e.largestBatchId,t.largestBatchId))}const Ia="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Na{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ca(e){if(e.code!==Ho.FAILED_PRECONDITION||e.message!==Ia)throw e;Vo("LocalStore","Unexpectedly lost primary lease")}class ka{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ko(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ka(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ka?t:ka.resolve(t)}catch(e){return ka.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ka.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ka.reject(t)}static resolve(e){return new ka(((t,n)=>{t(e)}))}static reject(e){return new ka(((t,n)=>{n(e)}))}static waitFor(e){return new ka(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ka.resolve(!1);for(const n of e)t=t.next((e=>e?ka.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ka(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ka(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class xa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Yo,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ra(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Fa(t.target.error);this.V.reject(new Ra(e,n))}}static open(e,t,n,r){try{return new xa(t,e.transaction(r,n))}catch(e){throw new Ra(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Vo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Pa(t)}}class Aa{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Aa.S(De())&&jo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Vo("SimpleDb","Removing database:",e),La(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Be())return!1;if(Aa.C())return!0;const e=De(),t=Aa.S(e),n=0<t&&t<10,r=Aa.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Vo("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ra(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Go(Ho.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Go(Ho.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ra(e,r))},r.onupgradeneeded=e=>{Vo("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Vo("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=xa.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),ka.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Vo("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Oa{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return La(this.k.delete())}}class Ra extends Go{constructor(e,t){super(Ho.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Da(e){return"IndexedDbTransactionError"===e.name}class Pa{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Vo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Vo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),La(n)}add(e){return Vo("SimpleDb","ADD",this.store.name,e,e),La(this.store.add(e))}get(e){return La(this.store.get(e)).next((t=>(void 0===t&&(t=null),Vo("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Vo("SimpleDb","DELETE",this.store.name,e),La(this.store.delete(e))}count(){return Vo("SimpleDb","COUNT",this.store.name),La(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new ka(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ka(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Vo("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new ka(((n,r)=>{t.onerror=e=>{const t=Fa(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new ka(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Oa(i),o=t(i.primaryKey,i.value,s);if(o instanceof ka){const e=o.catch((e=>(s.done(),ka.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>ka.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function La(e){return new ka(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Fa(e.target.error);n(t)}}))}let Ma=!1;function Fa(e){const t=Aa.S(De());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Go("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ma||(Ma=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ua{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Vo("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Vo("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){Da(e)?Vo("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Ca(e)}await this.ee(6e4)}))}}class Ba{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return ka.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Vo("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Vo("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ta(t);Sa(r,n)>0&&(n=r)})),new Ea(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Va{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function ja(e){return null==e}function za(e){return 0===e&&1/e==-1/0}function $a(e){return"number"==typeof e&&Number.isInteger(e)&&!za(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Ka(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=qa(t)),t=Wa(e.get(n),t);return qa(t)}function Wa(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function qa(e){return e+"\x01\x01"}function Ha(e){const t=e.length;if(Wo(t>=2),2===t)return Wo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ha.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Ko(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Ko()}s=t+2}return new ha(r)}Va._e=-1;const Ga=["userId","batchId"];function Ya(e,t){return[e,Ka(t)]}function Qa(e,t,n){return[e,Ka(t),n]}const Ja={},Xa=["prefixPath","collectionGroup","readTime","documentId"],Za=["prefixPath","collectionGroup","documentId"],el=["collectionGroup","readTime","prefixPath","documentId"],tl=["canonicalId","targetId"],nl=["targetId","path"],rl=["path","targetId"],il=["collectionId","parent"],sl=["indexId","uid"],ol=["uid","sequenceNumber"],al=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ll=["indexId","uid","orderedDocumentKey"],cl=["userId","collectionPath","documentId"],ul=["userId","collectionPath","largestBatchId"],dl=["userId","collectionGroup","largestBatchId"],hl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fl=[...hl,"documentOverlays"],pl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gl=pl,ml=[...gl,"indexConfiguration","indexState","indexEntries"];class yl extends Na{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function vl(e,t){const n=qo(e);return Aa.M(n.ae,t)}function _l(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Tl{constructor(e,t){this.comparator=e,this.root=t||Sl.EMPTY}insert(e,t){return new Tl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sl.BLACK,null,null))}remove(e){return new Tl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new El(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new El(this.root,e,this.comparator,!1)}getReverseIterator(){return new El(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new El(this.root,e,this.comparator,!0)}}class El{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Sl.RED,this.left=null!=r?r:Sl.EMPTY,this.right=null!=i?i:Sl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Sl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Sl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Sl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ko();if(this.right.isRed())throw Ko();const e=this.left.check();if(e!==this.right.check())throw Ko();return e+(this.isRed()?0:1)}}Sl.EMPTY=null,Sl.RED=!0,Sl.BLACK=!1,Sl.EMPTY=new class{constructor(){this.size=0}get key(){throw Ko()}get value(){throw Ko()}get color(){throw Ko()}get left(){throw Ko()}get right(){throw Ko()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Sl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Il{constructor(e){this.comparator=e,this.data=new Tl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nl(this.data.getIterator())}getIteratorFrom(e){return new Nl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Il))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Il(this.comparator);return t.data=e,t}}class Nl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cl(e){return e.hasNext()?e.getNext():void 0}class kl{constructor(e){this.fields=e,e.sort(pa.comparator)}static empty(){return new kl([])}unionWith(e){let t=new Il(pa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new kl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class xl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Al{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new xl("Invalid base64 string: "+e):e}}(e);return new Al(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Al(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Al.EMPTY_BYTE_STRING=new Al("");const Ol=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rl(e){if(Wo(!!e),"string"==typeof e){let t=0;const n=Ol.exec(e);if(Wo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Dl(e.seconds),nanos:Dl(e.nanos)}}function Dl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Pl(e){return"string"==typeof e?Al.fromBase64String(e):Al.fromUint8Array(e)}function Ll(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ml(e){const t=e.mapValue.fields.__previous_value__;return Ll(t)?Ml(t):t}function Fl(e){const t=Rl(e.mapValue.fields.__local_write_time__.timestampValue);return new ca(t.seconds,t.nanos)}class Ul{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Bl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Bl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Bl&&e.projectId===this.projectId&&e.database===this.database}}const Vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jl={nullValue:"NULL_VALUE"};function zl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ll(e)?4:nc(e)?9007199254740991:10:Ko()}function $l(e,t){if(e===t)return!0;const n=zl(e);if(n!==zl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fl(e).isEqual(Fl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Rl(e.timestampValue),r=Rl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Pl(e.bytesValue).isEqual(Pl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dl(e.geoPointValue.latitude)===Dl(t.geoPointValue.latitude)&&Dl(e.geoPointValue.longitude)===Dl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dl(e.integerValue)===Dl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Dl(e.doubleValue),r=Dl(t.doubleValue);return n===r?za(n)===za(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return aa(e.arrayValue.values||[],t.arrayValue.values||[],$l);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(_l(n)!==_l(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!$l(n[i],r[i])))return!1;return!0}(e,t);default:return Ko()}}function Kl(e,t){return void 0!==(e.values||[]).find((e=>$l(e,t)))}function Wl(e,t){if(e===t)return 0;const n=zl(e),r=zl(t);if(n!==r)return oa(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oa(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Dl(e.integerValue||e.doubleValue),r=Dl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ql(e.timestampValue,t.timestampValue);case 4:return ql(Fl(e),Fl(t));case 5:return oa(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Pl(e),r=Pl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=oa(n[i],r[i]);if(0!==e)return e}return oa(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=oa(Dl(e.latitude),Dl(t.latitude));return 0!==n?n:oa(Dl(e.longitude),Dl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Wl(n[i],r[i]);if(e)return e}return oa(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Vl.mapValue&&t===Vl.mapValue)return 0;if(e===Vl.mapValue)return 1;if(t===Vl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=oa(r[o],s[o]);if(0!==e)return e;const t=Wl(n[r[o]],i[s[o]]);if(0!==t)return t}return oa(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ko()}}function ql(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return oa(e,t);const n=Rl(e),r=Rl(t),i=oa(n.seconds,r.seconds);return 0!==i?i:oa(n.nanos,r.nanos)}function Hl(e){return Gl(e)}function Gl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Rl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Pl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ga.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Gl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Gl(e.fields[i]));return n+"}"}(e.mapValue):Ko()}function Yl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ql(e){return!!e&&"integerValue"in e}function Jl(e){return!!e&&"arrayValue"in e}function Xl(e){return!!e&&"nullValue"in e}function Zl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ec(e){return!!e&&"mapValue"in e}function tc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return wl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=tc(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function nc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function rc(e){return"nullValue"in e?jl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Yl(Bl.empty(),ga.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ko()}function ic(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Yl(Bl.empty(),ga.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Vl:Ko()}function sc(e,t){const n=Wl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function oc(e,t){const n=Wl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class ac{constructor(e){this.value=e}static empty(){return new ac({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ec(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(t)}setAll(e){let t=pa.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=tc(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ec(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $l(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ec(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){wl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ac(tc(this.value))}}function lc(e){const t=[];return wl(e.fields,((e,n)=>{const r=new pa([e]);if(ec(n)){const e=lc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new kl(t)}class cc{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new cc(e,0,ua.min(),ua.min(),ua.min(),ac.empty(),0)}static newFoundDocument(e,t,n,r){return new cc(e,1,t,ua.min(),n,r,0)}static newNoDocument(e,t){return new cc(e,2,t,ua.min(),ua.min(),ac.empty(),0)}static newUnknownDocument(e,t){return new cc(e,3,t,ua.min(),ua.min(),ac.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ua.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ac.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ac.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ua.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof cc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class uc{constructor(e,t){this.position=e,this.inclusive=t}}function dc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ga.comparator(ga.fromName(o.referenceValue),n.key):Wl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function hc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!$l(e.position[n],t.position[n]))return!1;return!0}class fc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function pc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class gc{}class mc extends gc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Nc(e,t,n):"array-contains"===t?new Ac(e,n):"in"===t?new Oc(e,n):"not-in"===t?new Rc(e,n):"array-contains-any"===t?new Dc(e,n):new mc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Cc(e,n):new kc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Wl(t,this.value)):null!==t&&zl(this.value)===zl(t)&&this.matchesComparison(Wl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ko()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yc extends gc{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new yc(e,t)}matches(e){return vc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function vc(e){return"and"===e.op}function _c(e){return"or"===e.op}function wc(e){return bc(e)&&vc(e)}function bc(e){for(const t of e.filters)if(t instanceof yc)return!1;return!0}function Tc(e){if(e instanceof mc)return e.field.canonicalString()+e.op.toString()+Hl(e.value);if(wc(e))return e.filters.map((e=>Tc(e))).join(",");{const t=e.filters.map((e=>Tc(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ec(e,t){return e instanceof mc?function(e,t){return t instanceof mc&&e.op===t.op&&e.field.isEqual(t.field)&&$l(e.value,t.value)}(e,t):e instanceof yc?function(e,t){return t instanceof yc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Ec(n,t.filters[r])),!0)}(e,t):void Ko()}function Sc(e,t){const n=e.filters.concat(t);return yc.create(n,e.op)}function Ic(e){return e instanceof mc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Hl(e.value))}(e):e instanceof yc?function(e){return e.op.toString()+" {"+e.getFilters().map(Ic).join(" ,")+"}"}(e):"Filter"}class Nc extends mc{constructor(e,t,n){super(e,t,n),this.key=ga.fromName(n.referenceValue)}matches(e){const t=ga.comparator(e.key,this.key);return this.matchesComparison(t)}}class Cc extends mc{constructor(e,t){super(e,"in",t),this.keys=xc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class kc extends mc{constructor(e,t){super(e,"not-in",t),this.keys=xc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ga.fromName(e.referenceValue)))}class Ac extends mc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jl(t)&&Kl(t.arrayValue,this.value)}}class Oc extends mc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Kl(this.value.arrayValue,t)}}class Rc extends mc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Kl(this.value.arrayValue,t)}}class Dc extends mc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Kl(this.value.arrayValue,e)))}}class Pc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Lc(e){return new Pc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Mc(e){const t=qo(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Tc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ja(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Hl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Hl(e))).join(",")),t.ce=e}return t.ce}function Fc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!pc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ec(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hc(e.startAt,t.startAt)&&hc(e.endAt,t.endAt)}function Uc(e){return ga.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Bc(e,t){return e.filters.filter((e=>e instanceof mc&&e.field.isEqual(t)))}function Vc(e,t,n){let r=jl,i=!0;for(const s of Bc(e,t)){let e=jl,t=!0;switch(s.op){case"<":case"<=":e=rc(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=jl}sc({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];sc({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function jc(e,t,n){let r=Vl,i=!0;for(const s of Bc(e,t)){let e=Vl,t=!0;switch(s.op){case">=":case">":e=ic(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Vl}oc({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];oc({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class zc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function $c(e,t,n,r,i,s,o,a){return new zc(e,t,n,r,i,s,o,a)}function Kc(e){return new zc(e)}function Wc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function qc(e){return null!==e.collectionGroup}function Hc(e){const t=qo(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Il(pa.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new fc(r,n))})),e.has(pa.keyField().canonicalString())||t.le.push(new fc(pa.keyField(),n))}return t.le}function Gc(e){const t=qo(e);return t.he||(t.he=Yc(t,Hc(e))),t.he}function Yc(e,t){if("F"===e.limitType)return Lc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new fc(e.field,t)}));const n=e.endAt?new uc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new uc(e.startAt.position,e.startAt.inclusive):null;return Lc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Qc(e,t){const n=e.filters.concat([t]);return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Jc(e,t,n){return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xc(e,t){return Fc(Gc(e),Gc(t))&&e.limitType===t.limitType}function Zc(e){return"".concat(Mc(Gc(e)),"|lt:").concat(e.limitType)}function eu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Ic(e))).join(", "),"]")),ja(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Hl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Hl(e))).join(",")),"Target(".concat(t,")")}(Gc(e)),"; limitType=").concat(e.limitType,")")}function tu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ga.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Hc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=dc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Hc(e),t))&&!(e.endAt&&!function(e,t,n){const r=dc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Hc(e),t))}(e,t)}function nu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ru(e){return(t,n)=>{let r=!1;for(const i of Hc(e)){const e=iu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function iu(e,t,n){const r=e.field.isKeyField()?ga.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Wl(r,i):Ko()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ko()}}class su{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return bl(this.inner)}size(){return this.innerSize}}const ou=new Tl(ga.comparator);function au(){return ou}const lu=new Tl(ga.comparator);function cu(){let e=lu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function uu(e){let t=lu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function du(){return fu()}function hu(){return fu()}function fu(){return new su((e=>e.toString()),((e,t)=>e.isEqual(t)))}const pu=new Tl(ga.comparator),gu=new Il(ga.comparator);function mu(){let e=gu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const yu=new Il(oa);function vu(){return yu}function _u(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:za(t)?"-0":t}}function wu(e){return{integerValue:""+e}}function bu(e,t){return $a(t)?wu(t):_u(e,t)}class Tu{constructor(){this._=void 0}}function Eu(e,t,n){return e instanceof Nu?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ll(t)&&(t=Ml(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Cu?ku(e,t):e instanceof xu?Au(e,t):function(e,t){const n=Iu(e,t),r=Ru(n)+Ru(e.Ie);return Ql(n)&&Ql(e.Ie)?wu(r):_u(e.serializer,r)}(e,t)}function Su(e,t,n){return e instanceof Cu?ku(e,t):e instanceof xu?Au(e,t):n}function Iu(e,t){return e instanceof Ou?function(e){return Ql(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Nu extends Tu{}class Cu extends Tu{constructor(e){super(),this.elements=e}}function ku(e,t){const n=Du(t);for(const r of e.elements)n.some((e=>$l(e,r)))||n.push(r);return{arrayValue:{values:n}}}class xu extends Tu{constructor(e){super(),this.elements=e}}function Au(e,t){let n=Du(t);for(const r of e.elements)n=n.filter((e=>!$l(e,r)));return{arrayValue:{values:n}}}class Ou extends Tu{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ru(e){return Dl(e.integerValue||e.doubleValue)}function Du(e){return Jl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Pu{constructor(e,t){this.field=e,this.transform=t}}class Lu{constructor(e,t){this.version=e,this.transformResults=t}}class Mu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mu}static exists(e){return new Mu(void 0,e)}static updateTime(e){return new Mu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Uu{}function Bu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yu(e.key,Mu.none()):new Ku(e.key,e.data,Mu.none());{const n=e.data,r=ac.empty();let i=new Il(pa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Wu(e.key,r,new kl(i.toArray()),Mu.none())}}function Vu(e,t,n){e instanceof Ku?function(e,t,n){const r=e.value.clone(),i=Hu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wu?function(e,t,n){if(!Fu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Hu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(qu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ju(e,t,n,r){return e instanceof Ku?function(e,t,n,r){if(!Fu(e.precondition,t))return n;const i=e.value.clone(),s=Gu(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wu?function(e,t,n,r){if(!Fu(e.precondition,t))return n;const i=Gu(e.fieldTransforms,r,t),s=t.data;return s.setAll(qu(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Fu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Iu(r.transform,e||null);null!=i&&(null===n&&(n=ac.empty()),n.set(r.field,i))}return n||null}function $u(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&aa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cu&&t instanceof Cu||e instanceof xu&&t instanceof xu?aa(e.elements,t.elements,$l):e instanceof Ou&&t instanceof Ou?$l(e.Ie,t.Ie):e instanceof Nu&&t instanceof Nu}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ku extends Uu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wu extends Uu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function qu(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Hu(e,t,n){const r=new Map;Wo(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Su(o,a,n[i]))}return r}function Gu(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Eu(e,s,t))}return r}class Yu extends Uu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qu extends Uu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ju{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Vu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ju(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ju(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hu();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Bu(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ua.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),mu())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,((e,t)=>$u(e,t)))&&aa(this.baseMutations,e.baseMutations,((e,t)=>$u(e,t)))}}class Xu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Wo(e.mutations.length===n.length);let r=pu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Xu(e,t,n,r)}}class Zu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ed{constructor(e,t){this.count=e,this.unchangedNames=t}}var td,nd;function rd(e){switch(e){default:return Ko();case Ho.CANCELLED:case Ho.UNKNOWN:case Ho.DEADLINE_EXCEEDED:case Ho.RESOURCE_EXHAUSTED:case Ho.INTERNAL:case Ho.UNAVAILABLE:case Ho.UNAUTHENTICATED:return!1;case Ho.INVALID_ARGUMENT:case Ho.NOT_FOUND:case Ho.ALREADY_EXISTS:case Ho.PERMISSION_DENIED:case Ho.FAILED_PRECONDITION:case Ho.ABORTED:case Ho.OUT_OF_RANGE:case Ho.UNIMPLEMENTED:case Ho.DATA_LOSS:return!0}}function id(e){if(void 0===e)return jo("GRPC error has no .code"),Ho.UNKNOWN;switch(e){case td.OK:return Ho.OK;case td.CANCELLED:return Ho.CANCELLED;case td.UNKNOWN:return Ho.UNKNOWN;case td.DEADLINE_EXCEEDED:return Ho.DEADLINE_EXCEEDED;case td.RESOURCE_EXHAUSTED:return Ho.RESOURCE_EXHAUSTED;case td.INTERNAL:return Ho.INTERNAL;case td.UNAVAILABLE:return Ho.UNAVAILABLE;case td.UNAUTHENTICATED:return Ho.UNAUTHENTICATED;case td.INVALID_ARGUMENT:return Ho.INVALID_ARGUMENT;case td.NOT_FOUND:return Ho.NOT_FOUND;case td.ALREADY_EXISTS:return Ho.ALREADY_EXISTS;case td.PERMISSION_DENIED:return Ho.PERMISSION_DENIED;case td.FAILED_PRECONDITION:return Ho.FAILED_PRECONDITION;case td.ABORTED:return Ho.ABORTED;case td.OUT_OF_RANGE:return Ho.OUT_OF_RANGE;case td.UNIMPLEMENTED:return Ho.UNIMPLEMENTED;case td.DATA_LOSS:return Ho.DATA_LOSS;default:return Ko()}}(nd=td||(td={}))[nd.OK=0]="OK",nd[nd.CANCELLED=1]="CANCELLED",nd[nd.UNKNOWN=2]="UNKNOWN",nd[nd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nd[nd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nd[nd.NOT_FOUND=5]="NOT_FOUND",nd[nd.ALREADY_EXISTS=6]="ALREADY_EXISTS",nd[nd.PERMISSION_DENIED=7]="PERMISSION_DENIED",nd[nd.UNAUTHENTICATED=16]="UNAUTHENTICATED",nd[nd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nd[nd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nd[nd.ABORTED=10]="ABORTED",nd[nd.OUT_OF_RANGE=11]="OUT_OF_RANGE",nd[nd.UNIMPLEMENTED=12]="UNIMPLEMENTED",nd[nd.INTERNAL=13]="INTERNAL",nd[nd.UNAVAILABLE=14]="UNAVAILABLE",nd[nd.DATA_LOSS=15]="DATA_LOSS";let sd=null;function od(){return new TextEncoder}const ad=new Po([4294967295,4294967295],0);function ld(e){const t=od().encode(e),n=new Do;return n.update(t),new Uint8Array(n.digest())}function cd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Po([n,r],0),new Po([i,s],0)]}class ud{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new dd("Invalid padding: ".concat(t));if(n<0)throw new dd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new dd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new dd("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Po.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Po.fromNumber(n)));return 1===r.compare(ad)&&(r=new Po([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ld(e),[n,r]=cd(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ud(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=ld(e),[n,r]=cd(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class dd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new hd(ua.min(),r,new Tl(oa),au(),mu())}}class fd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fd(n,t,mu(),mu(),mu())}}class pd{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class gd{constructor(e,t){this.targetId=e,this.fe=t}}class md{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Al.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yd{constructor(){this.ge=0,this.pe=wd(),this.ye=Al.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=mu(),t=mu(),n=mu();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ko()}})),new fd(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=wd()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Wo(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class vd{constructor(e){this.Le=e,this.ke=new Map,this.qe=au(),this.Qe=_d(),this.Ke=new Tl(oa)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Ko()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Uc(i))if(0===n){const e=new ga(i.path);this.We(t,e,cc.newNoDocument(e,ua.min()))}else Wo(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==sd||sd.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Pl(n).toUint8Array()}catch(e){if(e instanceof xl)return zo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ud(s,r,i)}catch(e){return zo(e instanceof dd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Uc(i.target)){const t=new ga(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,cc.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=mu();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new hd(e,t,this.Ke,this.qe,n);return this.qe=au(),this.Qe=_d(),this.Ke=new Tl(oa),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new yd,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Il(oa),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Vo("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new yd),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function _d(){return new Tl(ga.comparator)}function wd(){return new Tl(ga.comparator)}const bd={asc:"ASCENDING",desc:"DESCENDING"},Td={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ed={and:"AND",or:"OR"};class Sd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Id(e,t){return e.useProto3Json||ja(t)?t:{value:t}}function Nd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Cd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function kd(e,t){return Nd(e,t.toTimestamp())}function xd(e){return Wo(!!e),ua.fromTimestamp(function(e){const t=Rl(e);return new ca(t.seconds,t.nanos)}(e))}function Ad(e,t){return function(e){return new ha(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Od(e){const t=ha.fromString(e);return Wo(Zd(t)),t}function Rd(e,t){return Ad(e.databaseId,t.path)}function Dd(e,t){const n=Od(t);if(n.get(1)!==e.databaseId.projectId)throw new Go(Ho.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Go(Ho.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ga(Fd(n))}function Pd(e,t){return Ad(e.databaseId,t)}function Ld(e){const t=Od(e);return 4===t.length?ha.emptyPath():Fd(t)}function Md(e){return new ha(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fd(e){return Wo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ud(e,t,n){return{name:Rd(e,t),fields:n.value.mapValue.fields}}function Bd(e,t,n){const r=Dd(e,t.name),i=xd(t.updateTime),s=t.createTime?xd(t.createTime):ua.min(),o=new ac({mapValue:{fields:t.fields}}),a=cc.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Vd(e,t){let n;if(t instanceof Ku)n={update:Ud(e,t.key,t.value)};else if(t instanceof Yu)n={delete:Rd(e,t.key)};else if(t instanceof Wu)n={update:Ud(e,t.key,t.data),updateMask:Xd(t.fieldMask)};else{if(!(t instanceof Qu))return Ko();n={verify:Rd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Nu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ou)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Ko()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:kd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ko()}(e,t.precondition)),n}function jd(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Mu.updateTime(xd(e.updateTime)):void 0!==e.exists?Mu.exists(e.exists):Mu.none()}(t.currentDocument):Mu.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Wo("REQUEST_TIME"===t.setToServerValue),n=new Nu;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Cu(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new xu(e)}else"increment"in t?n=new Ou(e,t.increment):Ko();const r=pa.fromServerFormat(t.fieldPath);return new Pu(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Dd(e,t.update.name),s=new ac({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new kl(t.map((e=>pa.fromServerFormat(e))))}(t.updateMask);return new Wu(i,s,e,n,r)}return new Ku(i,s,n,r)}if(t.delete){const r=Dd(e,t.delete);return new Yu(r,n)}if(t.verify){const r=Dd(e,t.verify);return new Qu(r,n)}return Ko()}function zd(e,t){return{documents:[Pd(e,t.path)]}}function $d(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Pd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Pd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Jd(yc.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Yd(e.field),direction:qd(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Id(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Kd(e){let t=Ld(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Wo(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Wd(e);return t instanceof yc&&wc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new fc(Qd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ja(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new uc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new uc(n,t)}(n.endAt)),$c(t,i,o,s,a,"F",l,c)}function Wd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Qd(e.unaryFilter.field);return mc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Qd(e.unaryFilter.field);return mc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Qd(e.unaryFilter.field);return mc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Qd(e.unaryFilter.field);return mc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ko()}}(e):void 0!==e.fieldFilter?function(e){return mc.create(Qd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ko()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return yc.create(e.compositeFilter.filters.map((e=>Wd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ko()}}(e.compositeFilter.op))}(e):Ko()}function qd(e){return bd[e]}function Hd(e){return Td[e]}function Gd(e){return Ed[e]}function Yd(e){return{fieldPath:e.canonicalString()}}function Qd(e){return pa.fromServerFormat(e.fieldPath)}function Jd(e){return e instanceof mc?function(e){if("=="===e.op){if(Zl(e.value))return{unaryFilter:{field:Yd(e.field),op:"IS_NAN"}};if(Xl(e.value))return{unaryFilter:{field:Yd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zl(e.value))return{unaryFilter:{field:Yd(e.field),op:"IS_NOT_NAN"}};if(Xl(e.value))return{unaryFilter:{field:Yd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yd(e.field),op:Hd(e.op),value:e.value}}}(e):e instanceof yc?function(e){const t=e.getFilters().map((e=>Jd(e)));return 1===t.length?t[0]:{compositeFilter:{op:Gd(e.op),filters:t}}}(e):Ko()}function Xd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Zd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class eh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ua.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ua.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Al.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new eh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new eh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class th{constructor(e){this.ut=e}}function nh(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:rh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Rd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Nd(e,t.version.toTimestamp()),createTime:Nd(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ih(t.version)};else{if(!t.isUnknownDocument())return Ko();r.unknownDocument={path:n.path.toArray(),version:ih(t.version)}}return r}function rh(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ih(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function sh(e){const t=new ca(e.seconds,e.nanoseconds);return ua.fromTimestamp(t)}function oh(e,t){const n=(t.baseMutations||[]).map((t=>jd(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>jd(e.ut,t))),i=ca.fromMillis(t.localWriteTimeMs);return new Ju(t.batchId,i,n,r)}function ah(e){const t=sh(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?sh(e.lastLimboFreeSnapshotVersion):ua.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Wo(1===e.documents.length),Gc(Kc(Ld(e.documents[0])))}(e.query):function(e){return Gc(Kd(e))}(e.query),new eh(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Al.fromBase64String(e.resumeToken))}function lh(e,t){const n=ih(t.snapshotVersion),r=ih(t.lastLimboFreeSnapshotVersion);let i;i=Uc(t.target)?zd(e.ut,t.target):$d(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Mc(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ch(e){const t=Kd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Jc(t,t.limit,"L"):t}function uh(e,t){return new Zu(t.largestBatchId,jd(e.ut,t.overlayMutation))}function dh(e,t){const n=t.path.lastSegment();return[e,Ka(t.path.popLast()),n]}function hh(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ih(r.readTime),documentKey:Ka(r.documentKey.path),largestBatchId:r.largestBatchId}}class fh{getBundleMetadata(e,t){return ph(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:sh(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return ph(e).put(function(e){return{bundleId:e.id,createTime:ih(xd(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return gh(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:ch(e.bundledQuery),readTime:sh(e.readTime)}}(e)}))}saveNamedQuery(e,t){return gh(e).put(function(e){return{name:e.name,readTime:ih(xd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function ph(e){return vl(e,"bundles")}function gh(e){return vl(e,"namedQueries")}class mh{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new mh(e,n)}getOverlay(e,t){return yh(e).get(dh(this.userId,t)).next((e=>e?uh(this.serializer,e):null))}getOverlays(e,t){const n=du();return ka.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Zu(t,i);r.push(this.lt(e,s))})),ka.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Ka(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(yh(e).H("collectionPathOverlayIndex",r))})),ka.waitFor(i)}getOverlaysForCollection(e,t,n){const r=du(),i=Ka(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return yh(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=uh(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=du();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yh(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=uh(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return yh(e).put(function(e,t,n){const[r,i,s]=dh(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Vd(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function yh(e){return vl(e,"documentOverlays")}class vh{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Dl(e.integerValue));else if("doubleValue"in e){const n=Dl(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),za(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Pl(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?nc(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Ko()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),ga.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function _h(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function wh(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=_h(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}vh.St=new vh;class bh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=wh(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=wh(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Th{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Eh{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Sh{constructor(){this.Wt=new bh,this.Gt=new Th(this.Wt),this.zt=new Eh(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Ih{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Ih(this.indexId,this.documentKey,this.arrayValue,n)}}function Nh(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Ch(e.arrayValue,t.arrayValue),0!==n?n:(n=Ch(e.directionalValue,t.directionalValue),0!==n?n:ga.comparator(e.documentKey,t.documentKey)))}function Ch(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class kh{constructor(e){this.Jt=new Il(((e,t)=>pa.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Wo(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=ya(e);if(void 0!==t&&!this.tn(t))return!1;const n=va(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new Il(pa.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new _a(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new _a(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new _a(n.field,"asc"===n.dir?0:1)));return new ma(ma.UNKNOWN_ID,this.collectionId,t,wa.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function xh(e){var t,n;if(Wo(e instanceof mc||e instanceof yc),e instanceof mc){if(e instanceof Oc){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>mc.create(e.field,"==",t))))||[];return yc.create(r,"or")}return e}const r=e.filters.map((e=>xh(e)));return yc.create(r,e.op)}function Ah(e){if(0===e.getFilters().length)return[];const t=Ph(xh(e));return Wo(Dh(t)),Oh(t)||Rh(t)?[t]:t.getFilters()}function Oh(e){return e instanceof mc}function Rh(e){return e instanceof yc&&wc(e)}function Dh(e){return Oh(e)||Rh(e)||function(e){if(e instanceof yc&&_c(e)){for(const t of e.getFilters())if(!Oh(t)&&!Rh(t))return!1;return!0}return!1}(e)}function Ph(e){if(Wo(e instanceof mc||e instanceof yc),e instanceof mc)return e;if(1===e.filters.length)return Ph(e.filters[0]);const t=e.filters.map((e=>Ph(e)));let n=yc.create(t,e.op);return n=Fh(n),Dh(n)?n:(Wo(n instanceof yc),Wo(vc(n)),Wo(n.filters.length>1),n.filters.reduce(((e,t)=>Lh(e,t))))}function Lh(e,t){let n;return Wo(e instanceof mc||e instanceof yc),Wo(t instanceof mc||t instanceof yc),n=e instanceof mc?t instanceof mc?function(e,t){return yc.create([e,t],"and")}(e,t):Mh(e,t):t instanceof mc?Mh(t,e):function(e,t){if(Wo(e.filters.length>0&&t.filters.length>0),vc(e)&&vc(t))return Sc(e,t.getFilters());const n=_c(e)?e:t,r=_c(e)?t:e,i=n.filters.map((e=>Lh(e,r)));return yc.create(i,"or")}(e,t),Fh(n)}function Mh(e,t){if(vc(t))return Sc(t,e.getFilters());{const n=t.filters.map((t=>Lh(e,t)));return yc.create(n,"or")}}function Fh(e){if(Wo(e instanceof mc||e instanceof yc),e instanceof mc)return e;const t=e.getFilters();if(1===t.length)return Fh(t[0]);if(bc(e))return e;const n=t.map((e=>Fh(e))),r=[];return n.forEach((t=>{t instanceof mc?r.push(t):t instanceof yc&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:yc.create(r,e.op)}class Uh{constructor(){this.on=new Bh}addToCollectionParentIndex(e,t){return this.on.add(t),ka.resolve()}getCollectionParents(e,t){return ka.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return ka.resolve()}deleteFieldIndex(e,t){return ka.resolve()}deleteAllFieldIndexes(e){return ka.resolve()}createTargetIndexes(e,t){return ka.resolve()}getDocumentsMatchingTarget(e,t){return ka.resolve(null)}getIndexType(e,t){return ka.resolve(0)}getFieldIndexes(e,t){return ka.resolve([])}getNextCollectionGroupToUpdate(e){return ka.resolve(null)}getMinOffset(e,t){return ka.resolve(Ea.min())}getMinOffsetFromCollectionGroup(e,t){return ka.resolve(Ea.min())}updateCollectionGroup(e,t,n){return ka.resolve()}updateIndexEntries(e,t){return ka.resolve()}}class Bh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Il(ha.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Il(ha.comparator)).toArray()}}const Vh=new Uint8Array(0);class jh{constructor(e,t){this.user=e,this.databaseId=t,this._n=new Bh,this.an=new su((e=>Mc(e)),((e,t)=>Fc(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:Ka(r)};return zh(e).put(i)}return ka.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[la(t),""],!1,!0);return zh(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ha(r.parent))}return n}))}addFieldIndex(e,t){const n=Kh(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Wh(e);return i.next((e=>{n.put(hh(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Kh(e),r=Wh(e),i=$h(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Kh(e),n=$h(e),r=Wh(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return ka.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new kh(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=$h(e);let r=!0;const i=new Map;return ka.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=mu();const r=[];return ka.forEach(i,((i,s)=>{Vo("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Mc(t)));const o=function(e,t){const n=ya(t);if(void 0===n)return null;for(const r of Bc(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of va(t))for(const t of Bc(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of va(t)){const t=0===i.kind?Vc(e,i.fieldPath,e.startAt):jc(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new uc(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of va(t)){const t=0===i.kind?jc(e,i.fieldPath,e.endAt):Vc(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new uc(n,r)}(s,i),u=this.ln(i,s,l),d=this.ln(i,s,c),h=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,l.inclusive,d,c.inclusive,h);return ka.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=ga.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return ka.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Ah(yc.create(e.filters,"and")).map((t=>Lc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/l]):Vh,d=this.Tn(e,a,n[u%l],r),h=this.En(e,a,i[u%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));c.push(...this.createRange(d,h,f))}return c}Tn(e,t,n,r){const i=new Ih(e,ga.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new Ih(e,ga.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new kh(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return ka.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Il(pa.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new Sh;for(const r of va(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);vh.St.ht(e,i)}return n.Ut()}In(e){const t=new Sh;return vh.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new Sh;return vh.St.ht(Yl(this.databaseId,t),n.jt(function(e){const t=va(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new Sh);let i=0;for(const s of va(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&Jl(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);vh.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Sh;n.seed(e.Ut()),vh.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof mc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Kh(e),r=Wh(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return ka.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new wa(t.sequenceNumber,new Ea(sh(t.readTime),new ga(Ha(t.documentKey)),t.largestBatchId)):wa.empty(),r=e.fields.map((e=>{let[t,n]=e;return new _a(pa.fromServerFormat(t),n)}));return new ma(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:oa(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Kh(e),i=Wh(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>ka.forEach(t,(t=>i.put(hh(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return ka.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?ka.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),ka.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?ka.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return $h(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return $h(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=$h(e);let i=new Il(Nh);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new Ih(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new Il(Nh);const r=this.dn(t,e);if(null==r)return n;const i=ya(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Jl(s))for(const i of s.arrayValue.values||[])n=n.add(new Ih(t.indexId,e.key,this.In(i),r))}else n=n.add(new Ih(t.indexId,e.key,Vh,r));return n}yn(e,t,n,r,i){Vo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Cl(s),l=Cl(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Cl(o)):t?(i(a),a=Cl(s)):(a=Cl(s),l=Cl(o))}}(r,i,Nh,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),ka.waitFor(s)}fn(e){let t=1;return Wh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Nh(e,t))).filter(((e,t,n)=>!t||0!==Nh(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Nh(s,e),i=Nh(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Vh,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Vh,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return Nh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qh)}getMinOffset(e,t){return ka.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||Ko())))).next(qh)}}function zh(e){return vl(e,"collectionParents")}function $h(e){return vl(e,"indexEntries")}function Kh(e){return vl(e,"indexConfiguration")}function Wh(e){return vl(e,"indexState")}function qh(e){Wo(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Sa(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ea(t.readTime,t.documentKey,n)}const Hh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Gh(e,Gh.DEFAULT_COLLECTION_PERCENTILE,Gh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yh(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Wo(1===a)})));const c=[];for(const u of n.mutations){const e=Qa(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return ka.waitFor(s).next((()=>c))}function Qh(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ko();t=e.noDocument}return JSON.stringify(t).length}Gh.DEFAULT_COLLECTION_PERCENTILE=10,Gh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gh.DEFAULT=new Gh(41943040,Gh.DEFAULT_COLLECTION_PERCENTILE,Gh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gh.DISABLED=new Gh(-1,0,0);class Jh{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Wo(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Jh(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zh(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=ef(e),s=Zh(e);return s.add({}).next((o=>{Wo("number"==typeof o);const a=new Ju(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Vd(e.ut,t))),i=n.mutations.map((t=>Vd(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Il(((e,t)=>oa(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Qa(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,Ja))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),ka.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Zh(e).get(t).next((e=>e?(Wo(e.userId===this.userId),oh(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?ka.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Zh(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Wo(t.batchId>=n),i=oh(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Zh(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zh(e).W("userMutationsIndex",t).next((e=>e.map((e=>oh(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ya(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ef(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=Ha(a);if(o===this.userId&&t.path.isEqual(c))return Zh(e).get(l).next((e=>{if(!e)throw Ko();Wo(e.userId===this.userId),i.push(oh(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Il(oa);const r=[];return t.forEach((t=>{const i=Ya(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=ef(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=Ha(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),ka.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Ya(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Il(oa);return ef(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=Ha(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Zh(e).get(t).next((e=>{if(null===e)throw Ko();Wo(e.userId===this.userId),n.push(oh(this.serializer,e))})))})),ka.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Yh(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),ka.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ka.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return ef(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ha(e[1]);r.push(t)}else n.done()})).next((()=>{Wo(0===r.length)}))}))}containsKey(e,t){return Xh(e,this.userId,t)}Mn(e){return tf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Xh(e,t,n){const r=Ya(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ef(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Zh(e){return vl(e,"mutations")}function ef(e){return vl(e,"documentMutations")}function tf(e){return vl(e,"mutationQueues")}class nf{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new nf(0)}static Nn(){return new nf(-1)}}class rf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new nf(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>ua.fromTimestamp(new ca(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>sf(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Wo(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return sf(e).Y(((s,o)=>{const a=ah(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>ka.waitFor(i))).next((()=>r))}forEachTarget(e,t){return sf(e).Y(((e,n)=>{const r=ah(n);t(r)}))}Bn(e){return of(e).get("targetGlobalKey").next((e=>(Wo(null!==e),e)))}Ln(e,t){return of(e).put("targetGlobalKey",t)}kn(e,t){return sf(e).put(lh(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Mc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return sf(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=ah(n);Fc(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=af(e);return t.forEach((t=>{const s=Ka(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),ka.waitFor(r)}removeMatchingKeys(e,t,n){const r=af(e);return ka.forEach(t,(t=>{const i=Ka(t.path);return ka.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=af(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=af(e);let i=mu();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Ha(e[1]),s=new ga(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Ka(t.path),r=IDBKeyRange.bound([n],[la(n)],!1,!0);let i=0;return af(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return sf(e).get(t).next((e=>e?ah(e):null))}}function sf(e){return vl(e,"targets")}function of(e){return vl(e,"targetGlobal")}function af(e){return vl(e,"targetDocuments")}function lf(e,t){let[n,r]=e,[i,s]=t;const o=oa(n,i);return 0===o?oa(r,s):o}class cf{constructor(e){this.Qn=e,this.buffer=new Il(lf),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();lf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){Vo("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Da(e)?Vo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Ca(e)}await this.Gn(3e5)}))}}class df{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ka.resolve(Va._e);const n=new cf(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Vo("LruGarbageCollector","Garbage collection skipped; disabled"),ka.resolve(Hh)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Vo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Hh):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Vo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Bo()<=it.DEBUG&&Vo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ka.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function hf(e,t){return new df(e,t)}class ff{constructor(e,t){this.db=e,this.garbageCollector=hf(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return pf(e,n)}removeReference(e,t,n){return pf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return pf(e,t)}Xn(e,t){return function(e,t){let n=!1;return tf(e).Z((r=>Xh(e,r,t).next((e=>(e&&(n=!0),ka.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,ua.min()),af(e).delete(function(e){return[0,Ka(e.path)]}(s)))))}));r.push(t)}})).next((()=>ka.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return pf(e,t)}Zn(e,t){const n=af(e);let r,i=Va._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Va._e&&t(new ga(Ha(r)),i),i=l,r=a):i=Va._e})).next((()=>{i!==Va._e&&t(new ga(Ha(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pf(e,t){return af(e).put(function(e,t){return{targetId:0,path:Ka(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class gf{constructor(){this.changes=new su((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ka.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return wf(e).put(n)}removeEntry(e,t,n){return wf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],rh(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=cc.newInvalidDocument(t);return wf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(bf(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:cc.newInvalidDocument(t)};return wf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(bf(t))},((e,r)=>{n={document:this.tr(t,r),size:Qh(r)}})).next((()=>n))}getEntries(e,t){let n=au();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=au(),r=new Tl(ga.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,Qh(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return ka.resolve();let r=new Il(Ef);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(bf(r.first()),bf(r.last())),s=r.getIterator();let o=s.getNext();return wf(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=ga.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Ef(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(bf(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),rh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wf(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=au();for(const i of e){const e=this.tr(ga.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(tu(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=au();const s=Tf(t,n),o=Tf(t,Ea.max());return wf(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(ga.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new vf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return _f(e).get("remoteDocumentGlobalKey").next((e=>(Wo(!!e),e)))}er(e,t){return _f(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Bd(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ga.fromSegments(t.noDocument.path),r=sh(t.noDocument.readTime);n=cc.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ko();{const e=ga.fromSegments(t.unknownDocument.path),r=sh(t.unknownDocument.version);n=cc.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ca(e[0],e[1]);return ua.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(ua.min()))return e}return cc.newInvalidDocument(e)}}function yf(e){return new mf(e)}class vf extends gf{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new su((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Il(((e,t)=>oa(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=nh(this._r.serializer,s);r=r.add(i.path.popLast());const l=Qh(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=nh(this._r.serializer,s.convertToNoDocument(ua.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),ka.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function _f(e){return vl(e,"remoteDocumentGlobal")}function wf(e){return vl(e,"remoteDocumentsV14")}function bf(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Tf(e,t){const n=t.documentKey.path.toArray();return[e,rh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ef(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=oa(n[s],r[s]),i)return i;return i=oa(n.length,r.length),i||(i=oa(n[n.length-2],r[r.length-2]),i||oa(n[n.length-1],r[r.length-1]))}class Sf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class If{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&ju(n.mutation,e,kl.empty(),ca.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,mu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mu();const r=du();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=cu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=du();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,mu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=au();const s=fu(),o=fu();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Wu)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),ju(o.mutation,t,o.mutation.getFieldMask(),ca.now())):s.set(t.key,kl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Sf(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=fu();let r=new Tl(((e,t)=>e-t)),i=mu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||kl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||mu()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=hu();l.forEach((e=>{if(!i.has(e)){const r=Bu(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return ka.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ga.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ka.resolve(du());let o=-1,a=i;return s.next((t=>ka.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ka.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,mu()))).next((e=>({batchId:o,changes:uu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ga(t)).next((e=>{let t=cu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=cu();return this.indexManager.getCollectionParents(e,i).next((o=>ka.forEach(o,(o=>{const a=function(e,t){return new zc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,cc.newInvalidDocument(r)))}));let n=cu();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&ju(s.mutation,r,kl.empty(),ca.now()),tu(t,r)&&(n=n.insert(e,r))})),n}))}}class Nf{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return ka.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:xd(e.createTime)}}(t)),ka.resolve()}getNamedQuery(e,t){return ka.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:ch(e.bundledQuery),readTime:xd(e.readTime)}}(t)),ka.resolve()}}class Cf{constructor(){this.overlays=new Tl(ga.comparator),this.lr=new Map}getOverlay(e,t){return ka.resolve(this.overlays.get(t))}getOverlays(e,t){const n=du();return ka.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),ka.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),ka.resolve()}getOverlaysForCollection(e,t,n){const r=du(),i=t.length+1,s=new ga(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ka.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Tl(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=du(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=du(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return ka.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Zu(t,n));let i=this.lr.get(t);void 0===i&&(i=mu(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class kf{constructor(){this.hr=new Il(xf.Pr),this.Ir=new Il(xf.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new xf(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new xf(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new ga(new ha([])),n=new xf(t,e),r=new xf(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new ga(new ha([])),n=new xf(t,e),r=new xf(t,e+1);let i=mu();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new xf(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class xf{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return ga.comparator(e.key,t.key)||oa(e.gr,t.gr)}static Tr(e,t){return oa(e.gr,t.gr)||ga.comparator(e.key,t.key)}}class Af{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Il(xf.Pr)}checkEmpty(e){return ka.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ju(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new xf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ka.resolve(s)}lookupMutationBatch(e,t){return ka.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return ka.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ka.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return ka.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xf(t,0),r=new xf(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),ka.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Il(oa);return t.forEach((e=>{const t=new xf(e,0),r=new xf(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),ka.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ga.isDocumentKey(i)||(i=i.child(""));const s=new xf(new ga(i),0);let o=new Il(oa);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),ka.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Wo(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return ka.forEach(t.mutations,(r=>{const i=new xf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new xf(t,0),r=this.yr.firstAfterOrEqual(n);return ka.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ka.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Of{constructor(e){this.Cr=e,this.docs=new Tl(ga.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ka.resolve(n?n.document.mutableCopy():cc.newInvalidDocument(t))}getEntries(e,t){let n=au();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():cc.newInvalidDocument(e))})),ka.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=au();const s=t.path,o=new ga(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Sa(Ta(o),n)<=0||(r.has(o.key)||tu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ka.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ko()}vr(e,t){return ka.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Rf(this)}getSize(e){return ka.resolve(this.size)}}class Rf extends gf{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),ka.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Df{constructor(e){this.persistence=e,this.Fr=new su((e=>Mc(e)),Fc),this.lastRemoteSnapshotVersion=ua.min(),this.highestTargetId=0,this.Mr=0,this.Or=new kf,this.targetCount=0,this.Nr=nf.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),ka.resolve()}getLastRemoteSnapshotVersion(e){return ka.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ka.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),ka.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),ka.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new nf(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,ka.resolve()}updateTargetData(e,t){return this.kn(t),ka.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,ka.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),ka.waitFor(i).next((()=>r))}getTargetCount(e){return ka.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return ka.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),ka.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ka.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),ka.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return ka.resolve(n)}containsKey(e,t){return ka.resolve(this.Or.containsKey(t))}}class Pf{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Va(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Df(this),this.indexManager=new Uh,this.remoteDocumentCache=function(e){return new Of(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new th(t),this.Kr=new Nf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Cf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Af(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Vo("MemoryPersistence","Starting transaction:",e);const r=new Lf(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return ka.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Lf extends Na{constructor(e){super(),this.currentSequenceNumber=e}}class Mf{constructor(e){this.persistence=e,this.Gr=new kf,this.zr=null}static jr(e){return new Mf(e)}get Hr(){if(this.zr)return this.zr;throw Ko()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),ka.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),ka.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),ka.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ka.forEach(this.Hr,(n=>{const r=ga.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,ua.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return ka.or([()=>ka.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Ff{constructor(e){this.serializer=e}N(e,t,n,r){const i=new xa("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ga,{unique:!0}),e.createObjectStore("documentMutations")}(e),Uf(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=ka.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Uf(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ua.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ga,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return ka.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:cl});t.createIndex("collectionPathOverlayIndex",ul,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",dl,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Xa});t.createIndex("documentKeyIndex",Za),t.createIndex("collectionGroupIndex",el)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:sl}).createIndex("sequenceNumberIndex",ol,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:al}).createIndex("documentKeyIndex",ll,{unique:!1})}(e)))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Qh(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>ka.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>ka.forEach(n,(n=>{Wo(n.userId===t.userId);const r=oh(this.serializer,n);return Yh(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new ha(n),o=function(e){return[0,Ka(e)]}(s);r.push(t.get(o).next((n=>n?ka.resolve():(n=>t.put({targetId:0,path:Ka(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>ka.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:il});const n=t.store("collectionParents"),r=new Bh,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ka(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new ha(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Ha(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=ah(n),i=lh(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new ga(ha.fromString(e.document.name).popFirst(5)):e.noDocument?ga.fromSegments(e.noDocument.path):e.unknownDocument?ga.fromSegments(e.unknownDocument.path):Ko()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>ka.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=yf(this.serializer),i=new Pf(Mf.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:mu();oh(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),ka.forEach(n,((e,n)=>{const s=new Mo(n),o=mh.ct(this.serializer,s),a=i.getIndexManager(s),l=Jh.ct(s,this.serializer,a,i.referenceDelegate);return new If(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new yl(t,Va._e),e).next()}))}))}}function Uf(e){e.createObjectStore("targetDocuments",{keyPath:nl}).createIndex("documentTargetsIndex",rl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tl,{unique:!0}),e.createObjectStore("targetGlobal")}const Bf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vf{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=c,this.ai=u,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!Vf.D())throw new Go(Ho.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ff(this,r),this.Ii=t+"main",this.serializer=new th(a),this.Ti=new Aa(this.Ii,this.ai,new Ff(this.serializer)),this.qr=new rf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yf(this.serializer),this.Kr=new fh,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&jo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Go(Ho.FAILED_PRECONDITION,Bf);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new Va(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>zf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(Da(e))return Vo("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Vo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return jf(e).get("owner").next((e=>ka.resolve(this.wi(e))))}Si(e){return zf(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=vl(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return ka.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?ka.resolve(!0):jf(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Go(Ho.FAILED_PRECONDITION,Bf);return!1}}return!(!this.networkEnabled||!this.inForeground)||zf(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Vo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new yl(e,Va._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>zf(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return Jh.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jh(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return mh.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){Vo("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?ml:14===e?gl:13===e?pl:12===e?fl:11===e?hl:void Ko()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new yl(r,this.Lr?this.Lr.next():Va._e),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw jo("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new Go(Ho.FAILED_PRECONDITION,Ia);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Li(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Li(e){return jf(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Go(Ho.FAILED_PRECONDITION,Bf)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jf(e).put("owner",t)}static D(){return Aa.D()}pi(e){const t=jf(e);return t.get("owner").next((e=>this.wi(e)?(Vo("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ka.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(jo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;!Le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Vo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return jo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){jo("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function jf(e){return vl(e,"owner")}function zf(e){return vl(e,"clientMetadata")}function $f(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Kf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=mu(),r=mu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Kf(e,t.fromCache,n,r)}}class Wf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class qf{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Wf;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Bo()<=it.DEBUG&&Vo("QueryEngine","SDK will not create cache indexes for query:",eu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),ka.resolve()):(Bo()<=it.DEBUG&&Vo("QueryEngine","Query:",eu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Bo()<=it.DEBUG&&Vo("QueryEngine","The SDK decides to create cache indexes for query:",eu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gc(t))):ka.resolve())}zi(e,t){if(Wc(t))return ka.resolve(null);let n=Gc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Jc(t,null,"F"),n=Gc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=mu(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,Jc(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Wc(t)||r.isEqual(ua.min())?ka.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?ka.resolve(null):(Bo()<=it.DEBUG&&Vo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),eu(t)),this.Xi(e,s,t,ba(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Il(ru(e));return t.forEach(((t,r)=>{tu(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Bo()<=it.DEBUG&&Vo("QueryEngine","Using full collection scan to execute query:",eu(t)),this.Gi.getDocumentsMatchingQuery(e,t,Ea.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Hf{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Tl(oa),this.ns=new su((e=>Mc(e)),Fc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new If(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function Gf(e,t,n,r){return new Hf(e,t,n,r)}async function Yf(e,t){const n=qo(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=mu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Qf(e){const t=qo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function Jf(e,t,n){let r=mu(),i=mu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=au();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ua.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Vo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function Xf(e,t){const n=qo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Zf(e,t){const n=qo(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,ka.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new eh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function ep(e,t,n){const r=qo(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Da(e))throw e;Vo("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function tp(e,t,n){const r=qo(e);let i=ua.min(),s=mu();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=qo(e),i=r.ns.get(n);return void 0!==i?ka.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,Gc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:ua.min(),n?s:mu()))).next((e=>(ip(r,nu(t),e),{documents:e,ls:s})))))}function np(e,t){const n=qo(e),r=qo(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function rp(e,t){const n=qo(e),r=n.rs.get(t)||ua.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,ba(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(ip(n,t,e),e)))}function ip(e,t,n){let r=e.rs.get(t)||ua.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function sp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mu();const r=await Zf(e,Gc(ch(t.bundledQuery))),i=qo(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=xd(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(Al.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function op(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function ap(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function lp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class cp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Go(r.error.code,r.error.message))),s?new cp(e,t,r.state,i):(jo("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class up{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Go(n.error.code,n.error.message))),i?new up(e,n.state,r):(jo("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=vu();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=$a(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new dp(e,i):(jo("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class hp{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new hp(t.clientId,t.onlineState):(jo("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class fp{constructor(){this.activeTargetIds=vu()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pp{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Tl(oa),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=op(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new fp),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(op(this.persistenceKey,n));if(e){const t=dp.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(lp(this.persistenceKey,e));if(n){const r=up.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lp(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Vo("SharedClientState","READ",e,t),t}setItem(e,t){Vo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Vo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(Vo("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void jo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Va._e;if(null!=e)try{const n=JSON.parse(e);Wo("number"==typeof n),t=n}catch(e){jo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Va._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new cp(this.currentUser,e,t,n),i=ap(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=ap(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=lp(this.persistenceKey,e),i=new up(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return dp.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return cp.Ts(new Mo(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return up.Ts(r,t)}Ms(e){return hp.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);Vo("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=vu();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class gp{constructor(){this.eo=new fp,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new fp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mp{ro(e){}shutdown(){}}class yp{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Vo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Vo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vp=null;function _p(){return null===vp?vp=268435456+Math.round(2147483648*Math.random()):vp++,"0x"+vp.toString(16)}const wp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bp{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Tp="WebChannelConnection";class Ep extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const s=_p(),o=this.So(e,t);Vo("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,o,a,n).then((t=>(Vo("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw zo("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=wp[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=_p();return new Promise(((s,o)=>{const a=new Ro;a.setWithCredentials(!0),a.listenOnce(ko.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Co.NO_ERROR:const t=a.getResponseJson();Vo(Tp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Co.TIMEOUT:Vo(Tp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Go(Ho.DEADLINE_EXCEEDED,"Request time out"));break;case Co.HTTP_ERROR:const n=a.getStatus();if(Vo(Tp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ho).indexOf(t)>=0?t:Ho.UNKNOWN}(t.status);o(new Go(e,t.message))}else o(new Go(Ho.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Go(Ho.UNAVAILABLE,"Connection failed."));break;default:Ko()}}finally{Vo(Tp,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Vo(Tp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=_p(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Io(),o=No(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Vo(Tp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const f=new bp({co:t=>{h?Vo(Tp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Vo(Tp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Vo(Tp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Oo.EventType.OPEN,(()=>{h||Vo(Tp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Oo.EventType.CLOSE,(()=>{h||(h=!0,Vo(Tp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,Oo.EventType.ERROR,(t=>{h||(h=!0,zo(Tp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new Go(Ho.UNAVAILABLE,"The operation could not be completed")))})),p(u,Oo.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Wo(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Vo(Tp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=td[e];if(void 0!==t)return id(t)}(t),i=o.message;void 0===n&&(n=Ho.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.Ro(new Go(n,i)),u.close()}else Vo(Tp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(o,xo.STAT_EVENT,(t=>{t.stat===Ao.PROXY?Vo(Tp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ao.NOPROXY&&Vo(Tp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function Sp(){return"undefined"!=typeof window?window:null}function Ip(){return"undefined"!=typeof document?document:null}function Np(e){return new Sd(e,!0)}class Cp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Vo("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class kp{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Cp(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===Ho.RESOURCE_EXHAUSTED?(jo(t.toString()),jo("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===Ho.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new Go(Ho.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return Vo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(Vo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xp extends kp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ko()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Wo(void 0===t||"string"==typeof t),Al.fromBase64String(t||"")):(Wo(void 0===t||t instanceof Uint8Array),Al.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ho.UNKNOWN:id(e.code);return new Go(t,e.message||"")}(o);n=new md(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Dd(e,r.document.name),s=xd(r.document.updateTime),o=r.document.createTime?xd(r.document.createTime):ua.min(),a=new ac({mapValue:{fields:r.document.fields}}),l=cc.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new pd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Dd(e,r.document),s=r.readTime?xd(r.readTime):ua.min(),o=cc.newNoDocument(i,s),a=r.removedTargetIds||[];n=new pd([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Dd(e,r.document),s=r.removedTargetIds||[];n=new pd([],s,i,null)}else{if(!("filter"in t))return Ko();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ed(r,i),o=e.targetId;n=new gd(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ua.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ua.min():t.readTime?xd(t.readTime):ua.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=Md(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Uc(r)?{documents:zd(e,r)}:{query:$d(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Cd(e,t.resumeToken);const r=Id(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ua.min())>0){n.readTime=Nd(e,t.snapshotVersion.toTimestamp());const r=Id(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ko()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=Md(this.serializer),t.removeTarget=e,this.e_(t)}}class Ap extends kp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Wo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Wo(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?xd(e.updateTime):xd(t);return n.isEqual(ua.min())&&(n=xd(t)),new Lu(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=xd(e.commitTime);return this.listener.I_(n,t)}return Wo(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Md(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Vd(this.serializer,e)))};this.e_(t)}}class Op extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new Go(Ho.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.wo(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ho.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Go(Ho.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ho.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Go(Ho.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class Rp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(jo(t),this.f_=!1):Vo("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Dp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{zp(this)&&(Vo("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=qo(e);t.C_.add(4),await Lp(t),t.M_.set("Unknown"),t.C_.delete(4),await Pp(t)}(this))}))})),this.M_=new Rp(n,r)}}async function Pp(e){if(zp(e))for(const t of e.v_)await t(!0)}async function Lp(e){for(const t of e.v_)await t(!1)}function Mp(e,t){const n=qo(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),jp(n)?Vp(n):og(n).Ho()&&Up(n,t))}function Fp(e,t){const n=qo(e),r=og(n);n.D_.delete(t),r.Ho()&&Bp(n,t),0===n.D_.size&&(r.Ho()?r.Zo():zp(n)&&n.M_.set("Unknown"))}function Up(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ua.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}og(e).u_(t)}function Bp(e,t){e.x_.Oe(t),og(e).c_(t)}function Vp(e){e.x_=new vd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),og(e).start(),e.M_.g_()}function jp(e){return zp(e)&&!og(e).jo()&&e.D_.size>0}function zp(e){return 0===qo(e).C_.size}function $p(e){e.x_=void 0}async function Kp(e){e.D_.forEach(((t,n)=>{Up(e,t)}))}async function Wp(e,t){$p(e),jp(e)?(e.M_.w_(t),Vp(e)):e.M_.set("Unknown")}async function qp(e,t,n){if(e.M_.set("Online"),t instanceof md&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){Vo("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Hp(e,n)}else if(t instanceof pd?e.x_.$e(t):t instanceof gd?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(ua.min()))try{const t=await Qf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(Al.EMPTY_BYTE_STRING,r.snapshotVersion)),Bp(e,t);const i=new eh(r.target,t,n,r.sequenceNumber);Up(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Vo("RemoteStore","Failed to raise snapshot:",t),await Hp(e,t)}}async function Hp(e,t,n){if(!Da(t))throw t;e.C_.add(1),await Lp(e),e.M_.set("Offline"),n||(n=()=>Qf(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Vo("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Pp(e)}))}function Gp(e,t){return t().catch((n=>Hp(e,n,t)))}async function Yp(e){const t=qo(e),n=ag(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;Qp(t);)try{const e=await Xf(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,Jp(t,e)}catch(e){await Hp(t,e)}Xp(t)&&Zp(t)}function Qp(e){return zp(e)&&e.b_.length<10}function Jp(e,t){e.b_.push(t);const n=ag(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Xp(e){return zp(e)&&!ag(e).jo()&&e.b_.length>0}function Zp(e){ag(e).start()}async function eg(e){ag(e).E_()}async function tg(e){const t=ag(e);for(const n of e.b_)t.P_(n.mutations)}async function ng(e,t,n){const r=e.b_.shift(),i=Xu.from(r,t,n);await Gp(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Yp(e)}async function rg(e,t){t&&ag(e).h_&&await async function(e,t){if(function(e){return rd(e)&&e!==Ho.ABORTED}(t.code)){const n=e.b_.shift();ag(e).Yo(),await Gp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Yp(e)}}(e,t),Xp(e)&&Zp(e)}async function ig(e,t){const n=qo(e);n.asyncQueue.verifyOperationInProgress(),Vo("RemoteStore","RemoteStore received new credentials");const r=zp(n);n.C_.add(3),await Lp(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Pp(n)}async function sg(e,t){const n=qo(e);t?(n.C_.delete(2),await Pp(n)):t||(n.C_.add(2),await Lp(n),n.M_.set("Unknown"))}function og(e){return e.O_||(e.O_=function(e,t,n){const r=qo(e);return r.A_(),new xp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Kp.bind(null,e),Io:Wp.bind(null,e),a_:qp.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),jp(e)?Vp(e):e.M_.set("Unknown")):(await e.O_.stop(),$p(e))}))),e.O_}function ag(e){return e.N_||(e.N_=function(e,t,n){const r=qo(e);return r.A_(),new Ap(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:eg.bind(null,e),Io:rg.bind(null,e),T_:tg.bind(null,e),I_:ng.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await Yp(e)):(await e.N_.stop(),e.b_.length>0&&(Vo("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class lg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new lg(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Go(Ho.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cg(e,t){if(jo("AsyncQueue","".concat(t,": ").concat(e)),Da(e))return new Go(Ho.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class ug{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ga.comparator(t.key,n.key):(e,t)=>ga.comparator(e.key,t.key),this.keyedMap=cu(),this.sortedSet=new Tl(this.comparator)}static emptySet(e){return new ug(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ug))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ug;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class dg{constructor(){this.B_=new Tl(ga.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Ko():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class hg{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new hg(e,t,ug.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class fg{constructor(){this.k_=void 0,this.listeners=[]}}class pg{constructor(){this.queries=new su((e=>Zc(e)),Xc),this.onlineState="Unknown",this.q_=new Set}}async function gg(e,t){const n=qo(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new fg),i)try{s.k_=await n.onListen(r)}catch(e){const n=cg(e,"Initialization of query '".concat(eu(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&_g(n)}async function mg(e,t){const n=qo(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function yg(e,t){const n=qo(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&_g(n)}function vg(e,t,n){const r=qo(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function _g(e){e.q_.forEach((e=>{e.next()}))}class wg{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new hg(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=hg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class bg{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class Tg{constructor(e){this.serializer=e}hs(e){return Dd(this.serializer,e)}Ps(e){return e.metadata.exists?Bd(this.serializer,e.document,!1):cc.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return xd(e)}}class Eg{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Sg(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=ha.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new Tg(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||mu()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=qo(e);let s=mu(),o=au();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await Zf(i,function(e){return Gc(Kc(ha.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Jf(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new Tg(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await sp(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function Sg(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Ig{constructor(e){this.key=e}}class Ng{constructor(e){this.key=e}}class Cg{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=mu(),this.mutatedKeys=mu(),this._a=ru(e),this.aa=new ug(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new dg,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=tu(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:s,la:n,Zi:o,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ko()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const o=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,l=a!==this.sa;return this.sa=a,0!==s.length||l?{snapshot:new hg(this.query,e.aa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new dg,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=mu(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new Ng(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new Ig(n))})),t}da(e){this.ia=e.ls,this.oa=mu();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return hg.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class kg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class xg{constructor(e){this.key=e,this.Ra=!1}}class Ag{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new su((e=>Zc(e)),Xc),this.fa=new Map,this.ga=new Set,this.pa=new Tl(ga.comparator),this.ya=new Map,this.wa=new kf,this.Sa={},this.ba=new Map,this.Da=nf.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function Og(e,t){const n=rm(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const e=await Zf(n.localStore,Gc(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Rg(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Mp(n.remoteStore,e)}return i}async function Rg(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await tp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return $g(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const s=await tp(e.localStore,t,!0),o=new Cg(t,s.ls),a=o.ca(s.documents),l=fd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);$g(e,n,c.Ta);const u=new kg(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function Dg(e,t){const n=qo(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!Xc(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ep(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Fp(n.remoteStore,r.targetId),jg(n,r.targetId)})).catch(Ca)):(jg(n,r.targetId),await ep(n.localStore,r.targetId,!0))}async function Pg(e,t){const n=qo(e);try{const e=await function(e,t){const n=qo(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Al.EMPTY_BYTE_STRING,ua.min()).withLastLimboFreeSnapshotVersion(ua.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))}));let a=au(),l=mu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Jf(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(ua.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return ka.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(Wo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?Wo(r.Ra):e.removedDocuments.size>0&&(Wo(r.Ra),r.Ra=!1))})),await qg(n,e,t)}catch(e){await Ca(e)}}function Lg(e,t,n){const r=qo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=qo(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&_g(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Mg(e,t,n){const r=qo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let e=new Tl(ga.comparator);e=e.insert(s,cc.newNoDocument(s,ua.min()));const n=mu().add(s),i=new hd(ua.min(),new Map,new Tl(oa),e,n);await Pg(r,i),r.pa=r.pa.remove(s),r.ya.delete(t),Wg(r)}else await ep(r.localStore,t,!1).then((()=>jg(r,t,n))).catch(Ca)}async function Fg(e,t){const n=qo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=qo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ka.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Wo(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=mu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Vg(n,r,null),Bg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qg(n,e)}catch(e){await Ca(e)}}async function Ug(e,t,n){const r=qo(e);try{const e=await function(e,t){const n=qo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Wo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Vg(r,t,n),Bg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await qg(r,e)}catch(n){await Ca(n)}}function Bg(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function Vg(e,t,n){const r=qo(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function jg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||zg(e,t)}))}function zg(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(Fp(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Wg(e))}function $g(e,t,n){for(const r of n)r instanceof Ig?(e.wa.addReference(r.key,t),Kg(e,r)):r instanceof Ng?(Vo("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||zg(e,r.key)):Ko()}function Kg(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Vo("SyncEngine","New document in limbo: "+n),e.ga.add(r),Wg(e))}function Wg(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new ga(ha.fromString(t)),r=e.Da.next();e.ya.set(r,new xg(n)),e.pa=e.pa.insert(n,r),Mp(e.remoteStore,new eh(Gc(Kc(n.path)),r,"TargetPurposeLimboResolution",Va._e))}}async function qg(e,t,n){const r=qo(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{o.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Kf.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Va.a_(i),await async function(e,t){const n=qo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ka.forEach(t,(t=>ka.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ka.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Da(e))throw e;Vo("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function Hg(e,t){const n=qo(e);if(!n.currentUser.isEqual(t)){Vo("SyncEngine","User change. New user:",t.toKey());const e=await Yf(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new Go(Ho.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await qg(n,e._s)}}function Gg(e,t){const n=qo(e),r=n.ya.get(t);if(r&&r.Ra)return mu().add(r.key);{let e=mu();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function Yg(e,t){const n=qo(e),r=await tp(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&$g(n,t.targetId,i.Ta),i}async function Qg(e,t){const n=qo(e);return rp(n.localStore,t).then((e=>qg(n,e)))}async function Jg(e,t,n,r){const i=qo(e),s=await function(e,t){const n=qo(e),r=qo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):ka.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Yp(i.remoteStore):"acknowledged"===n||"rejected"===n?(Vg(i,t,r||null),Bg(i,t),function(e,t){qo(qo(e).mutationQueue).Fn(t)}(i.localStore,t)):Ko(),await qg(i,s)):Vo("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Xg(e,t,n){const r=qo(e),i=[],s=[];for(const o of t){let e;const t=r.fa.get(o);if(t&&0!==t.length){e=await Zf(r.localStore,Gc(t[0]));for(const e of t){const t=r.ma.get(e),n=await Yg(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await np(r.localStore,o);e=await Zf(r.localStore,t),await Rg(r,Zg(t),o,!1,e.resumeToken)}i.push(e)}return r.Va.a_(s),i}function Zg(e){return $c(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function em(e){return function(e){return qo(qo(e).persistence).Bi()}(qo(e).localStore)}async function tm(e,t,n,r){const i=qo(e);if(i.Ca)return void Vo("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await rp(i.localStore,nu(s[0])),r=hd.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Al.EMPTY_BYTE_STRING);await qg(i,e,r);break}case"rejected":await ep(i.localStore,t,!0),jg(i,t,r);break;default:Ko()}}async function nm(e,t,n){const r=rm(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){Vo("SyncEngine","Adding an already active target "+e);continue}const t=await np(r.localStore,e),n=await Zf(r.localStore,t);await Rg(r,Zg(t),n.targetId,!1,n.resumeToken),Mp(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await ep(r.localStore,e,!1).then((()=>{Fp(r.remoteStore,e),jg(r,e)})).catch(Ca)}}function rm(e){const t=qo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Mg.bind(null,t),t.Va.a_=yg.bind(null,t.eventManager),t.Va.Fa=vg.bind(null,t.eventManager),t}function im(e){const t=qo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ug.bind(null,t),t}class sm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Np(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Gf(this.persistence,new qf,e.initialUser,this.serializer)}createPersistence(e){return new Pf(Mf.jr,this.serializer)}createSharedClientState(e){return new gp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class om extends sm{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await im(this.xa.syncEngine),await Yp(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Gf(this.persistence,new qf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new uf(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Ba(t,this.persistence);return new Ua(e.asyncQueue,n)}createPersistence(e){const t=$f(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Gh.withCacheSize(this.cacheSizeBytes):Gh.DEFAULT;return new Vf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Sp(),Ip(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gp}}class am extends om{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof pp&&(this.sharedClientState.syncEngine={Ys:Jg.bind(null,t),Zs:tm.bind(null,t),Xs:nm.bind(null,t),Bi:em.bind(null,t),Js:Qg.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=qo(e);if(rm(n),im(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Xg(n,e.toArray());n.Ca=!0,await sg(n.remoteStore,!0);for(const r of t)Mp(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(jg(n,i),ep(n.localStore,i,!0)))),Fp(n.remoteStore,i)})),await t,await Xg(n,e),function(e){const t=qo(e);t.ya.forEach(((e,n)=>{Fp(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new Tl(ga.comparator)}(n),n.Ca=!1,await sg(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Sp();if(!pp.D(t))throw new Go(Ho.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=$f(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class lm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Lg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hg.bind(null,this.syncEngine),await sg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pg}createDatastore(e){const t=Np(e.databaseInfo.databaseId),n=function(e){return new Ep(e)}(e.databaseInfo);return function(e,t,n,r){return new Op(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Dp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Lg(this.syncEngine,e,0)),yp.D()?new yp:new mp)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Ag(e,t,n,r,i,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=qo(e);Vo("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await Lp(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function cm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class um{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):jo("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class dm{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Yo,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new bg(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class hm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Go(Ho.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=qo(e),r=Md(n.serializer)+"/documents",i={documents:t.map((e=>Rd(n.serializer,e)))},s=await n.Co("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Wo(!!t.found),t.found.name,t.found.updateTime;const n=Dd(e,t.found.name),r=xd(t.found.updateTime),i=t.found.createTime?xd(t.found.createTime):ua.min(),s=new ac({mapValue:{fields:t.found.fields}});return cc.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Wo(!!t.missing),Wo(!!t.readTime);const n=Dd(e,t.missing),r=xd(t.readTime);return cc.newNoDocument(n,r)}(e,t):Ko()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Wo(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=ga.fromPath(t);this.mutations.push(new Qu(n,this.precondition(n)))})),await async function(e,t){const n=qo(e),r=Md(n.serializer)+"/documents",i={writes:t.map((e=>Vd(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ko();t=ua.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Go(Ho.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ua.min())?Mu.exists(!1):Mu.updateTime(t):Mu.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ua.min()))throw new Go(Ho.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mu.updateTime(t)}return Mu.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class fm{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new Cp(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new hm(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!ja(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!rd(t)}return!1}}class pm{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Mo.UNAUTHENTICATED,this.clientId=sa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Vo("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Vo("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Go(Ho.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=cg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function gm(e,t){e.asyncQueue.verifyOperationInProgress(),Vo("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Yf(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function mm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await vm(e);Vo("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>ig(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ig(t.remoteStore,n))),e._onlineComponents=t}function ym(e){return"FirebaseError"===e.name?e.code===Ho.FAILED_PRECONDITION||e.code===Ho.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function vm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Vo("FirestoreClient","Using user provided OfflineComponentProvider");try{await gm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!ym(n))throw n;zo("Error using user provided cache. Falling back to memory cache: "+n),await gm(e,new sm)}}else Vo("FirestoreClient","Using default OfflineComponentProvider"),await gm(e,new sm);return e._offlineComponents}async function _m(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Vo("FirestoreClient","Using user provided OnlineComponentProvider"),await mm(e,e._uninitializedComponentsProvider._online)):(Vo("FirestoreClient","Using default OnlineComponentProvider"),await mm(e,new lm))),e._onlineComponents}function wm(e){return vm(e).then((e=>e.persistence))}function bm(e){return vm(e).then((e=>e.localStore))}function Tm(e){return _m(e).then((e=>e.remoteStore))}function Em(e){return _m(e).then((e=>e.syncEngine))}function Sm(e){return _m(e).then((e=>e.datastore))}async function Im(e){const t=await _m(e),n=t.eventManager;return n.onListen=Og.bind(null,t.syncEngine),n.onUnlisten=Dg.bind(null,t.syncEngine),n}function Nm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Yo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new um({next:s=>{t.enqueueAndForget((()=>mg(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Go(Ho.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Go(Ho.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new wg(Kc(n.path),s,{includeMetadataChanges:!0,J_:!0});return gg(e,o)}(await Im(e),e.asyncQueue,t,n,r))),r.promise}function Cm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Yo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new um({next:n=>{t.enqueueAndForget((()=>mg(e,o))),n.fromCache&&"server"===r.source?i.reject(new Go(Ho.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new wg(n,s,{includeMetadataChanges:!0,J_:!0});return gg(e,o)}(await Im(e),e.asyncQueue,t,n,r))),r.promise}function km(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?od().encode(e):e,function(e,t){return new dm(e,t)}(function(e,t){if(e instanceof Uint8Array)return cm(e,t);if(e instanceof ArrayBuffer)return cm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Np(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=qo(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=qo(e),r=xd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Sg(r));const i=new Eg(r,e.localStore,t.serializer);let s=await t.Ma();for(;s;){const e=await i.ea(s);e&&n._updateProgress(e),s=await t.Ma()}const o=await i.complete();return await qg(e,o.ra,void 0),await function(e,t){const n=qo(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.na)}catch(e){return zo("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Em(e),i,r)}))}function xm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Am=new Map;function Om(e,t,n){if(!n)throw new Go(Ho.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Rm(e,t,n,r){if(!0===t&&!0===r)throw new Go(Ho.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Dm(e){if(!ga.isDocumentKey(e))throw new Go(Ho.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Pm(e){if(ga.isDocumentKey(e))throw new Go(Ho.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Lm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ko()}function Mm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Go(Ho.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lm(e);throw new Go(Ho.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Fm(e,t){if(t<=0)throw new Go(Ho.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Um{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Go(Ho.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Go(Ho.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Go(Ho.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Go(Ho.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Go(Ho.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Go(Ho.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Go(Ho.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Jo;switch(e.type){case"firstParty":return new ta(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Go(Ho.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Am.get(e);t&&(Vo("ComponentProvider","Removing Datastore"),Am.delete(e),t.terminate())}(this),Promise.resolve()}}function Vm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Mm(e,Bm))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Mo.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ie(JSON.stringify({alg:"none",type:"JWT"})),Ie(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Go(Ho.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Mo(s)}e._authCredentials=new Xo(new Qo(t,n))}}class jm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new jm(this.firestore,e,this._query)}}class zm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $m(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zm(this.firestore,e,this._key)}}class $m extends jm{constructor(e,t,n){super(e,t,Kc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zm(this.firestore,null,new ga(e))}withConverter(e){return new $m(this.firestore,e,this._path)}}function Km(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Xe(e),Om("collection","path",t),e instanceof Bm){const n=ha.fromString(t,...r);return Pm(n),new $m(e,null,n)}{if(!(e instanceof zm||e instanceof $m))throw new Go(Ho.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ha.fromString(t,...r));return Pm(n),new $m(e.firestore,null,n)}}function Wm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Xe(e),1===arguments.length&&(t=sa.newId()),Om("doc","path",t),e instanceof Bm){const n=ha.fromString(t,...r);return Dm(n),new zm(e,null,new ga(n))}{if(!(e instanceof zm||e instanceof $m))throw new Go(Ho.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ha.fromString(t,...r));return Dm(n),new zm(e.firestore,e instanceof $m?e.converter:null,new ga(n))}}function qm(e,t){return e=Xe(e),t=Xe(t),(e instanceof zm||e instanceof $m)&&(t instanceof zm||t instanceof $m)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Hm(e,t){return e=Xe(e),t=Xe(t),e instanceof jm&&t instanceof jm&&e.firestore===t.firestore&&Xc(e._query,t._query)&&e.converter===t.converter}class Gm{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Cp(this,"async_queue_retry"),this.iu=()=>{const e=Ip();e&&Vo("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=Ip();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Ip();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new Yo;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Da(e))throw e;Vo("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw jo("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=lg.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&Ko()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function Ym(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Qm{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jm extends Bm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Gm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Zm(this),this._firestoreClient.terminate()}}function Xm(e){return e._firestoreClient||Zm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Zm(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Ul(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,xm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new pm(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function ey(e,t,n){const r=new Yo;return e.asyncQueue.enqueue((async()=>{try{await gm(e,n),await mm(e,t),r.resolve()}catch(e){const n=e;if(!ym(n))throw n;zo("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function ty(e){return function(e){const t=new Yo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=qo(e);zp(n.remoteStore)||Vo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=qo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=cg(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Em(e),t))),t.promise}(Xm(e=Mm(e,Jm)))}function ny(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await wm(e),n=await Tm(e);return t.setNetworkEnabled(!0),function(e){const t=qo(e);return t.C_.delete(0),Pp(t)}(n)}))}(Xm(e=Mm(e,Jm)))}function ry(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await wm(e),n=await Tm(e);return t.setNetworkEnabled(!1),async function(e){const t=qo(e);t.C_.add(0),await Lp(t),t.M_.set("Offline")}(n)}))}(Xm(e=Mm(e,Jm)))}function iy(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=qo(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await bm(e),t)))}(Xm(e=Mm(e,Jm)),t).then((t=>t?new jm(e,null,t.query):null))}function sy(e){if(e._initialized||e._terminated)throw new Go(Ho.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oy(Al.fromBase64String(e))}catch(e){throw new Go(Ho.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new oy(Al.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ay{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Go(Ho.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ly{constructor(e){this._methodName=e}}class cy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Go(Ho.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Go(Ho.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oa(this._lat,e._lat)||oa(this._long,e._long)}}const uy=/^__.*__$/;class dy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Wu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ku(e,this.data,t,this.fieldTransforms)}}class hy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Wu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ko()}}class py{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new py(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Py(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(fy(this.Iu)&&uy.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class gy{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Np(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new py({Iu:e,methodName:t,gu:n,path:pa.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function my(e){const t=e._freezeSettings(),n=Np(e._databaseId);return new gy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yy(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);Ay("Data must be an object, but it was:",o,r);const a=ky(r,o);let l,c;if(s.merge)l=new kl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Oy(t,r,n);if(!o.contains(i))throw new Go(Ho.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Ly(e,i)||e.push(i)}l=new kl(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new dy(new ac(a),l,c)}class vy extends ly{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vy}}function _y(e,t,n){return new py({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class wy extends ly{_toFieldTransform(e){return new Pu(e.path,new Nu)}isEqual(e){return e instanceof wy}}class by extends ly{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=_y(this,e,!0),n=this.yu.map((e=>Cy(e,t))),r=new Cu(n);return new Pu(e.path,r)}isEqual(e){return this===e}}class Ty extends ly{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=_y(this,e,!0),n=this.yu.map((e=>Cy(e,t))),r=new xu(n);return new Pu(e.path,r)}isEqual(e){return this===e}}class Ey extends ly{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new Ou(e.serializer,bu(e.serializer,this.wu));return new Pu(e.path,t)}isEqual(e){return this===e}}function Sy(e,t,n,r){const i=e.pu(1,t,n);Ay("Data must be an object, but it was:",i,r);const s=[],o=ac.empty();wl(r,((e,r)=>{const a=Dy(t,e,n);r=Xe(r);const l=i.Ru(a);if(r instanceof vy)s.push(a);else{const e=Cy(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new kl(s);return new hy(o,a,i.fieldTransforms)}function Iy(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[Oy(t,r,n)],l=[i];if(s.length%2!=0)throw new Go(Ho.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(Oy(t,s[h])),l.push(s[h+1]);const c=[],u=ac.empty();for(let h=a.length-1;h>=0;--h)if(!Ly(c,a[h])){const e=a[h];let t=l[h];t=Xe(t);const n=o.Ru(e);if(t instanceof vy)c.push(e);else{const r=Cy(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new kl(c);return new hy(u,d,o.fieldTransforms)}function Ny(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Cy(n,e.pu(r?4:3,t))}function Cy(e,t){if(xy(e=Xe(e)))return Ay("Unsupported field value:",t,e),ky(e,t);if(e instanceof ly)return function(e,t){if(!fy(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Cy(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Xe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ca.fromDate(e);return{timestampValue:Nd(t.serializer,n)}}if(e instanceof ca){const n=new ca(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Nd(t.serializer,n)}}if(e instanceof cy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof oy)return{bytesValue:Cd(t.serializer,e._byteString)};if(e instanceof zm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ad(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(Lm(e)))}(e,t)}function ky(e,t){const n={};return bl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wl(e,((e,r)=>{const i=Cy(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ca||e instanceof cy||e instanceof oy||e instanceof zm||e instanceof ly)}function Ay(e,t,n){if(!xy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Lm(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function Oy(e,t,n){if((t=Xe(t))instanceof ay)return t._internalPath;if("string"==typeof t)return Dy(e,t);throw Py("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ry=new RegExp("[~\\*/\\[\\]]");function Dy(e,t,n){if(t.search(Ry)>=0)throw Py("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new ay(...t.split("."))._internalPath}catch(kn){throw Py("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Py(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Go(Ho.INVALID_ARGUMENT,a+e+l)}function Ly(e,t){return e.some((e=>e.isEqual(t)))}class My{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new zm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Uy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fy extends My{data(){return super.data()}}function Uy(e,t){return"string"==typeof t?Dy(e,t):t instanceof ay?t._internalPath:t._delegate._internalPath}function By(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Go(Ho.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vy{}class jy extends Vy{}function zy(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Vy&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Ky)).length,n=e.filter((e=>e instanceof $y)).length;if(t>1||t>0&&n>0)throw new Go(Ho.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class $y extends jy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new $y(e,t,n)}_apply(e){const t=this._parse(e);return Xy(e._query,t),new jm(e.firestore,e.converter,Qc(e._query,t))}_parse(e){const t=my(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Go(Ho.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Jy(o,s);const t=[];for(const n of o)t.push(Qy(r,e,n));a={arrayValue:{values:t}}}else a=Qy(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Jy(o,s),a=Ny(n,t,o,"in"===s||"not-in"===s);return mc.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Ky extends Vy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ky(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:yc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Xy(n,i),n=Qc(n,i)}(e._query,t),new jm(e.firestore,e.converter,Qc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Wy extends jy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Wy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fc(t,n)}(e._query,this._field,this._direction);return new jm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new zc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class qy extends jy{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new qy(e,t,n)}_apply(e){return new jm(e.firestore,e.converter,Jc(e._query,this._limit,this._limitType))}}class Hy extends jy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Hy(e,t,n)}_apply(e){const t=Yy(e,this.type,this._docOrFields,this._inclusive);return new jm(e.firestore,e.converter,function(e,t){return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Gy extends jy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Gy(e,t,n)}_apply(e){const t=Yy(e,this.type,this._docOrFields,this._inclusive);return new jm(e.firestore,e.converter,function(e,t){return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Yy(e,t,n,r){if(n[0]=Xe(n[0]),n[0]instanceof My)return function(e,t,n,r,i){if(!r)throw new Go(Ho.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Hc(e))if(o.field.isKeyField())s.push(Yl(t,r.key));else{const e=r.data.field(o.field);if(Ll(e))throw new Go(Ho.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new uc(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=my(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Go(Ho.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!qc(e)&&-1!==s.indexOf("/"))throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(ha.fromString(s));if(!ga.isDocumentKey(n))throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new ga(n);a.push(Yl(t,i))}else{const e=Ny(n,r,s);a.push(e)}}return new uc(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Qy(e,t,n){if("string"==typeof(n=Xe(n))){if(""===n)throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qc(t)&&-1!==n.indexOf("/"))throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ha.fromString(n));if(!ga.isDocumentKey(r))throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Yl(e,new ga(r))}if(n instanceof zm)return Yl(e,n._key);throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Lm(n),"."))}function Jy(e,t){if(!Array.isArray(e)||0===e.length)throw new Go(Ho.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Xy(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Go(Ho.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Go(Ho.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Zy{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ko()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return wl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new cy(Dl(e.latitude),Dl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ml(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const t=Rl(e);return new ca(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ha.fromString(e);Wo(Zd(n));const r=new Bl(n.get(1),n.get(3)),i=new ga(n.popFirst(5));return r.isEqual(t)||jo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ev(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class tv extends Zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new oy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zm(this.firestore,null,t)}}class nv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rv extends My{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new iv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Uy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class iv extends rv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class sv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new iv(this._firestore,this._userDataWriter,n.key,n,new nv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Go(Ho.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new iv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new nv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new iv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ov(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ov(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ko()}}function av(e,t){return e instanceof rv&&t instanceof rv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof sv&&t instanceof sv&&e._firestore===t._firestore&&Hm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class lv extends Zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new oy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zm(this.firestore,null,t)}}function cv(e){e=Mm(e,zm);const t=Mm(e.firestore,Jm),n=Xm(t),r=new lv(t);return function(e,t){const n=new Yo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=qo(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Go(Ho.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=cg(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await bm(e),t,n))),n.promise}(n,e._key).then((n=>new rv(t,r,e._key,n,new nv(null!==n&&n.hasLocalMutations,!0),e.converter)))}function uv(e){e=Mm(e,jm);const t=Mm(e.firestore,Jm),n=Xm(t),r=new lv(t);return function(e,t){const n=new Yo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await tp(e,t,!0),i=new Cg(t,r.ls),s=i.ca(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=cg(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await bm(e),t,n))),n.promise}(n,e._query).then((n=>new sv(t,r,e,n)))}function dv(e,t,n){e=Mm(e,zm);const r=Mm(e.firestore,Jm),i=ev(e.converter,t,n);return gv(r,[yy(my(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Mu.none())])}function hv(e,t,n){e=Mm(e,zm);const r=Mm(e.firestore,Jm),i=my(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Xe(t))||t instanceof ay?Iy(i,"updateDoc",e._key,t,n,a):Sy(i,"updateDoc",e._key,t),gv(r,[s.toMutation(e._key,Mu.exists(!0))])}function fv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Xe(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Ym(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(Ym(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof zm)d=Mm(e.firestore,Jm),h=Kc(e._key.path),u={next:t=>{n[l]&&n[l](mv(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Mm(e,jm);d=Mm(t.firestore,Jm),h=t._query;const r=new lv(d);u={next:e=>{n[l]&&n[l](new sv(d,r,t,e))},error:n[l+1],complete:n[l+2]},By(e._query)}return function(e,t,n,r){const i=new um(r),s=new wg(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>gg(await Im(e),s))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>mg(await Im(e),s)))}}(Xm(d),h,c,u)}function pv(e,t){return function(e,t){const n=new um(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){qo(e).q_.add(t),t.next()}(await Im(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){qo(e).q_.delete(t)}(await Im(e),n)))}}(Xm(e=Mm(e,Jm)),Ym(t)?t:{next:t})}function gv(e,t){return function(e,t){const n=new Yo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=im(e);try{const e=await function(e,t){const n=qo(e),r=ca.now(),i=t.reduce(((e,t)=>e.add(t.key)),mu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=au(),l=mu();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=zu(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Wu(e.key,t,lc(t.value.mapValue),Mu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:uu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new Tl(oa)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await qg(r,e.changes),await Yp(r.remoteStore)}catch(e){const t=cg(e,"Failed to persist write");n.reject(t)}}(await Em(e),t,n))),n.promise}(Xm(e),t)}function mv(e,t,n){const r=n.docs.get(t._key),i=new lv(e);return new rv(e,i,t._key,r,new nv(n.hasPendingWrites,n.fromCache),t.converter)}const yv={maxAttempts:5};class vv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=my(e)}set(e,t,n){this._verifyNotCommitted();const r=_v(e,this._firestore),i=ev(r.converter,t,n),s=yy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Mu.none())),this}update(e,t,n){this._verifyNotCommitted();const r=_v(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Xe(t))||t instanceof ay?Iy(this._dataReader,"WriteBatch.update",r._key,t,n,o):Sy(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Mu.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_v(e,this._firestore);return this._mutations=this._mutations.concat(new Yu(t._key,Mu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Go(Ho.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _v(e,t){if((e=Xe(e)).firestore!==t)throw new Go(Ho.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class wv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=my(e)}get(e){const t=_v(e,this._firestore),n=new tv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ko();const r=e[0];if(r.isFoundDocument())return new My(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new My(this._firestore,n,t._key,null,t.converter);throw Ko()}))}set(e,t,n){const r=_v(e,this._firestore),i=ev(r.converter,t,n),s=yy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=_v(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Xe(t))||t instanceof ay?Iy(this._dataReader,"Transaction.update",r._key,t,n,o):Sy(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=_v(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_v(e,this._firestore),n=new lv(this._firestore);return super.get(e).then((e=>new rv(this._firestore,n,t._key,e._document,new nv(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Fo=e}($t),Ft(new Ze("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Jm(new Zo(e.getProvider("auth-internal")),new ra(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Go(Ho.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Gt(Lo,"4.4.0",e),Gt(Lo,"4.4.0","esm2017")}();function bv(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Go("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Tv(){if("undefined"===typeof Uint8Array)throw new Go("unimplemented","Uint8Arrays are not available in this environment.")}function Ev(){if("undefined"==typeof atob)throw new Go("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Sv{constructor(e){this._delegate=e}static fromBase64String(e){return Ev(),new Sv(oy.fromBase64String(e))}static fromUint8Array(e){return Tv(),new Sv(oy.fromUint8Array(e))}toBase64(){return Ev(),this._delegate.toBase64()}toUint8Array(){return Tv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Iv(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Nv{enableIndexedDbPersistence(e,t){return function(e,t){sy(e=Mm(e,Jm));const n=Xm(e);if(n._uninitializedComponentsProvider)throw new Go(Ho.FAILED_PRECONDITION,"SDK cache is already specified.");zo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new lm;return ey(n,i,new om(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){sy(e=Mm(e,Jm));const t=Xm(e);if(t._uninitializedComponentsProvider)throw new Go(Ho.FAILED_PRECONDITION,"SDK cache is already specified.");zo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new lm;return ey(t,r,new am(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Go(Ho.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Yo;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Aa.D())return Promise.resolve();const t=e+"main";await Aa.delete(t)}($f(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Cv{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Bl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||zo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Vm(this._delegate,e,t,n)}enableNetwork(){return ny(this._delegate)}disableNetwork(){return ry(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Rm("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ty(this._delegate)}onSnapshotsInSync(e){return pv(this._delegate,e)}get app(){if(!this._appCompat)throw new Go("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new jv(this,Km(this._delegate,e))}catch(t){throw Dv(t,"collection()","Firestore.collection()")}}doc(e){try{return new Rv(this,Wm(this._delegate,e))}catch(t){throw Dv(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Uv(this,function(e,t){if(e=Mm(e,Bm),Om("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Go(Ho.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new jm(e,null,function(e){return new zc(ha.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Dv(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Mm(e,Jm);const r=Object.assign(Object.assign({},yv),n);return function(e){if(e.maxAttempts<1)throw new Go(Ho.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Yo;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Sm(e);new fm(e.asyncQueue,i,n,t,r).run()})),r.promise}(Xm(e),(n=>t(new wv(e,n))),r)}(this._delegate,(t=>e(new xv(this,t))))}batch(){return Xm(this._delegate),new Av(new vv(this._delegate,(e=>gv(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Xm(e=Mm(e,Jm)),r=new Qm;return km(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return iy(this._delegate,e).then((e=>e?new Uv(this,e):null))}}class kv extends Zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sv(new oy(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Rv.forKey(t,this.firestore,null)}}class xv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kv(e)}get(e){const t=zv(e);return this._delegate.get(t).then((e=>new Mv(this._firestore,new rv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=zv(e);return n?(bv("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=zv(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=zv(e);return this._delegate.delete(t),this}}class Av{constructor(e){this._delegate=e}set(e,t,n){const r=zv(e);return n?(bv("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=zv(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=zv(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ov{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new iv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Fv(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Ov.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Ov(e,new kv(e),t),r.set(t,i)),i}}Ov.INSTANCES=new WeakMap;class Rv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kv(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Go("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Rv(t,new zm(t._delegate,n,new ga(e)))}static forKey(e,t,n){return new Rv(t,new zm(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new jv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new jv(this.firestore,Km(this._delegate,e))}catch(t){throw Dv(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Xe(e))instanceof zm&&qm(this._delegate,e)}set(e,t){t=bv("DocumentReference.set",t);try{return t?dv(this._delegate,e,t):dv(this._delegate,e)}catch(n){throw Dv(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?hv(this._delegate,e):hv(this._delegate,e,t,...r)}catch(s){throw Dv(s,"updateDoc()","DocumentReference.update()")}}delete(){return gv(Mm((e=this._delegate).firestore,Jm),[new Yu(e._key,Mu.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Pv(t),i=Lv(t,(e=>new Mv(this.firestore,new rv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return fv(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?cv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Mm(e,zm);const t=Mm(e.firestore,Jm);return Nm(Xm(t),e._key,{source:"server"}).then((n=>mv(t,e,n)))}(this._delegate):function(e){e=Mm(e,zm);const t=Mm(e.firestore,Jm);return Nm(Xm(t),e._key).then((n=>mv(t,e,n)))}(this._delegate),t.then((e=>new Mv(this.firestore,new rv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Rv(this.firestore,e?this._delegate.withConverter(Ov.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Dv(e,t,n){return e.message=e.message.replace(t,n),e}function Pv(e){for(const t of e)if("object"===typeof t&&!Iv(t))return t;return{}}function Lv(e,t){var n,r;let i;return i=Iv(e[0])?e[0]:Iv(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Mv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Rv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return av(this._delegate,e._delegate)}}class Fv extends Mv{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Ko(),t}}class Uv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kv(e)}where(e,t,n){try{return new Uv(this.firestore,zy(this._delegate,function(e,t,n){const r=t,i=Uy("where",e);return $y._create(i,r,n)}(e,t,n)))}catch(r){throw Dv(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Uv(this.firestore,zy(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Uy("orderBy",e);return Wy._create(n,t)}(e,t)))}catch(n){throw Dv(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Uv(this.firestore,zy(this._delegate,(Fm("limit",t=e),qy._create("limit",t,"F"))))}catch(t){throw Dv(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Uv(this.firestore,zy(this._delegate,(Fm("limitToLast",t=e),qy._create("limitToLast",t,"L"))))}catch(t){throw Dv(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Uv(this.firestore,zy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hy._create("startAt",t,!0)}(...arguments)))}catch(e){throw Dv(e,"startAt()","Query.startAt()")}}startAfter(){try{return new Uv(this.firestore,zy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hy._create("startAfter",t,!1)}(...arguments)))}catch(e){throw Dv(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Uv(this.firestore,zy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gy._create("endBefore",t,!1)}(...arguments)))}catch(e){throw Dv(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new Uv(this.firestore,zy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gy._create("endAt",t,!0)}(...arguments)))}catch(e){throw Dv(e,"endAt()","Query.endAt()")}}isEqual(e){return Hm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?uv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Mm(e,jm);const t=Mm(e.firestore,Jm),n=Xm(t),r=new lv(t);return Cm(n,e._query,{source:"server"}).then((n=>new sv(t,r,e,n)))}(this._delegate):function(e){e=Mm(e,jm);const t=Mm(e.firestore,Jm),n=Xm(t),r=new lv(t);return By(e._query),Cm(n,e._query).then((n=>new sv(t,r,e,n)))}(this._delegate),t.then((e=>new Vv(this.firestore,new sv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Pv(t),i=Lv(t,(e=>new Vv(this.firestore,new sv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return fv(this._delegate,r,i)}withConverter(e){return new Uv(this.firestore,e?this._delegate.withConverter(Ov.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Bv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Fv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Vv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Uv(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Fv(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Bv(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Fv(this._firestore,n))}))}isEqual(e){return av(this._delegate,e._delegate)}}class jv extends Uv{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rv(this.firestore,e):null}doc(e){try{return new Rv(this.firestore,void 0===e?Wm(this._delegate):Wm(this._delegate,e))}catch(t){throw Dv(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Mm(e.firestore,Jm),r=Wm(e),i=ev(e.converter,t);return gv(n,[yy(my(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Mu.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Rv(this.firestore,e)))}isEqual(e){return qm(this._delegate,e._delegate)}withConverter(e){return new jv(this.firestore,e?this._delegate.withConverter(Ov.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function zv(e){return Mm(e,zm)}class $v{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new ay(...t)}static documentId(){return new $v(pa.keyField().canonicalString())}isEqual(e){return(e=Xe(e))instanceof ay&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kv{constructor(e){this._delegate=e}static serverTimestamp(){const e=new wy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Kv(e)}static delete(){const e=new vy("deleteField");return e._methodName="FieldValue.delete",new Kv(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new by("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Kv(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ty("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Kv(e)}static increment(e){const t=new Ey("increment",e);return t._methodName="FieldValue.increment",new Kv(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Wv={Firestore:Cv,GeoPoint:cy,Timestamp:ca,Blob:Sv,Transaction:xv,WriteBatch:Av,DocumentReference:Rv,DocumentSnapshot:Mv,Query:Uv,QueryDocumentSnapshot:Fv,QuerySnapshot:Vv,CollectionReference:jv,FieldPath:$v,FieldValue:Kv,setLogLevel:function(e){var t;t=e,Uo.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var qv;(function(e,t){e.INTERNAL.registerComponent(new Ze("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Wv)))})(qv=pn,((e,t)=>new Cv(e,t,new Nv))),qv.registerVersion("@firebase/firestore-compat","0.3.23");function Hv(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Gv={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Yv="EMAIL_SIGNIN",Qv="PASSWORD_RESET",Jv="RECOVER_EMAIL",Xv="REVERT_SECOND_FACTOR_ADDITION",Zv="VERIFY_AND_CHANGE_EMAIL",e_="VERIFY_EMAIL";function t_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const n_=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},r_=t_,i_=new je("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),s_=new ct("@firebase/auth");function o_(e){if(s_.logLevel<=it.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];s_.error("Auth (".concat($t,"): ").concat(e),...n)}}function a_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw d_(e,...n)}function l_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return d_(e,...n)}function c_(e,t,n){const r=Object.assign(Object.assign({},r_()),{[t]:n});return new je("auth","Firebase",r).create(t,{appName:e.name})}function u_(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&a_(e,"argument-error"),c_(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function d_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return i_.create(e,...n)}function h_(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw d_(t,...r)}}function f_(e){const t="INTERNAL ASSERTION FAILED: "+e;throw o_(t),new Error(t)}function p_(e,t){e||f_(t)}function g_(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function m_(){return"http:"===y_()||"https:"===y_()}function y_(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class v_{constructor(e,t){this.shortDelay=e,this.longDelay=t,p_(t>e,"Short delay should be less than long delay!"),this.isMobile=Pe()||Fe()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(m_()||Me()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function __(e,t){p_(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class w_{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void f_("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void f_("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void f_("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const b_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},T_=new v_(3e4,6e4);function E_(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function S_(e,t,n,r){return I_(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=qe(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),w_.fetch()(C_(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function I_(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},b_),t);try{const t=new x_(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw A_(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw A_(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw A_(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw A_(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw c_(e,a,o);a_(e,a)}}catch(i){if(i instanceof Ve)throw i;a_(e,"network-request-failed",{message:String(i)})}}async function N_(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await S_(e,t,n,r,i);return"mfaPendingCredential"in s&&a_(e,"multi-factor-auth-required",{_serverResponse:s}),s}function C_(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?__(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function k_(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x_{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(l_(this.auth,"network-request-failed"))),T_.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function A_(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=l_(e,t,r);return i.customData._tokenResponse=n,i}function O_(e){return void 0!==e&&void 0!==e.getResponse}function R_(e){return void 0!==e&&void 0!==e.enterprise}class D_{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return k_(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function P_(e,t){return S_(e,"GET","/v2/recaptchaConfig",E_(e,t))}function L_(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function M_(e){return 1e3*Number(e)}function F_(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return o_("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ne(n);return e?JSON.parse(e):(o_("Failed to decode base64 JWT payload"),null)}catch(i){return o_("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function U_(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Ve&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class B_{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class V_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=L_(this.lastLoginAt),this.creationTime=L_(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function j_(e){var t;const n=e.auth,r=await e.getIdToken(),i=await U_(e,async function(e,t){return S_(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));h_(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Hv(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new V_(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class z_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){h_(e.idToken,"internal-error"),h_("undefined"!==typeof e.idToken,"internal-error"),h_("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=F_(e);return h_(t,"internal-error"),h_("undefined"!==typeof t.exp,"internal-error"),h_("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return h_(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await I_(e,{},(async()=>{const n=qe({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=C_(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",w_.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new z_;return n&&(h_("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(h_("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(h_("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new z_,this.toJSON())}_performRefresh(){return f_("not implemented")}}function $_(e,t){h_("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class K_{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Hv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new B_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new V_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await U_(this,this.stsTokenManager.getToken(this.auth,e));return h_(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Xe(e),r=await n.getIdToken(t),i=F_(r);h_(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:L_(M_(i.auth_time)),issuedAtTime:L_(M_(i.iat)),expirationTime:L_(M_(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Xe(e);await j_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(h_(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new K_(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){h_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await j_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await U_(this,async function(e,t){return S_(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:T}=t;h_(v&&T,e,"internal-error");const E=z_.fromJSON(this.name,T);h_("string"===typeof v,e,"internal-error"),$_(u,e.name),$_(d,e.name),h_("boolean"===typeof _,e,"internal-error"),h_("boolean"===typeof w,e,"internal-error"),$_(h,e.name),$_(f,e.name),$_(p,e.name),$_(g,e.name),$_(m,e.name),$_(y,e.name);const S=new K_({uid:v,auth:e,email:d,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return b&&Array.isArray(b)&&(S.providerData=b.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new z_;r.updateFromServerResponse(t);const i=new K_({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await j_(i),i}}const W_=new Map;function q_(e){p_(e instanceof Function,"Expected a class definition");let t=W_.get(e);return t?(p_(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,W_.set(e,t),t)}class H_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}H_.type="NONE";const G_=H_;function Y_(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Q_{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Y_(this.userKey,r.apiKey,i),this.fullPersistenceKey=Y_("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?K_._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Q_(q_(G_),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||q_(G_);const s=Y_(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=K_._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Q_(i,e,n)):new Q_(i,e,n)}}function J_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(tw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(X_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(rw(t))return"Blackberry";if(iw(t))return"Webos";if(Z_(t))return"Safari";if((t.includes("chrome/")||ew(t))&&!t.includes("edge/"))return"Chrome";if(nw(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function X_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/firefox\//i.test(e)}function Z_(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:De()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ew(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/crios\//i.test(e)}function tw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/iemobile/i.test(e)}function nw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/android/i.test(e)}function rw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/blackberry/i.test(e)}function iw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/webos/i.test(e)}function sw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return sw(e)||nw(e)||iw(e)||rw(e)||/windows phone/i.test(e)||tw(e)}function aw(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=J_(De());break;case"Worker":t="".concat(J_(De()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat($t,"/").concat(r)}class lw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class cw{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class uw{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hw(this),this.idTokenSubscription=new hw(this),this.beforeStateQueue=new lw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=i_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=q_(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Q_.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return h_(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await j_(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Xe(e):null;return t&&h_(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&h_(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(q_(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return S_(e,"GET","/v2/passwordPolicy",E_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new cw(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new je("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return S_(e,"POST","/v2/accounts:revokeToken",E_(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&q_(e)||this._popupRedirectResolver;h_(t,this,"argument-error"),this.redirectPersistenceManager=await Q_.create(this,[q_(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(h_(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return h_(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(s_.logLevel<=it.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];s_.warn("Auth (".concat($t,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function dw(e){return Xe(e)}class hw{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ye((e=>this.observer=e))}get next(){return h_(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fw(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=l_("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function pw(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class gw{constructor(e){this.type="recaptcha-enterprise",this.auth=dw(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;R_(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{P_(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new D_(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&R_(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));fw("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function mw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new gw(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function yw(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await mw(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await mw(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function vw(e,t,n){const r=dw(e);h_(r._canInitEmulator,r,"emulator-config-failed"),h_(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=_w(t),{host:o,port:a}=function(e){const t=_w(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ww(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ww(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function _w(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ww(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class bw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return f_("not implemented")}_getIdTokenResponse(e){return f_("not implemented")}_linkToIdToken(e,t){return f_("not implemented")}_getReauthenticationResolver(e){return f_("not implemented")}}async function Tw(e,t){return S_(e,"POST","/v1/accounts:resetPassword",E_(e,t))}async function Ew(e,t){return S_(e,"POST","/v1/accounts:signUp",t)}async function Sw(e,t){return N_(e,"POST","/v1/accounts:signInWithPassword",E_(e,t))}async function Iw(e,t){return S_(e,"POST","/v1/accounts:sendOobCode",E_(e,t))}async function Nw(e,t){return Iw(e,t)}async function Cw(e,t){return Iw(e,t)}class kw extends bw{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new kw(e,t,"password")}static _fromEmailAndCode(e,t){return new kw(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return yw(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Sw);case"emailLink":return async function(e,t){return N_(e,"POST","/v1/accounts:signInWithEmailLink",E_(e,t))}(e,{email:this._email,oobCode:this._password});default:a_(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return yw(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ew);case"emailLink":return async function(e,t){return N_(e,"POST","/v1/accounts:signInWithEmailLink",E_(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:a_(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xw(e,t){return N_(e,"POST","/v1/accounts:signInWithIdp",E_(e,t))}class Aw extends bw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Aw(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):a_("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Hv(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Aw(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return xw(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xw(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xw(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qe(t)}return e}}const Ow={USER_NOT_FOUND:"user-not-found"};class Rw extends bw{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Rw({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Rw({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return N_(e,"POST","/v1/accounts:signInWithPhoneNumber",E_(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await N_(e,"POST","/v1/accounts:signInWithPhoneNumber",E_(e,t));if(n.temporaryProof)throw A_(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return N_(e,"POST","/v1/accounts:signInWithPhoneNumber",E_(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ow)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Rw({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Dw{constructor(e){var t,n,r,i,s,o;const a=He(Ge(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);h_(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=He(Ge(e)).link,n=t?He(Ge(t)).deep_link_id:null,r=He(Ge(e)).deep_link_id;return(r?He(Ge(r)).link:null)||r||n||t||e}(e);try{return new Dw(t)}catch(n){return null}}}class Pw{constructor(){this.providerId=Pw.PROVIDER_ID}static credential(e,t){return kw._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Dw.parseLink(t);return h_(n,"argument-error"),kw._fromEmailAndCode(e,n.code,n.tenantId)}}Pw.PROVIDER_ID="password",Pw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Pw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Lw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mw extends Lw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fw extends Mw{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return h_("providerId"in t&&"signInMethod"in t,"argument-error"),Aw._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return h_(e.idToken||e.accessToken,"argument-error"),Aw._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Fw.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Fw.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Fw(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(l){return null}}}class Uw extends Mw{constructor(){super("facebook.com")}static credential(e){return Aw._fromParams({providerId:Uw.PROVIDER_ID,signInMethod:Uw.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uw.credentialFromTaggedObject(e)}static credentialFromError(e){return Uw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Uw.credential(t.oauthAccessToken)}catch(n){return null}}}Uw.FACEBOOK_SIGN_IN_METHOD="facebook.com",Uw.PROVIDER_ID="facebook.com";class Bw extends Mw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Aw._fromParams({providerId:Bw.PROVIDER_ID,signInMethod:Bw.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bw.credentialFromTaggedObject(e)}static credentialFromError(e){return Bw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Bw.credential(n,r)}catch(i){return null}}}Bw.GOOGLE_SIGN_IN_METHOD="google.com",Bw.PROVIDER_ID="google.com";class Vw extends Mw{constructor(){super("github.com")}static credential(e){return Aw._fromParams({providerId:Vw.PROVIDER_ID,signInMethod:Vw.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vw.credentialFromTaggedObject(e)}static credentialFromError(e){return Vw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Vw.credential(t.oauthAccessToken)}catch(n){return null}}}Vw.GITHUB_SIGN_IN_METHOD="github.com",Vw.PROVIDER_ID="github.com";class jw extends bw{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return xw(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xw(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xw(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new jw(n,i):null}static _create(e,t){return new jw(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class zw extends Lw{constructor(e){h_(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return zw.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return zw.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=jw.fromJSON(e);return h_(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return jw._create(r,n)}catch(i){return null}}}class $w extends Mw{constructor(){super("twitter.com")}static credential(e,t){return Aw._fromParams({providerId:$w.PROVIDER_ID,signInMethod:$w.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $w.credentialFromTaggedObject(e)}static credentialFromError(e){return $w.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return $w.credential(n,r)}catch(i){return null}}}async function Kw(e,t){return N_(e,"POST","/v1/accounts:signUp",E_(e,t))}$w.TWITTER_SIGN_IN_METHOD="twitter.com",$w.PROVIDER_ID="twitter.com";class Ww{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await K_._fromIdTokenResponse(e,n,r),s=qw(n);return new Ww({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=qw(n);return new Ww({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function qw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Hw extends Ve{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Hw.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Hw(e,t,n,r)}}function Gw(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Hw._fromErrorAndOperation(e,n,t,r);throw n}))}function Yw(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Qw(e,t){const n=Xe(e);await Xw(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return S_(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Yw(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Jw(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await U_(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ww._forOperation(e,"link",r)}async function Xw(e,t,n){await j_(t);const r=!1===e?"provider-already-linked":"no-such-provider";h_(Yw(t.providerData).has(n)===e,t.auth,r)}async function Zw(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await U_(e,Gw(r,i,t,e),n);h_(s.idToken,r,"internal-error");const o=F_(s.idToken);h_(o,r,"internal-error");const{sub:a}=o;return h_(e.uid===a,r,"user-mismatch"),Ww._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&a_(r,"user-mismatch"),s}}async function eb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Gw(e,r,t),s=await Ww._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function tb(e,t){return eb(dw(e),t)}async function nb(e,t){const n=Xe(e);return await Xw(!1,n,t.providerId),Jw(n,t)}async function rb(e,t){return Zw(Xe(e),t)}async function ib(e,t){const n=dw(e),r=await async function(e,t){return N_(e,"POST","/v1/accounts:signInWithCustomToken",E_(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Ww._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class sb{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ob._fromServerResponse(e,t):"totpInfo"in t?ab._fromServerResponse(e,t):a_(e,"internal-error")}}class ob extends sb{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ob(t)}}class ab extends sb{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new ab(t)}}function lb(e,t,n){var r;h_((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),h_("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(h_(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(h_(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function cb(e){const t=dw(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ub(e,t){await async function(e,t){return S_(e,"POST","/v1/accounts:update",E_(e,t))}(Xe(e),{oobCode:t})}async function db(e,t){const n=Xe(e),r=await Tw(n,{oobCode:t}),i=r.requestType;switch(h_(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":h_(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":h_(r.mfaInfo,n,"internal-error");default:h_(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=sb._fromServerResponse(dw(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function hb(e,t){const n={identifier:t,continueUri:m_()?g_():"http://localhost"},{signinMethods:r}=await async function(e,t){return S_(e,"POST","/v1/accounts:createAuthUri",E_(e,t))}(Xe(e),n);return r||[]}async function fb(e,t){const n=Xe(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&lb(n.auth,r,t);const{email:i}=await async function(e,t){return Iw(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function pb(e,t,n){const r=Xe(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&lb(r.auth,i,n);const{email:s}=await async function(e,t){return Iw(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function gb(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Xe(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await U_(i,async function(e,t){return S_(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function mb(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await U_(e,async function(e,t){return S_(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class yb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class vb extends yb{constructor(e,t,n,r){super(e,t,n),this.username=r}}class _b extends yb{constructor(e,t){super(e,"facebook.com",t)}}class wb extends vb{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class bb extends yb{constructor(e,t){super(e,"google.com",t)}}class Tb extends vb{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Eb(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=F_(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new yb(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new _b(s,i);case"github.com":return new wb(s,i);case"google.com":return new bb(s,i);case"twitter.com":return new Tb(s,i,e.screenName||null);case"custom":case"anonymous":return new yb(s,null);default:return new yb(s,r,i)}}(n)}class Sb{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Sb("enroll",e,t)}static _fromMfaPendingCredential(e){return new Sb("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Sb._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Sb._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ib{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=dw(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>sb._fromServerResponse(n,e)));h_(r.mfaPendingCredential,n,"internal-error");const s=Sb._fromMfaPendingCredential(r.mfaPendingCredential);return new Ib(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Ww._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return h_(t.user,n,"internal-error"),Ww._forOperation(t.user,t.operationType,o);default:a_(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Nb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>sb._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Nb(e)}async getSession(){return Sb._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await U_(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await U_(this.user,function(e,t){return S_(e,"POST","/v2/accounts/mfaEnrollment:withdraw",E_(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const Cb=new WeakMap;const kb="__sak";class xb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kb,"1"),this.storage.removeItem(kb),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ab extends xb{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=De();return Z_(e)||sw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ow(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ue()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ab.type="LOCAL";const Ob=Ab;class Rb extends xb{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rb.type="SESSION";const Db=Rb;class Pb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Pb(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Lb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Pb.receivers=[];class Mb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Lb("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Fb(){return window}function Ub(){return"undefined"!==typeof Fb().WorkerGlobalScope&&"function"===typeof Fb().importScripts}const Bb="firebaseLocalStorageDb",Vb="firebaseLocalStorage",jb="fbase_key";class zb{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function $b(e,t){return e.transaction([Vb],t?"readwrite":"readonly").objectStore(Vb)}function Kb(){const e=indexedDB.open(Bb,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Vb,{keyPath:jb})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Vb)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Bb);return new zb(e).toPromise()}(),t(await Kb()))}))}))}async function Wb(e,t,n){const r=$b(e,!0).put({[jb]:t,value:n});return new zb(r).toPromise()}function qb(e,t){const n=$b(e,!0).delete(t);return new zb(n).toPromise()}class Hb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Kb()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ub()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pb._getInstance(Ub()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Mb(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kb();return await Wb(e,kb,"1"),await qb(e,kb),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Wb(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=$b(e,!1).get(t),r=await new zb(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>qb(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=$b(e,!1).getAll();return new zb(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Hb.type="LOCAL";const Gb=Hb;const Yb=1e12;class Qb{constructor(e){this.auth=e,this.counter=Yb,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Jb(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Yb;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Yb;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Yb;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Jb{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;h_(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xb=pw("rcb"),Zb=new v_(3e4,6e4);class eT{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Fb().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return h_(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&O_(Fb().grecaptcha)?Promise.resolve(Fb().grecaptcha):new Promise(((n,r)=>{const i=Fb().setTimeout((()=>{r(l_(e,"network-request-failed"))}),Zb.get());Fb()[Xb]=()=>{Fb().clearTimeout(i),delete Fb()[Xb];const s=Fb().grecaptcha;if(!s||!O_(s))return void r(l_(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};fw("".concat("https://www.google.com/recaptcha/api.js?","?").concat(qe({onload:Xb,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(l_(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Fb().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tT{async load(e){return new Qb(e)}clearedOneInstance(){}}const nT="recaptcha",rT={theme:"light",type:"image"};class iT{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},rT);this.parameters=n,this.type=nT,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dw(e),this.isInvisible="invisible"===this.parameters.size,h_("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;h_(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tT:new eT,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){h_(!this.parameters.sitekey,this.auth,"argument-error"),h_(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),h_("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Fb()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){h_(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){h_(m_()&&!Ub(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await S_(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);h_(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return h_(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class sT{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Rw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function oT(e,t,n){var r;const i=await n.verify();try{let s;if(h_("string"===typeof i,e,"argument-error"),h_(n.type===nT,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){h_("enroll"===t.type,e,"internal-error");const n=await function(e,t){return S_(e,"POST","/v2/accounts/mfaEnrollment:start",E_(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{h_("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;h_(n,e,"missing-multi-factor-info");const o=await function(e,t){return S_(e,"POST","/v2/accounts/mfaSignIn:start",E_(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return S_(e,"POST","/v1/accounts:sendVerificationCode",E_(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class aT{constructor(e){this.providerId=aT.PROVIDER_ID,this.auth=dw(e)}verifyPhoneNumber(e,t){return oT(this.auth,e,Xe(t))}static credential(e,t){return Rw._fromVerification(e,t)}static credentialFromResult(e){const t=e;return aT.credentialFromTaggedObject(t)}static credentialFromError(e){return aT.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Rw._fromTokenResponse(n,r):null}}function lT(e,t){return t?q_(t):(h_(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}aT.PROVIDER_ID="phone",aT.PHONE_SIGN_IN_METHOD="phone";class cT extends bw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xw(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uT(e){return eb(e.auth,new cT(e),e.bypassAuthState)}function dT(e){const{auth:t,user:n}=e;return h_(n,t,"internal-error"),Zw(n,new cT(e),e.bypassAuthState)}async function hT(e){const{auth:t,user:n}=e;return h_(n,t,"internal-error"),Jw(n,new cT(e),e.bypassAuthState)}class fT{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uT;case"linkViaPopup":case"linkViaRedirect":return hT;case"reauthViaPopup":case"reauthViaRedirect":return dT;default:a_(this.auth,"internal-error")}}resolve(e){p_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){p_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pT=new v_(2e3,1e4);class gT extends fT{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,gT.currentPopupAction&&gT.currentPopupAction.cancel(),gT.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return h_(e,this.auth,"internal-error"),e}async onExecution(){p_(1===this.filter.length,"Popup operations only handle one event");const e=Lb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(l_(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(l_(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gT.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(l_(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,pT.get())};e()}}gT.currentPopupAction=null;const mT="pendingRedirect",yT=new Map;class vT extends fT{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=yT.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=TT(t),r=bT(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}yT.set(this.auth._key(),e)}return this.bypassAuthState||yT.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function _T(e,t){return bT(e)._set(TT(t),"true")}function wT(e,t){yT.set(e._key(),t)}function bT(e){return q_(e._redirectPersistence)}function TT(e){return Y_(mT,e.config.apiKey,e.name)}function ET(e,t,n){return async function(e,t,n){const r=dw(e);u_(e,t,Lw),await r._initializationPromise;const i=lT(r,n);return await _T(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function ST(e,t,n){return async function(e,t,n){const r=Xe(e);u_(r.auth,t,Lw),await r.auth._initializationPromise;const i=lT(r.auth,n);await _T(i,r.auth);const s=await CT(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function IT(e,t,n){return async function(e,t,n){const r=Xe(e);u_(r.auth,t,Lw),await r.auth._initializationPromise;const i=lT(r.auth,n);await Xw(!1,r,t.providerId),await _T(i,r.auth);const s=await CT(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function NT(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=dw(e),i=lT(r,t),s=new vT(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function CT(e){const t=Lb("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class kT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AT(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!AT(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(l_(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xT(e))}saveEventToCache(e){this.cachedEventUids.add(xT(e)),this.lastProcessedEventTime=Date.now()}}function xT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function AT(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function OT(e){return S_(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const RT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DT=/^https?/;function PT(e){const t=g_(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!DT.test(n))return!1;if(RT.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const LT=new v_(3e4,6e4);function MT(){const e=Fb().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let FT=null;function UT(e){return FT=FT||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){MT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{MT(),n(l_(e,"network-request-failed"))},timeout:LT.get()})}if(null===(i=null===(r=Fb().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Fb().gapi)||void 0===s?void 0:s.load)){const t=pw("iframefcb");return Fb()[t]=()=>{gapi.load?o():n(l_(e,"network-request-failed"))},fw("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw FT=null,e}))}(e),FT}const BT=new v_(5e3,15e3),VT="__/auth/iframe",jT="emulator/auth/iframe",zT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$T=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KT(e){const t=e.config;h_(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?__(t,jT):"https://".concat(e.config.authDomain,"/").concat(VT),r={apiKey:t.apiKey,appName:e.name,v:$t},i=$T.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(qe(r).slice(1))}const WT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function HT(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},WT),{width:r.toString(),height:i.toString(),top:s,left:o}),c=De().toLowerCase();n&&(a=ew(c)?"_blank":n),X_(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return sw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:De())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new qT(null);const d=window.open(t||"",a,u);h_(d,e,"popup-blocked");try{d.focus()}catch(h){}return new qT(d)}const GT="__/auth/handler",YT="emulator/auth/handler",QT=encodeURIComponent("fac");async function JT(e,t,n,r,i,s){h_(e.config.authDomain,e,"auth-domain-config-required"),h_(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:$t,eventId:i};if(t instanceof Lw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Mw){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(QT,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(GT);return __(t,YT)}(e),"?").concat(qe(a).slice(1)).concat(c)}const XT="webStorageSupport";const ZT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Db,this._completeRedirectFn=NT,this._overrideRedirectResult=wT}async _openPopup(e,t,n,r){var i;p_(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return HT(e,await JT(e,t,n,g_(),r),Lb())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Fb().location.href=e}(await JT(e,t,n,g_(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(p_(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await UT(e),n=Fb().gapi;return h_(n,e,"internal-error"),t.open({where:document.body,url:KT(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zT,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=l_(e,"network-request-failed"),s=Fb().setTimeout((()=>{r(i)}),BT.get());function o(){Fb().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new kT(e);return t.register("authEvent",(t=>{h_(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(XT,{type:XT},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[XT];void 0!==i&&t(!!i),a_(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await OT(e);for(const r of t)try{if(PT(r))return}catch(n){}a_(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ow()||Z_()||sw()}};class eE{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return f_("unexpected MultiFactorSessionType")}}}class tE extends eE{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new tE(e)}_finalizeEnroll(e,t,n){return function(e,t){return S_(e,"POST","/v2/accounts/mfaEnrollment:finalize",E_(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return S_(e,"POST","/v2/accounts/mfaSignIn:finalize",E_(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class nE{constructor(){}static assertion(e){return tE._fromCredential(e)}}nE.FACTOR_ID="phone";var rE="@firebase/auth",iE="1.5.1";class sE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){h_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Oe("authIdTokenMaxAge");var oE;function aE(){return window}oE="Browser",Ft(new Ze("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;h_(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:oE,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aw(oE)},c=new uw(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(q_);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ft(new Ze("auth-internal",(e=>(e=>new sE(e))(dw(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Gt(rE,iE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(oE)),Gt(rE,iE,"esm2017");async function lE(e,t,n){var r;const{BuildInfo:i}=aE();p_(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(p_(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return sw()?o.ibi=i.packageName:nw()?o.apn=i.packageName:a_(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,JT(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function cE(e){const{cordova:t}=aE();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const uE=20;class dE extends kT{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function hE(e){const t=await gE()._get(mE(e));return t&&await gE()._remove(mE(e)),t}function fE(e,t){var n,r;const i=function(e){const t=yE(e),n=t.link?decodeURIComponent(t.link):void 0,r=yE(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return yE(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=yE(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?l_(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function pE(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<uE;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function gE(){return q_(Ob)}function mE(e){return Y_("authEvent",e.config.apiKey,e.name)}function yE(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return He(n.join("?"))}const vE=class{constructor(){this._redirectPersistence=Db,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=NT,this._overrideRedirectResult=wT}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new dE(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){a_(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const d=aE();h_("function"===typeof(null===(t=null===d||void 0===d?void 0:d.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),h_("undefined"!==typeof(null===(n=null===d||void 0===d?void 0:d.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),h_("function"===typeof(null===(s=null===(i=null===(r=null===d||void 0===d?void 0:d.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),h_("function"===typeof(null===(l=null===(a=null===(o=null===d||void 0===d?void 0:d.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),h_("function"===typeof(null===(u=null===(c=null===d||void 0===d?void 0:d.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),yT.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:pE(),postBody:null,tenantId:e.tenantId,error:l_(e,"no-auth-event")}}(e,n,r);await function(e,t){return gE()._set(mE(e),t)}(e,s);const o=await lE(e,s,t);return async function(e,t,n){const{cordova:r}=aE();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(l_(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),nw()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await cE(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=aE(),n={};sw()?n.iosBundleId=t.packageName:nw()?n.androidPackageName=t.packageName:a_(e,"operation-not-supported-in-this-environment"),await OT(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=aE(),s=setTimeout((async()=>{await hE(e),t.onEvent(_E())}),500),o=async n=>{clearTimeout(s);const r=await hE(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=fE(r,n.url)),t.onEvent(i||_E())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");aE().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function _E(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:l_("no-auth-event")}}function wE(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function bE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return!("file:"!==wE()&&"ionic:"!==wE()&&"capacitor:"!==wE()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function TE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return Ue()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/Edge\/\d+/.test(e)}(e)}function EE(){try{const e=self.localStorage,t=Lb();if(e)return e.setItem(t,"1"),e.removeItem(t),!TE()||Be()}catch(e){return SE()&&Be()}return!1}function SE(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function IE(){return("http:"===wE()||"https:"===wE()||Me()||bE())&&!(Fe()||Le())&&EE()&&!SE()}function NE(){return bE()&&"undefined"!==typeof document}const CE={LOCAL:"local",NONE:"none",SESSION:"session"},kE=h_,xE="persistence";async function AE(e){await e._initializationPromise;const t=OE(),n=Y_(xE,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function OE(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const RE=h_;class DE{constructor(){this.browserResolver=q_(ZT),this.cordovaResolver=q_(vE),this.underlyingResolver=null,this._redirectPersistence=Db,this._completeRedirectFn=NT,this._overrideRedirectResult=wT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return NE()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return RE(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!NE()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function PE(e){return e.unwrap()}function LE(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new BE(e,function(e,t){var n;const r=Xe(e),i=t;return h_(t.customData.operationType,r,"argument-error"),h_(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ib._fromError(r,i)}(e,t))}else if(r){const e=ME(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function ME(e){const{_tokenResponse:t}=e instanceof Ve?e.customData:e;if(!t)return null;if(!(e instanceof Ve)&&"temporaryProof"in t&&"phoneNumber"in t)return aT.credentialFromResult(e);const n=t.providerId;if(!n||n===Gv.PASSWORD)return null;let r;switch(n){case Gv.GOOGLE:r=Bw;break;case Gv.FACEBOOK:r=Uw;break;case Gv.GITHUB:r=Vw;break;case Gv.TWITTER:r=$w;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?jw._create(n,o):Aw._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Fw(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Ve?r.credentialFromError(e):r.credentialFromResult(e)}function FE(e,t){return t.catch((t=>{throw t instanceof Ve&&LE(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,ME(r)),additionalUserInfo:Eb(e),user:VE.getOrCreate(n)};var r}))}async function UE(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>FE(e,n.confirm(t))}}class BE{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return FE(PE(this.auth),this.resolver.resolveSignIn(e))}}class VE{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Xe(e);return Cb.has(t)||Cb.set(t,Nb._fromUser(t)),Cb.get(t)}(e)}static getOrCreate(e){return VE.USER_MAP.has(e)||VE.USER_MAP.set(e,new VE(e)),VE.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return FE(this.auth,nb(this._delegate,e))}async linkWithPhoneNumber(e,t){return UE(this.auth,async function(e,t,n){const r=Xe(e);await Xw(!1,r,"phone");const i=await oT(r.auth,t,Xe(n));return new sT(i,(e=>nb(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return FE(this.auth,async function(e,t,n){const r=Xe(e);u_(r.auth,t,Lw);const i=lT(r.auth,n);return new gT(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,DE))}async linkWithRedirect(e){return await AE(dw(this.auth)),IT(this._delegate,e,DE)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return FE(this.auth,rb(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return UE(this.auth,async function(e,t,n){const r=Xe(e),i=await oT(r.auth,t,Xe(n));return new sT(i,(e=>rb(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return FE(this.auth,async function(e,t,n){const r=Xe(e);u_(r.auth,t,Lw);const i=lT(r.auth,n);return new gT(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,DE))}async reauthenticateWithRedirect(e){return await AE(dw(this.auth)),ST(this._delegate,e,DE)}sendEmailVerification(e){return fb(this._delegate,e)}async unlink(e){return await Qw(this._delegate,e),this}updateEmail(e){return function(e,t){return mb(Xe(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return mb(Xe(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await Jw(Xe(e),t)}(this._delegate,e)}updateProfile(e){return gb(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return pb(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}VE.USER_MAP=new WeakMap;const jE=h_;class zE{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;jE(n,"invalid-api-key",{appName:e.name}),jE(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?DE:void 0;this._delegate=t.initialize({options:{persistence:KE(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(n_),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?VE.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){vw(this._delegate,e,t)}applyActionCode(e){return ub(this._delegate,e)}checkActionCode(e){return db(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Tw(Xe(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&cb(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return FE(this._delegate,async function(e,t,n){const r=dw(e),i=yw(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Kw),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&cb(e),t})),o=await Ww._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return hb(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Dw.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){jE(IE(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await dw(e)._initializationPromise,NT(e,t,!1)}(this._delegate,DE);return e?FE(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){dw(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=$E(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=$E(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=dw(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){h_(t.handleCodeInApp,r,"argument-error"),t&&lb(r,e,t)}(i,n),await yw(r,i,"getOobCode",Cw)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=dw(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&lb(r,i,n),await yw(r,i,"getOobCode",Nw)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){kE(Object.values(CE).includes(t),e,"invalid-persistence-type"),Fe()?kE(t!==CE.SESSION,e,"unsupported-persistence-type"):Le()?kE(t===CE.NONE,e,"unsupported-persistence-type"):SE()?kE(t===CE.NONE||t===CE.LOCAL&&Be(),e,"unsupported-persistence-type"):kE(t===CE.NONE||EE(),e,"unsupported-persistence-type")}(this._delegate,e),e){case CE.SESSION:t=Db;break;case CE.LOCAL:t=await q_(Gb)._isAvailable()?Gb:Ob;break;case CE.NONE:t=G_;break;default:return a_("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return FE(this._delegate,async function(e){var t;const n=dw(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Ww({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Kw(n,{returnSecureToken:!0}),i=await Ww._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return FE(this._delegate,tb(this._delegate,e))}signInWithCustomToken(e){return FE(this._delegate,ib(this._delegate,e))}signInWithEmailAndPassword(e,t){return FE(this._delegate,function(e,t,n){return tb(Xe(e),Pw.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&cb(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return FE(this._delegate,async function(e,t,n){const r=Xe(e),i=Pw.credentialWithLink(t,n||g_());return h_(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),tb(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return UE(this._delegate,async function(e,t,n){const r=dw(e),i=await oT(r,t,Xe(n));return new sT(i,(e=>tb(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return jE(IE(),this._delegate,"operation-not-supported-in-this-environment"),FE(this._delegate,async function(e,t,n){const r=dw(e);u_(e,t,Lw);const i=lT(r,n);return new gT(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,DE))}async signInWithRedirect(e){return jE(IE(),this._delegate,"operation-not-supported-in-this-environment"),await AE(this._delegate),ET(this._delegate,e,DE)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await db(Xe(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function $E(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&VE.getOrCreate(e)),error:t,complete:n}}function KE(e,t){const n=function(e,t){const n=OE();if(!n)return[];const r=Y_(xE,e,t);switch(n.getItem(r)){case CE.NONE:return[G_];case CE.LOCAL:return[Gb,Db];case CE.SESSION:return[Db];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Gb)||n.push(Gb),"undefined"!==typeof window)for(const r of[Ob,Db])n.includes(r)||n.push(r);return n.includes(G_)||n.push(G_),n}zE.Persistence=CE;class WE{constructor(){this.providerId="phone",this._delegate=new aT(PE(pn.auth()))}static credential(e,t){return aT.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}WE.PHONE_SIGN_IN_METHOD=aT.PHONE_SIGN_IN_METHOD,WE.PROVIDER_ID=aT.PROVIDER_ID;const qE=h_;class HE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pn.app();var r;qE(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new iT(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new Ze("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new zE(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Yv,PASSWORD_RESET:Qv,RECOVER_EMAIL:Jv,REVERT_SECOND_FACTOR_ADDITION:Xv,VERIFY_AND_CHANGE_EMAIL:Zv,VERIFY_EMAIL:e_}},EmailAuthProvider:Pw,FacebookAuthProvider:Uw,GithubAuthProvider:Vw,GoogleAuthProvider:Bw,OAuthProvider:Fw,SAMLAuthProvider:zw,PhoneAuthProvider:WE,PhoneMultiFactorGenerator:nE,RecaptchaVerifier:HE,TwitterAuthProvider:$w,Auth:zE,AuthCredential:bw,Error:Ve}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.1")}(pn);function GE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YE=GE,QE=new je("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),JE=new ct("@firebase/auth");function XE(e){if(JE.logLevel<=it.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];JE.error("Auth (".concat($t,"): ").concat(e),...n)}}function ZE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw nS(e,...n)}function eS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return nS(e,...n)}function tS(e,t,n){const r=Object.assign(Object.assign({},YE()),{[t]:n});return new je("auth","Firebase",r).create(t,{appName:e.name})}function nS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return QE.create(e,...n)}function rS(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw nS(t,...r)}}function iS(e){const t="INTERNAL ASSERTION FAILED: "+e;throw XE(t),new Error(t)}function sS(e,t){e||iS(t)}function oS(){return"http:"===aS()||"https:"===aS()}function aS(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class lS{constructor(e,t){this.shortDelay=e,this.longDelay=t,sS(t>e,"Short delay should be less than long delay!"),this.isMobile=Pe()||Fe()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(oS()||Me()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function cS(e,t){sS(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class uS{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void iS("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void iS("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void iS("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},hS=new lS(3e4,6e4);function fS(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function pS(e,t,n,r){return gS(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=qe(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),uS.fetch()(yS(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function gS(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},dS),t);try{const t=new _S(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw wS(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw wS(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw wS(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw wS(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw tS(e,a,o);ZE(e,a)}}catch(i){if(i instanceof Ve)throw i;ZE(e,"network-request-failed",{message:String(i)})}}async function mS(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await pS(e,t,n,r,i);return"mfaPendingCredential"in s&&ZE(e,"multi-factor-auth-required",{_serverResponse:s}),s}function yS(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?cS(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function vS(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _S{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(eS(this.auth,"network-request-failed"))),hS.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function wS(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=eS(e,t,r);return i.customData._tokenResponse=n,i}function bS(e){return void 0!==e&&void 0!==e.enterprise}class TS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vS(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ES(e,t){return pS(e,"GET","/v2/recaptchaConfig",fS(e,t))}function SS(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function IS(e){return 1e3*Number(e)}function NS(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return XE("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ne(n);return e?JSON.parse(e):(XE("Failed to decode base64 JWT payload"),null)}catch(i){return XE("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function CS(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Ve&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class kS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class xS{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=SS(this.lastLoginAt),this.creationTime=SS(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function AS(e){var t;const n=e.auth,r=await e.getIdToken(),i=await CS(e,async function(e,t){return pS(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));rS(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Hv(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xS(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class OS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rS(e.idToken,"internal-error"),rS("undefined"!==typeof e.idToken,"internal-error"),rS("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=NS(e);return rS(t,"internal-error"),rS("undefined"!==typeof t.exp,"internal-error"),rS("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return rS(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await gS(e,{},(async()=>{const n=qe({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=yS(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",uS.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new OS;return n&&(rS("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(rS("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(rS("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new OS,this.toJSON())}_performRefresh(){return iS("not implemented")}}function RS(e,t){rS("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class DS{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Hv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await CS(this,this.stsTokenManager.getToken(this.auth,e));return rS(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Xe(e),r=await n.getIdToken(t),i=NS(r);rS(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:SS(IS(i.auth_time)),issuedAtTime:SS(IS(i.iat)),expirationTime:SS(IS(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Xe(e);await AS(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(rS(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new DS(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){rS(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await AS(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await CS(this,async function(e,t){return pS(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:T}=t;rS(v&&T,e,"internal-error");const E=OS.fromJSON(this.name,T);rS("string"===typeof v,e,"internal-error"),RS(u,e.name),RS(d,e.name),rS("boolean"===typeof _,e,"internal-error"),rS("boolean"===typeof w,e,"internal-error"),RS(h,e.name),RS(f,e.name),RS(p,e.name),RS(g,e.name),RS(m,e.name),RS(y,e.name);const S=new DS({uid:v,auth:e,email:d,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return b&&Array.isArray(b)&&(S.providerData=b.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new OS;r.updateFromServerResponse(t);const i=new DS({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await AS(i),i}}const PS=new Map;function LS(e){sS(e instanceof Function,"Expected a class definition");let t=PS.get(e);return t?(sS(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,PS.set(e,t),t)}class MS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}MS.type="NONE";const FS=MS;function US(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class BS{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=US(this.userKey,r.apiKey,i),this.fullPersistenceKey=US("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?DS._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new BS(LS(FS),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||LS(FS);const s=US(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=DS._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new BS(i,e,n)):new BS(i,e,n)}}function VS(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(KS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(jS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qS(t))return"Blackberry";if(HS(t))return"Webos";if(zS(t))return"Safari";if((t.includes("chrome/")||$S(t))&&!t.includes("edge/"))return"Chrome";if(WS(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function jS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/firefox\//i.test(e)}function zS(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:De()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/crios\//i.test(e)}function KS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/iemobile/i.test(e)}function WS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/android/i.test(e)}function qS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/blackberry/i.test(e)}function HS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/webos/i.test(e)}function GS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function YS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De();return GS(e)||WS(e)||HS(e)||qS(e)||/windows phone/i.test(e)||KS(e)}function QS(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=VS(De());break;case"Worker":t="".concat(VS(De()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat($t,"/").concat(r)}class JS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class XS{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ZS{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tI(this),this.idTokenSubscription=new tI(this),this.beforeStateQueue=new JS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=LS(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await BS.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return rS(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await AS(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Xe(e):null;return t&&rS(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&rS(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(LS(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return pS(e,"GET","/v2/passwordPolicy",fS(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new XS(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new je("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return pS(e,"POST","/v2/accounts:revokeToken",fS(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&LS(e)||this._popupRedirectResolver;rS(t,this,"argument-error"),this.redirectPersistenceManager=await BS.create(this,[LS(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(rS(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rS(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(JE.logLevel<=it.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];JE.warn("Auth (".concat($t,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function eI(e){return Xe(e)}class tI{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ye((e=>this.observer=e))}get next(){return rS(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function nI(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=eS("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function rI(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class iI{constructor(e){this.type="recaptcha-enterprise",this.auth=eI(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;bS(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ES(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new TS(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&bS(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));nI("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function sI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new iI(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function oI(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await sI(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await sI(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}class aI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return iS("not implemented")}_getIdTokenResponse(e){return iS("not implemented")}_linkToIdToken(e,t){return iS("not implemented")}_getReauthenticationResolver(e){return iS("not implemented")}}async function lI(e,t){return pS(e,"POST","/v1/accounts:signUp",t)}async function cI(e,t){return mS(e,"POST","/v1/accounts:signInWithPassword",fS(e,t))}class uI extends aI{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new uI(e,t,"password")}static _fromEmailAndCode(e,t){return new uI(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return oI(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",cI);case"emailLink":return async function(e,t){return mS(e,"POST","/v1/accounts:signInWithEmailLink",fS(e,t))}(e,{email:this._email,oobCode:this._password});default:ZE(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return oI(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lI);case"emailLink":return async function(e,t){return mS(e,"POST","/v1/accounts:signInWithEmailLink",fS(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ZE(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function dI(e,t){return mS(e,"POST","/v1/accounts:signInWithIdp",fS(e,t))}class hI extends aI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hI(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ZE("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Hv(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new hI(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return dI(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,dI(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,dI(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qe(t)}return e}}const fI={USER_NOT_FOUND:"user-not-found"};class pI extends aI{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new pI({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new pI({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return mS(e,"POST","/v1/accounts:signInWithPhoneNumber",fS(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await mS(e,"POST","/v1/accounts:signInWithPhoneNumber",fS(e,t));if(n.temporaryProof)throw wS(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return mS(e,"POST","/v1/accounts:signInWithPhoneNumber",fS(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),fI)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new pI({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class gI{constructor(e){var t,n,r,i,s,o;const a=He(Ge(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);rS(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=He(Ge(e)).link,n=t?He(Ge(t)).deep_link_id:null,r=He(Ge(e)).deep_link_id;return(r?He(Ge(r)).link:null)||r||n||t||e}(e);try{return new gI(t)}catch(n){return null}}}class mI{constructor(){this.providerId=mI.PROVIDER_ID}static credential(e,t){return uI._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=gI.parseLink(t);return rS(n,"argument-error"),uI._fromEmailAndCode(e,n.code,n.tenantId)}}mI.PROVIDER_ID="password",mI.EMAIL_PASSWORD_SIGN_IN_METHOD="password",mI.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vI extends yI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _I extends vI{constructor(){super("facebook.com")}static credential(e){return hI._fromParams({providerId:_I.PROVIDER_ID,signInMethod:_I.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _I.credentialFromTaggedObject(e)}static credentialFromError(e){return _I.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return _I.credential(t.oauthAccessToken)}catch(n){return null}}}_I.FACEBOOK_SIGN_IN_METHOD="facebook.com",_I.PROVIDER_ID="facebook.com";class wI extends vI{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hI._fromParams({providerId:wI.PROVIDER_ID,signInMethod:wI.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wI.credentialFromTaggedObject(e)}static credentialFromError(e){return wI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return wI.credential(n,r)}catch(i){return null}}}wI.GOOGLE_SIGN_IN_METHOD="google.com",wI.PROVIDER_ID="google.com";class bI extends vI{constructor(){super("github.com")}static credential(e){return hI._fromParams({providerId:bI.PROVIDER_ID,signInMethod:bI.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bI.credentialFromTaggedObject(e)}static credentialFromError(e){return bI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return bI.credential(t.oauthAccessToken)}catch(n){return null}}}bI.GITHUB_SIGN_IN_METHOD="github.com",bI.PROVIDER_ID="github.com";class TI extends vI{constructor(){super("twitter.com")}static credential(e,t){return hI._fromParams({providerId:TI.PROVIDER_ID,signInMethod:TI.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return TI.credentialFromTaggedObject(e)}static credentialFromError(e){return TI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return TI.credential(n,r)}catch(i){return null}}}TI.TWITTER_SIGN_IN_METHOD="twitter.com",TI.PROVIDER_ID="twitter.com";class EI{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await DS._fromIdTokenResponse(e,n,r),s=SI(n);return new EI({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=SI(n);return new EI({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function SI(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class II extends Ve{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,II.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new II(e,t,n,r)}}function NI(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw II._fromErrorAndOperation(e,n,t,r);throw n}))}async function CI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await CS(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return EI._forOperation(e,"link",r)}async function kI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await CS(e,NI(r,i,t,e),n);rS(s.idToken,r,"internal-error");const o=NS(s.idToken);rS(o,r,"internal-error");const{sub:a}=o;return rS(e.uid===a,r,"user-mismatch"),EI._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&ZE(r,"user-mismatch"),s}}async function xI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await NI(e,r,t),s=await EI._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const AI="__sak";class OI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(AI,"1"),this.storage.removeItem(AI),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class RI extends OI{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=De();return zS(e)||GS(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=YS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ue()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RI.type="LOCAL";class DI extends OI{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}DI.type="SESSION";class PI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new PI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function LI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}PI.receivers=[];class MI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=LI("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function FI(){return window}function UI(){return"undefined"!==typeof FI().WorkerGlobalScope&&"function"===typeof FI().importScripts}const BI="firebaseLocalStorageDb",VI="firebaseLocalStorage",jI="fbase_key";class zI{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function $I(e,t){return e.transaction([VI],t?"readwrite":"readonly").objectStore(VI)}function KI(){const e=indexedDB.open(BI,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(VI,{keyPath:jI})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(VI)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(BI);return new zI(e).toPromise()}(),t(await KI()))}))}))}async function WI(e,t,n){const r=$I(e,!0).put({[jI]:t,value:n});return new zI(r).toPromise()}function qI(e,t){const n=$I(e,!0).delete(t);return new zI(n).toPromise()}class HI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await KI()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=PI._getInstance(UI()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new MI(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await KI();return await WI(e,AI,"1"),await qI(e,AI),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>WI(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=$I(e,!1).get(t),r=await new zI(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>qI(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=$I(e,!1).getAll();return new zI(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}HI.type="LOCAL";rI("rcb"),new lS(3e4,6e4);const GI="recaptcha";async function YI(e,t,n){var r;const i=await n.verify();try{let s;if(rS("string"===typeof i,e,"argument-error"),rS(n.type===GI,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){rS("enroll"===t.type,e,"internal-error");const n=await function(e,t){return pS(e,"POST","/v2/accounts/mfaEnrollment:start",fS(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{rS("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;rS(n,e,"missing-multi-factor-info");const o=await function(e,t){return pS(e,"POST","/v2/accounts/mfaSignIn:start",fS(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return pS(e,"POST","/v1/accounts:sendVerificationCode",fS(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class QI{constructor(e){this.providerId=QI.PROVIDER_ID,this.auth=eI(e)}verifyPhoneNumber(e,t){return YI(this.auth,e,Xe(t))}static credential(e,t){return pI._fromVerification(e,t)}static credentialFromResult(e){const t=e;return QI.credentialFromTaggedObject(t)}static credentialFromError(e){return QI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?pI._fromTokenResponse(n,r):null}}QI.PROVIDER_ID="phone",QI.PHONE_SIGN_IN_METHOD="phone";class JI extends aI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dI(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XI(e){return xI(e.auth,new JI(e),e.bypassAuthState)}function ZI(e){const{auth:t,user:n}=e;return rS(n,t,"internal-error"),kI(n,new JI(e),e.bypassAuthState)}async function eN(e){const{auth:t,user:n}=e;return rS(n,t,"internal-error"),CI(n,new JI(e),e.bypassAuthState)}class tN{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XI;case"linkViaPopup":case"linkViaRedirect":return eN;case"reauthViaPopup":case"reauthViaRedirect":return ZI;default:ZE(this.auth,"internal-error")}}resolve(e){sS(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sS(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nN=new lS(2e3,1e4);class rN extends tN{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,rN.currentPopupAction&&rN.currentPopupAction.cancel(),rN.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return rS(e,this.auth,"internal-error"),e}async onExecution(){sS(1===this.filter.length,"Popup operations only handle one event");const e=LI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(eS(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(eS(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rN.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(eS(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,nN.get())};e()}}rN.currentPopupAction=null;new Map;new lS(3e4,6e4);new lS(5e3,15e3),new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);encodeURIComponent("fac");var iN="@firebase/auth",sN="1.5.1";class oN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){rS(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Oe("authIdTokenMaxAge");function aN(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}function lN(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}!function(e){Ft(new Ze("auth",((t,n)=>{let{options:r}=n;const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;rS(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QS(e)},u=new ZS(i,s,o,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(LS);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,r),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ft(new Ze("auth-internal",(e=>(e=>new oN(e))(eI(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Gt(iN,sN,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(e)),Gt(iN,sN,"esm2017")}("Browser");var cN=function(){return cN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},cN.apply(this,arguments)},uN=function(e){return{loading:void 0===e||null===e,value:e}},dN=function(e){var t=e?e():void 0,n=(0,r.useReducer)((function(e,t){switch(t.type){case"error":return cN(cN({},e),{error:t.error,loading:!1,value:void 0});case"reset":return uN(t.defaultValue);case"value":return cN(cN({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),uN(t)),i=n[0],s=n[1],o=(0,r.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,r.useCallback)((function(e){s({type:"error",error:e})}),[]),l=(0,r.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,r.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:a,setValue:l,value:i.value}}),[i.error,i.loading,o,a,l,i.value])},hN=function(e,t){var n=dN((function(){return e.currentUser})),i=n.error,s=n.loading,o=n.setError,a=n.setValue,l=n.value;return(0,r.useEffect)((function(){var n=function(e,t,n,r){return Xe(e).onAuthStateChanged(t,n,r)}(e,(function(e){return aN(void 0,void 0,void 0,(function(){var n;return lN(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o(n),[3,4];case 4:return a(e),[2]}}))}))}),o);return function(){n()}}),[e]),[l,s,i]},fN=n(184);pn.initializeApp({apiKey:"AIzaSyCjlP_icdXnh6DbIemKIp4M7xWMkvatgKA",authDomain:"omilia-f0b42.firebaseapp.com",projectId:"omilia-f0b42",storageBucket:"omilia-f0b42.appspot.com",messagingSenderId:"11465010307",appId:"1:11465010307:web:78a4221e498bfea2af7fb6",measurementId:"G-8FWM5P1VDC"});const pN=pn.auth();let gN="Opulent Publish";function mN(){const[e]=hN(pN),t=e?e.photoURL:"Profile Picture Null";return(0,fN.jsx)("header",{className:"App_header",style:{backgroundColor:"#FFFFFF"},children:(0,fN.jsxs)("ul",{children:[(0,fN.jsx)("li",{children:(0,fN.jsx)("a",{href:"/home",style:{fontWeight:"bold",color:"#223037"},children:gN})}),(0,fN.jsx)("li",{children:(0,fN.jsx)("input",{className:"form-control form-control-sm",type:"text",placeholder:"Search","aria-label":".form-control-sm example"})}),(0,fN.jsx)("li",{children:(0,fN.jsx)("a",{href:"/editor",children:"Write"})}),(0,fN.jsx)("li",{children:(0,fN.jsx)("a",{href:"/journal",children:"Documents"})}),(0,fN.jsx)("li",{children:(0,fN.jsx)("img",{src:t,alt:"ProfilePicture",className:"profile_picture"})}),(0,fN.jsx)("li",{children:(0,fN.jsx)(yN,{})})]})})}function yN(){return(0,fN.jsx)("button",{onClick:()=>pN.signOut(),type:"button",className:"btn btn-light btn-sm",style:{backgroundColor:"#0064e0",color:"white"},children:"Sign-Out"})}function vN(e){return(0,fN.jsx)(fN.Fragment,{children:(0,fN.jsx)("h1",{className:"",style:{padding:"5%",paddingTop:"10%",textAlign:"left"},children:"Welcome back, Abdul."})})}function _N(e){let{user:t}=e;return document.body.style="background: #F1F4F7",(0,fN.jsxs)(fN.Fragment,{children:[(0,fN.jsx)(mN,{}),(0,fN.jsx)(vN,{}),(0,fN.jsx)("div",{style:{backgroundColor:"#F1F4F7"},children:(0,fN.jsx)("a",{className:"btn btn-success mt-4",href:"/editor",children:"Start Writing"})})]})}const wN={ltr:"ltr",rtl:"rtl",placeholder:"editor-placeholder",paragraph:"editor-paragraph",quote:"editor-quote",heading:{h1:"editor-heading-h1",h2:"editor-heading-h2",h3:"editor-heading-h3",h4:"editor-heading-h4",h5:"editor-heading-h5"},list:{nested:{listitem:"editor-nested-listitem"},ol:"editor-list-ol",ul:"editor-list-ul",listitem:"editor-listitem"},image:"editor-image",link:"editor-link",text:{bold:"editor-text-bold",italic:"editor-text-italic",overflowed:"editor-text-overflowed",hashtag:"editor-text-hashtag",underline:"editor-text-underline",strikethrough:"editor-text-strikethrough",underlineStrikethrough:"editor-text-underlineStrikethrough",code:"editor-text-code"},code:"editor-code",codeHighlight:{atrule:"editor-tokenAttr",attr:"editor-tokenAttr",boolean:"editor-tokenProperty",builtin:"editor-tokenSelector",cdata:"editor-tokenComment",char:"editor-tokenSelector",class:"editor-tokenFunction","class-name":"editor-tokenFunction",comment:"editor-tokenComment",constant:"editor-tokenProperty",deleted:"editor-tokenProperty",doctype:"editor-tokenComment",entity:"editor-tokenOperator",function:"editor-tokenFunction",important:"editor-tokenVariable",inserted:"editor-tokenSelector",keyword:"editor-tokenAttr",namespace:"editor-tokenVariable",number:"editor-tokenProperty",operator:"editor-tokenOperator",prolog:"editor-tokenComment",property:"editor-tokenProperty",punctuation:"editor-tokenPunctuation",regex:"editor-tokenVariable",selector:"editor-tokenSelector",string:"editor-tokenSelector",symbol:"editor-tokenProperty",tag:"editor-tokenProperty",url:"editor-tokenOperator",variable:"editor-tokenVariable"}};var bN=n(5224),TN=n(5528),EN=n(4588),SN=n(3527),IN=n(7022),NN=n(1665);n(4195);var CN=n(5523),kN=n(1577),xN=n(9689),AN=n(4140),ON=n(6868),RN=n(9473),DN=n(9070);const PN=1,LN=new Set(["paragraph","quote","code","h1","h2","ul","ol"]),MN={code:"Code Block",h1:"Large Heading",h2:"Small Heading",h3:"Heading",h4:"Heading",h5:"Heading",ol:"Numbered List",paragraph:"Normal",quote:"Quote",ul:"Bulleted List"};function FN(){return(0,fN.jsx)("div",{className:"divider"})}function UN(e,t){null===t?(e.style.opacity="0",e.style.top="-1000px",e.style.left="-1000px"):(e.style.opacity="1",e.style.top="".concat(t.top+t.height+window.pageYOffset+10,"px"),e.style.left="".concat(t.left+window.pageXOffset-e.offsetWidth/2+t.width/2,"px"))}function BN(e){let{editor:t}=e;const n=(0,r.useRef)(null),i=(0,r.useRef)(null),s=(0,r.useRef)(!1),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),h=(0,r.useCallback)((()=>{const e=(0,CN.$getSelection)();if((0,CN.$isRangeSelection)(e)){const t=jN(e),n=t.getParent();(0,kN.$isLinkNode)(n)?a(n.getURL()):(0,kN.$isLinkNode)(t)?a(t.getURL()):a("")}const r=n.current,i=window.getSelection(),o=document.activeElement;if(null===r)return;const l=t.getRootElement();if(null!==e&&!i.isCollapsed&&null!==l&&l.contains(i.anchorNode)){const t=i.getRangeAt(0);let n;if(i.anchorNode===l){let e=l;for(;null!=e.firstElementChild;)e=e.firstElementChild;n=e.getBoundingClientRect()}else n=t.getBoundingClientRect();s.current||UN(r,n),d(e)}else o&&"link-input"===o.className||(UN(r,null),d(null),c(!1),a(""));return!0}),[t]);return(0,r.useEffect)((()=>(0,AN.mergeRegister)(t.registerUpdateListener((e=>{let{editorState:t}=e;t.read((()=>{h()}))})),t.registerCommand(CN.SELECTION_CHANGE_COMMAND,(()=>(h(),!0)),PN))),[t,h]),(0,r.useEffect)((()=>{t.getEditorState().read((()=>{h()}))}),[t,h]),(0,r.useEffect)((()=>{l&&i.current&&i.current.focus()}),[l]),(0,fN.jsx)("div",{ref:n,className:"link-editor",children:l?(0,fN.jsx)("input",{ref:i,className:"link-input",value:o,onChange:e=>{a(e.target.value)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),null!==u&&(""!==o&&t.dispatchCommand(kN.TOGGLE_LINK_COMMAND,o),c(!1))):"Escape"===e.key&&(e.preventDefault(),c(!1))}}):(0,fN.jsx)(fN.Fragment,{children:(0,fN.jsxs)("div",{className:"link-input",children:[(0,fN.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:o}),(0,fN.jsx)("div",{className:"link-edit",role:"button",tabIndex:0,onMouseDown:e=>e.preventDefault(),onClick:()=>{c(!0)}})]})})})}function VN(e){let{onChange:t,className:n,options:r,value:i}=e;return(0,fN.jsxs)("select",{className:n,onChange:t,value:i,children:[(0,fN.jsx)("option",{hidden:!0,value:""}),r.map((e=>(0,fN.jsx)("option",{value:e,children:e},e)))]})}function jN(e){const t=e.anchor,n=e.focus,r=e.anchor.getNode(),i=e.focus.getNode();if(r===i)return r;return e.isBackward()?(0,xN.$isAtNodeEnd)(n)?r:i:(0,xN.$isAtNodeEnd)(t)?i:r}function zN(e){let{editor:t,blockType:n,toolbarRef:i,setShowBlockOptionsDropDown:s}=e;const o=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=i.current,t=o.current;if(null!==e&&null!==t){const{top:n,left:r}=e.getBoundingClientRect();t.style.top="".concat(n+40,"px"),t.style.left="".concat(r,"px")}}),[o,i]),(0,r.useEffect)((()=>{const e=o.current,t=i.current;if(null!==e&&null!==t){const n=n=>{const r=n.target;e.contains(r)||t.contains(r)||s(!1)};return document.addEventListener("click",n),()=>{document.removeEventListener("click",n)}}}),[o,s,i]);return(0,fN.jsxs)("div",{className:"dropdown",ref:o,children:[(0,fN.jsxs)("button",{className:"item",onClick:()=>{"paragraph"!==n&&t.update((()=>{const e=(0,CN.$getSelection)();(0,CN.$isRangeSelection)(e)&&(0,xN.$wrapLeafNodesInElements)(e,(()=>(0,CN.$createParagraphNode)()))})),s(!1)},children:[(0,fN.jsx)("span",{className:"icon paragraph"}),(0,fN.jsx)("span",{className:"text",children:"Normal"}),"paragraph"===n&&(0,fN.jsx)("span",{className:"active"})]}),(0,fN.jsxs)("button",{className:"item",onClick:()=>{"h1"!==n&&t.update((()=>{const e=(0,CN.$getSelection)();(0,CN.$isRangeSelection)(e)&&(0,xN.$wrapLeafNodesInElements)(e,(()=>(0,RN.$createHeadingNode)("h1")))})),s(!1)},children:[(0,fN.jsx)("span",{className:"icon large-heading"}),(0,fN.jsx)("span",{className:"text",children:"Large Heading"}),"h1"===n&&(0,fN.jsx)("span",{className:"active"})]}),(0,fN.jsxs)("button",{className:"item",onClick:()=>{"h2"!==n&&t.update((()=>{const e=(0,CN.$getSelection)();(0,CN.$isRangeSelection)(e)&&(0,xN.$wrapLeafNodesInElements)(e,(()=>(0,RN.$createHeadingNode)("h2")))})),s(!1)},children:[(0,fN.jsx)("span",{className:"icon small-heading"}),(0,fN.jsx)("span",{className:"text",children:"Small Heading"}),"h2"===n&&(0,fN.jsx)("span",{className:"active"})]}),(0,fN.jsxs)("button",{className:"item",onClick:()=>{"ul"!==n?t.dispatchCommand(ON.INSERT_UNORDERED_LIST_COMMAND):t.dispatchCommand(ON.REMOVE_LIST_COMMAND),s(!1)},children:[(0,fN.jsx)("span",{className:"icon bullet-list"}),(0,fN.jsx)("span",{className:"text",children:"Bullet List"}),"ul"===n&&(0,fN.jsx)("span",{className:"active"})]}),(0,fN.jsxs)("button",{className:"item",onClick:()=>{"ol"!==n?t.dispatchCommand(ON.INSERT_ORDERED_LIST_COMMAND):t.dispatchCommand(ON.REMOVE_LIST_COMMAND),s(!1)},children:[(0,fN.jsx)("span",{className:"icon numbered-list"}),(0,fN.jsx)("span",{className:"text",children:"Numbered List"}),"ol"===n&&(0,fN.jsx)("span",{className:"active"})]}),(0,fN.jsxs)("button",{className:"item",onClick:()=>{"quote"!==n&&t.update((()=>{const e=(0,CN.$getSelection)();(0,CN.$isRangeSelection)(e)&&(0,xN.$wrapLeafNodesInElements)(e,(()=>(0,RN.$createQuoteNode)()))})),s(!1)},children:[(0,fN.jsx)("span",{className:"icon quote"}),(0,fN.jsx)("span",{className:"text",children:"Quote"}),"quote"===n&&(0,fN.jsx)("span",{className:"active"})]}),(0,fN.jsxs)("button",{className:"item",onClick:()=>{"code"!==n&&t.update((()=>{const e=(0,CN.$getSelection)();(0,CN.$isRangeSelection)(e)&&(0,xN.$wrapLeafNodesInElements)(e,(()=>(0,DN.$createCodeNode)()))})),s(!1)},children:[(0,fN.jsx)("span",{className:"icon code"}),(0,fN.jsx)("span",{className:"text",children:"Code Block"}),"code"===n&&(0,fN.jsx)("span",{className:"active"})]})]})}function $N(){const[e]=(0,NN.useLexicalComposerContext)(),t=(0,r.useRef)(null),[n,i]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)("paragraph"),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[m,y]=(0,r.useState)(!1),[v,_]=(0,r.useState)(!1),[w,b]=(0,r.useState)(!1),[T,E]=(0,r.useState)(!1),[S,I]=(0,r.useState)(!1),[N,C]=(0,r.useState)(!1),[k,x]=(0,r.useState)(!1),A=(0,r.useCallback)((()=>{const t=(0,CN.$getSelection)();if((0,CN.$isRangeSelection)(t)){const n=t.anchor.getNode(),r="root"===n.getKey()?n:n.getTopLevelElementOrThrow(),i=r.getKey();if(null!==e.getElementByKey(i))if(d(i),(0,ON.$isListNode)(r)){const e=(0,AN.$getNearestNodeOfType)(n,ON.ListNode),t=e?e.getTag():r.getTag();c(t)}else{const e=(0,RN.$isHeadingNode)(r)?r.getTag():r.getType();c(e),(0,DN.$isCodeNode)(r)&&g(r.getLanguage()||(0,DN.getDefaultCodeLanguage)())}b(t.hasFormat("bold")),E(t.hasFormat("italic")),I(t.hasFormat("underline")),C(t.hasFormat("strikethrough")),x(t.hasFormat("code")),y((0,xN.$isParentElementRTL)(t));const s=jN(t),o=s.getParent();(0,kN.$isLinkNode)(o)||(0,kN.$isLinkNode)(s)?_(!0):_(!1)}}),[e]);(0,r.useEffect)((()=>(0,AN.mergeRegister)(e.registerUpdateListener((e=>{let{editorState:t}=e;t.read((()=>{A()}))})),e.registerCommand(CN.SELECTION_CHANGE_COMMAND,((e,t)=>(A(),!1)),PN),e.registerCommand(CN.CAN_UNDO_COMMAND,(e=>(i(e),!1)),PN),e.registerCommand(CN.CAN_REDO_COMMAND,(e=>(a(e),!1)),PN))),[e,A]);const O=(0,r.useMemo)((()=>(0,DN.getCodeLanguages)()),[]),R=(0,r.useCallback)((t=>{e.update((()=>{if(null!==u){const e=(0,CN.$getNodeByKey)(u);(0,DN.$isCodeNode)(e)&&e.setLanguage(t.target.value)}}))}),[e,u]),D=(0,r.useCallback)((()=>{v?e.dispatchCommand(kN.TOGGLE_LINK_COMMAND,null):e.dispatchCommand(kN.TOGGLE_LINK_COMMAND,"https://")}),[e,v]);return(0,fN.jsxs)("div",{className:"toolbar",ref:t,children:[(0,fN.jsx)("button",{disabled:!n,onClick:()=>{e.dispatchCommand(CN.UNDO_COMMAND)},className:"toolbar-item spaced","aria-label":"Undo",children:(0,fN.jsx)("i",{className:"format undo"})}),(0,fN.jsx)("button",{disabled:!s,onClick:()=>{e.dispatchCommand(CN.REDO_COMMAND)},className:"toolbar-item","aria-label":"Redo",children:(0,fN.jsx)("i",{className:"format redo"})}),(0,fN.jsx)(FN,{}),LN.has(l)&&(0,fN.jsxs)(fN.Fragment,{children:[(0,fN.jsxs)("button",{className:"toolbar-item block-controls",onClick:()=>f(!h),"aria-label":"Formatting Options",children:[(0,fN.jsx)("span",{className:"icon block-type "+l}),(0,fN.jsx)("span",{className:"text",children:MN[l]}),(0,fN.jsx)("i",{className:"chevron-down"})]}),h&&(0,o.createPortal)((0,fN.jsx)(zN,{editor:e,blockType:l,toolbarRef:t,setShowBlockOptionsDropDown:f}),document.body),(0,fN.jsx)(FN,{})]}),"code"===l?(0,fN.jsxs)(fN.Fragment,{children:[(0,fN.jsx)(VN,{className:"toolbar-item code-language",onChange:R,options:O,value:p}),(0,fN.jsx)("i",{className:"chevron-down inside"})]}):(0,fN.jsxs)(fN.Fragment,{children:[(0,fN.jsx)("button",{onClick:()=>{e.dispatchCommand(CN.FORMAT_TEXT_COMMAND,"bold")},className:"toolbar-item spaced "+(w?"active":""),"aria-label":"Format Bold",children:(0,fN.jsx)("i",{className:"format bold"})}),(0,fN.jsx)("button",{onClick:()=>{e.dispatchCommand(CN.FORMAT_TEXT_COMMAND,"italic")},className:"toolbar-item spaced "+(T?"active":""),"aria-label":"Format Italics",children:(0,fN.jsx)("i",{className:"format italic"})}),(0,fN.jsx)("button",{onClick:()=>{e.dispatchCommand(CN.FORMAT_TEXT_COMMAND,"underline")},className:"toolbar-item spaced "+(S?"active":""),"aria-label":"Format Underline",children:(0,fN.jsx)("i",{className:"format underline"})}),(0,fN.jsx)("button",{onClick:()=>{e.dispatchCommand(CN.FORMAT_TEXT_COMMAND,"strikethrough")},className:"toolbar-item spaced "+(N?"active":""),"aria-label":"Format Strikethrough",children:(0,fN.jsx)("i",{className:"format strikethrough"})}),(0,fN.jsx)("button",{onClick:()=>{e.dispatchCommand(CN.FORMAT_TEXT_COMMAND,"code")},className:"toolbar-item spaced "+(k?"active":""),"aria-label":"Insert Code",children:(0,fN.jsx)("i",{className:"format code"})}),(0,fN.jsx)("button",{onClick:D,className:"toolbar-item spaced "+(v?"active":""),"aria-label":"Insert Link",children:(0,fN.jsx)("i",{className:"format link"})}),v&&(0,o.createPortal)((0,fN.jsx)(BN,{editor:e}),document.body),(0,fN.jsx)(FN,{}),(0,fN.jsx)("button",{onClick:()=>{e.dispatchCommand(CN.FORMAT_ELEMENT_COMMAND,"left")},className:"toolbar-item spaced","aria-label":"Left Align",children:(0,fN.jsx)("i",{className:"format left-align"})}),(0,fN.jsx)("button",{onClick:()=>{e.dispatchCommand(CN.FORMAT_ELEMENT_COMMAND,"center")},className:"toolbar-item spaced","aria-label":"Center Align",children:(0,fN.jsx)("i",{className:"format center-align"})}),(0,fN.jsx)("button",{onClick:()=>{e.dispatchCommand(CN.FORMAT_ELEMENT_COMMAND,"right")},className:"toolbar-item spaced","aria-label":"Right Align",children:(0,fN.jsx)("i",{className:"format right-align"})}),(0,fN.jsx)("button",{onClick:()=>{e.dispatchCommand(CN.FORMAT_ELEMENT_COMMAND,"justify")},className:"toolbar-item","aria-label":"Justify Align",children:(0,fN.jsx)("i",{className:"format justify-align"})})," "]})]})}var KN=n(4937),WN=n(3732),qN=n(6010),HN=n(8309),GN=n(5862);function YN(e){const t=(0,CN.$getSelection)();if(!(0,CN.$isRangeSelection)(t))return!1;const n=function(e){const t=e.getNodes();return 0===t.length?new Set([e.anchor.getNode().getParentOrThrow(),e.focus.getNode().getParentOrThrow()]):new Set(t.map((e=>(0,CN.$isElementNode)(e)?e:e.getParentOrThrow())))}(t);let r=0;for(const i of n)if((0,ON.$isListNode)(i))r=Math.max((0,ON.$getListDepth)(i)+1,r);else if((0,ON.$isListItemNode)(i)){const e=i.getParent();if(!(0,ON.$isListNode)(e))throw new Error("ListMaxIndentLevelPlugin: A ListItemNode must have a ListNode for a parent.");r=Math.max((0,ON.$getListDepth)(e)+1,r)}return r<=e}function QN(e){let{maxDepth:t}=e;const[n]=(0,NN.useLexicalComposerContext)();return(0,r.useEffect)((()=>n.registerCommand(CN.INDENT_CONTENT_COMMAND,(()=>!YN(null!==t&&void 0!==t?t:7)),CN.COMMAND_PRIORITY_HIGH)),[n,t]),null}function JN(){const[e]=(0,NN.useLexicalComposerContext)();return(0,r.useEffect)((()=>(0,DN.registerCodeHighlighting)(e)),[e]),null}var XN=n(5544);const ZN=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,eC=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,tC=[e=>{const t=ZN.exec(e);return t&&{index:t.index,length:t[0].length,text:t[0],url:t[0]}},e=>{const t=eC.exec(e);return t&&{index:t.index,length:t[0].length,text:t[0],url:"mailto:".concat(t[0])}}];function nC(){return(0,fN.jsx)(XN.AutoLinkPlugin,{matchers:tC})}function rC(){return(0,fN.jsx)("div",{className:"editor-placeholder",children:"Note your memories..."})}const iC={theme:wN,onError(e){throw e},nodes:[RN.HeadingNode,ON.ListNode,ON.ListItemNode,RN.QuoteNode,DN.CodeNode,DN.CodeHighlightNode,KN.TableNode,KN.TableCellNode,KN.TableRowNode,kN.AutoLinkNode,kN.LinkNode]};function sC(){return(0,fN.jsx)(bN.LexicalComposer,{initialConfig:iC,children:(0,fN.jsxs)("div",{className:"editor-container",children:[(0,fN.jsx)($N,{}),(0,fN.jsxs)("div",{className:"editor-inner",children:[(0,fN.jsx)(TN.RichTextPlugin,{contentEditable:(0,fN.jsx)(EN.ContentEditable,{className:"editor-input"}),placeholder:(0,fN.jsx)(rC,{})}),(0,fN.jsx)(SN.HistoryPlugin,{}),(0,fN.jsx)(IN.AutoFocusPlugin,{}),(0,fN.jsx)(JN,{}),(0,fN.jsx)(qN.ListPlugin,{}),(0,fN.jsx)(WN.LinkPlugin,{}),(0,fN.jsx)(nC,{}),(0,fN.jsx)(QN,{maxDepth:7}),(0,fN.jsx)(HN.MarkdownShortcutPlugin,{transformers:GN.TRANSFORMERS})]})]})})}function oC(){return(0,fN.jsxs)("div",{class:"input-group",children:[(0,fN.jsx)("input",{type:"text",class:"form-control",placeholder:"Document Title","aria-label":"Recipient's username with two button addons"}),(0,fN.jsx)("a",{className:"btn btn-success",type:"button",href:"/home",onClick:()=>{console.log("Save clicked!")},children:"Publish"}),(0,fN.jsx)("a",{className:"btn btn-warning",type:"button",href:"/home",onClick:()=>{console.log("Close clicked!")},children:"Close"}),(0,fN.jsx)("a",{className:"btn btn-danger",type:"button",style:{borderRadius:"0px"},href:"/home",onClick:()=>{window.confirm("Are you sure you want to delete?")&&console.log("Delete clicked!")},children:"Delete"})]})}function aC(){return document.body.style="background: white",(0,fN.jsxs)(fN.Fragment,{children:[(0,fN.jsx)(oC,{}),(0,fN.jsx)(sC,{})]})}const lC=pn.auth();let cC="Welcome to Opulent",uC="The platform built for dreamers.";function dC(){const[e]=hN(lC);return(0,fN.jsx)("div",{className:"d-flex align-items-center justify-content-center vh-100",style:{backgroundColor:"#09090c"},children:(0,fN.jsx)("div",{className:"card p-5 mb-2 text-white mx-auto",style:{padding:"100px",backgroundColor:"#09090c"},children:(0,fN.jsxs)("form",{children:[(0,fN.jsx)("div",{className:"form-group"}),(0,fN.jsx)("h1",{className:"mb-2",children:cC}),(0,fN.jsx)("h5",{style:{fontSize:"18px",color:"#98a1b2"},className:"mb-4",children:uC}),(0,fN.jsxs)("div",{className:"form-group mb-4",children:[(0,fN.jsx)("label",{className:"form-label",children:"\ud83d\udd12"}),(0,fN.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Email"})]}),(0,fN.jsx)("div",{className:"form-group mb-4",children:(0,fN.jsx)("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})}),(0,fN.jsxs)("div",{className:"form-group form-check mb-4",children:[(0,fN.jsx)("input",{type:"checkbox",className:"form-check-input",id:"exampleCheck1"}),(0,fN.jsx)("small",{id:"emailHelp",className:"form-text text-light",children:"Save your password."})]}),(0,fN.jsx)("div",{className:"mb-3 text-center",children:(0,fN.jsx)("button",{style:{width:"100%"},type:"submit",className:"glow-btn me-4",children:"Continue \ud83d\udc4b"})}),(0,fN.jsx)("div",{className:"mb-4 text-center",children:(0,fN.jsx)("button",{style:{width:"100%",backgroundColor:"#424D42",borderColor:"#424D42"},type:"submit",className:"btn btn-primary",children:"Forgot Password"})}),(0,fN.jsxs)("div",{children:[(0,fN.jsx)("label",{className:"form-label",children:"only google sign-in works for now"}),(0,fN.jsx)("br",{}),(0,fN.jsx)("button",{type:"button",className:"login-with-google-btn",onClick:()=>{const e=new pn.auth.GoogleAuthProvider;lC.signInWithPopup(e)},children:"Google Sign-In"})]})]})})})}function hC(){return(0,fN.jsxs)(fN.Fragment,{children:[(0,fN.jsx)(mN,{}),(0,fN.jsx)("h1",{children:"Explore Page WIP"})]})}function fC(){return(0,fN.jsxs)(fN.Fragment,{children:[(0,fN.jsx)(mN,{}),(0,fN.jsx)("h1",{children:"Journal Page WIP"})]})}const pC=pn.auth();function gC(){const[e,t]=hN(pC);return t?null:(0,fN.jsx)(fN.Fragment,{children:(0,fN.jsx)("div",{className:"App",children:(0,fN.jsx)(_e,{children:(0,fN.jsxs)(me,{children:[(0,fN.jsx)(pe,{path:"/sign-in",element:null===e?(0,fN.jsx)(dC,{}):(0,fN.jsx)(fe,{to:"/home"})}),(0,fN.jsx)(pe,{path:"/editor",element:null!==e?(0,fN.jsx)(aC,{}):(0,fN.jsx)(fe,{to:"/sign-in"})}),(0,fN.jsx)(pe,{path:"/home",element:null!==e?(0,fN.jsx)(_N,{}):(0,fN.jsx)(fe,{to:"/sign-in"})}),(0,fN.jsx)(pe,{path:"/explore",element:null!==e?(0,fN.jsx)(hC,{}):(0,fN.jsx)(fe,{to:"/sign-in"})}),(0,fN.jsx)(pe,{path:"/journal",element:null!==e?(0,fN.jsx)(fC,{}):(0,fN.jsx)(fe,{to:"/sign-in"})})]})})})})}const mC=document.getElementById("root");(0,s.s)(mC).render((0,fN.jsx)(r.StrictMode,{children:(0,fN.jsx)(gC,{})}))})()})();
//# sourceMappingURL=main.766bc404.js.map